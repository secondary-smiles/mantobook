<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:57:05 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>IP&minus;MACSEC</title>

</head>
<body>
<h1>ip-macsec</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ip-macsec
&minus; MACsec device configuration</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ip link add
link</b> <i>DEVICE</i> <b>name</b> <i>NAME</i> <b>type
macsec</b> [ [ <b>address</b> <i>&lt;lladdr&gt;</i> ]
<b>port</b> <i>PORT</i> | <b>sci</b> <i>&lt;u64&gt;</i> ] [
<b>cipher</b> { <b>default</b> | <b>gcm-aes-128</b> |
<b>gcm-aes-256</b> | <b>gcm-aes-xpn-128</b> |
<b>gcm-aes-xpn-256</b> } ] [ <b>icvlen</b> <i>ICVLEN</i> ] [
<b>encrypt</b> { <b>on</b> | <b>off</b> } ] [
<b>send_sci</b> { <b>on</b> | <b>off</b> } ] [
<b>end_station</b> { <b>on</b> | <b>off</b> } ] [ <b>scb</b>
{ <b>on</b> | <b>off</b> } ] [ <b>protect</b> { <b>on</b> |
<b>off</b> } ] [ <b>replay</b> { <b>on</b> | <b>off</b> } ]
[ <b>window</b> <i>WINDOW</i> ] [ <b>validate</b> {
<b>strict</b> | <b>check</b> | <b>disabled</b> } ] [
<b>encodingsa</b> <i>SA</i> ] [ <b>offload</b> { <b>off</b>
| <b>phy</b> | <b>mac</b> } ]</p>

<p style="margin-left:11%; margin-top: 1em"><b>ip macsec
add</b> <i>DEV</i> <b>tx sa</b> { <i>0..3</i> } [
<i>OPTS</i> ] <b>key</b> <i>ID KEY</i> <b><br>
ip macsec set</b> <i>DEV</i> <b>tx sa</b> { <i>0..3</i> } [
<i>OPTS</i> ] <b><br>
ip macsec del</b> <i>DEV</i> <b>tx sa</b> { <i>0..3</i>
}</p>

<p style="margin-left:11%; margin-top: 1em"><b>ip macsec
add</b> <i>DEV</i> <b>rx</b> <i>SCI</i> [ <b>on</b> |
<b>off</b> ] <b><br>
ip macsec set</b> <i>DEV</i> <b>rx</b> <i>SCI</i> [
<b>on</b> | <b>off</b> ] <b><br>
ip macsec del</b> <i>DEV</i> <b>rx</b> <i>SCI</i></p>

<p style="margin-left:11%; margin-top: 1em"><b>ip macsec
add</b> <i>DEV</i> <b>rx</b> <i>SCI</i> <b>sa</b> {
<i>0..3</i> } [ <i>OPTS</i> ] <b>key</b> <i>ID KEY</i>
<b><br>
ip macsec set</b> <i>DEV</i> <b>rx</b> <i>SCI</i> <b>sa</b>
{ <i>0..3</i> } [ <i>OPTS</i> ] <b><br>
ip macsec del</b> <i>DEV</i> <b>rx</b> <i>SCI</i> <b>sa</b>
{ <i>0..3</i> }</p>

<p style="margin-left:11%; margin-top: 1em"><b>ip macsec
offload</b> <i>DEV</i> { <b>off</b> | <b>phy</b> |
<b>mac</b> }</p>

<p style="margin-left:11%; margin-top: 1em"><b>ip macsec
show</b> [ <i>DEV</i> ]</p>

<p style="margin-left:11%; margin-top: 1em"><i>OPTS</i> :=
[ <b>pn</b> { <i>1..2^32-1</i> } | <b>xpn</b> {
<i>1..2^64-1</i> } ] [ <b>salt</b> <i>SALT</i> ] [
<b>ssci</b> <i>&lt;u32&gt;</i> ] [ <b>on</b> | <b>off</b> ]
<i><br>
SCI</i> := { <b>sci</b> <i>&lt;u64&gt;</i> | <b>port</b>
<i>PORT</i> <b>address</b> <i>&lt;lladdr&gt;</i> } <i><br>
PORT</i> := { <i>1..2^16-1</i> } <i><br>
SALT</i> := 96-bit hex string</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>ip
macsec</b> commands are used to configure transmit secure
associations and receive secure channels and their secure
associations on a MACsec device created with the <b>ip link
add</b> command using the <i>macsec</i> type.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Create a
MACsec device on link eth0 (offload is disabled by
default)</b> <br>
# ip link add link eth0 macsec0 type macsec port 11 encrypt
on</p>

<p style="margin-left:11%; margin-top: 1em"><b>Configure a
secure association on that device</b> <br>
# ip macsec add macsec0 tx sa 0 pn 1024 on key 01
81818181818181818181818181818181</p>

<p style="margin-left:11%; margin-top: 1em"><b>Configure a
receive channel</b> <br>
# ip macsec add macsec0 rx port 1234 address
c6:19:52:8f:e6:a0</p>

<p style="margin-left:11%; margin-top: 1em"><b>Configure a
receive association</b> <br>
# ip macsec add macsec0 rx port 1234 address
c6:19:52:8f:e6:a0 sa 0 pn 1 on key 00
82828282828282828282828282828282</p>

<p style="margin-left:11%; margin-top: 1em"><b>Display
MACsec configuration</b> <br>
# ip macsec show</p>

<p style="margin-left:11%; margin-top: 1em"><b>Configure
offloading on an interface</b> <br>
# ip macsec offload macsec0 phy</p>

<p style="margin-left:11%; margin-top: 1em"><b>Configure
offloading upon MACsec device creation</b> <br>
# ip link add link eth0 macsec0 type macsec port 11 encrypt
on offload mac</p>

<h2>EXTENDED PACKET NUMBER EXAMPLES
<a name="EXTENDED PACKET NUMBER EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Create a
MACsec device on link eth0 with enabled extended packet
number (offload is disabled by default)</b> <br>
# ip link add link eth0 macsec0 type macsec port 11 encrypt
on cipher gcm-aes-xpn-128</p>

<p style="margin-left:11%; margin-top: 1em"><b>Configure a
secure association on that device</b> <br>
# ip macsec add macsec0 tx sa 0 xpn 1024 on salt
838383838383838383838383 ssci 123 key 01
81818181818181818181818181818181</p>

<p style="margin-left:11%; margin-top: 1em"><b>Configure a
receive channel</b> <br>
# ip macsec add macsec0 rx port 11 address
c6:19:52:8f:e6:a0</p>

<p style="margin-left:11%; margin-top: 1em"><b>Configure a
receive association</b> <br>
# ip macsec add macsec0 rx port 11 address c6:19:52:8f:e6:a0
sa 0 xpn 1 on salt 838383838383838383838383 ssci 123 key 00
82828282828282828282828282828282</p>

<p style="margin-left:11%; margin-top: 1em"><b>Display
MACsec configuration</b> <br>
# ip macsec show</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This tool can
be used to configure the 802.1AE keys of the interface. Note
that 802.1AE uses GCM-AES with a initialization vector (IV)
derived from the packet number. The same key must not be
used with the same IV more than once. Instead, keys must be
frequently regenerated and distributed. This tool is thus
mostly for debugging and testing, or in combination with a
user-space application that reconfigures the keys. It is
wrong to just configure the keys statically and assume them
to work indefinitely. The suggested and standardized way for
key management is 802.1X-2010, which is implemented by
wpa_supplicant.</p>

<h2>EXTENDED PACKET NUMBER NOTES
<a name="EXTENDED PACKET NUMBER NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Passing cipher
<b>gcm-aes-xpn-128</b> or <b>gcm-aes-xpn-256</b> to <b>ip
link add</b> command using the <i>macsec</i> type requires
using the keyword <b>&rsquo;xpn&rsquo;</b> instead of
<b>&rsquo;pn&rsquo;</b> in addition to providing a salt
using the <b>&rsquo;salt&rsquo;</b> keyword and ssci using
the <b>&rsquo;ssci&rsquo;</b> keyword when using the <b>ip
macsec</b> command.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ip-link</b>(8)
<b>wpa_supplicant</b>(8)</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Sabrina Dubroca
&lt;sd@queasysnail.net&gt;</p>
<hr>
</body>
</html>
