<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:57:10 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>USERMOD</title>

</head>
<body>
<h1>usermod</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">usermod &minus;
modify a user account</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="35%">


<p style="margin-top: 1em"><b>usermod</b> [<i>options</i>]
<i>LOGIN</i></p> </td>
<td width="54%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>usermod</b> command modifies the system account
files.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The options
which apply to the <b>usermod</b> command are:</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;a</b>,
<b>&minus;&minus;append</b></p>

<p style="margin-left:17%;">Add the user to the
supplementary group(s). Use only with the <b>&minus;G</b>
option.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;b</b>,
<b>&minus;&minus;badname</b></p>

<p style="margin-left:17%;">Allow names that do not conform
to standards.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;c</b>,
<b>&minus;&minus;comment&nbsp;</b><i>COMMENT</i></p>

<p style="margin-left:17%;">update the comment field of the
user in /etc/passwd, which is normally modified using the
<b>chfn</b>(1) utility.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;d</b>,
<b>&minus;&minus;home&nbsp;</b><i>HOME_DIR</i></p>

<p style="margin-left:17%;">The user's new login
directory.</p>

<p style="margin-left:17%; margin-top: 1em">If the
<b>&minus;m</b> option is given, the contents of the current
home directory will be moved to the new home directory,
which is created if it does not already exist. If the
current home directory does not exist the new home directory
will not be created.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;e</b>,
<b>&minus;&minus;expiredate&nbsp;</b><i>EXPIRE_DATE</i></p>

<p style="margin-left:17%;">The date on which the user
account will be disabled. The date is specified in the
format <i>YYYY&minus;MM&minus;DD</i>. Integers as input are
interpreted as days after 1970&minus;01&minus;01.</p>

<p style="margin-left:17%; margin-top: 1em">An input of
&minus;1 or an empty string will blank the account
expiration field in the shadow password file. The account
will remain available with no date limit.</p>

<p style="margin-left:17%; margin-top: 1em">This option
requires a /etc/shadow file. A /etc/shadow entry will be
created if there were none.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;f</b>,
<b>&minus;&minus;inactive&nbsp;</b><i>INACTIVE</i></p>

<p style="margin-left:17%;">defines the number of days
after the password exceeded its maximum age during which the
user may still login by immediately replacing the password.
This grace period before the account becomes inactive is
stored in the shadow password file. An input of 0 will
disable an expired password with no delay. An input of
&minus;1 will blank the respective field in the shadow
password file. See <b>shadow</b>(5) for more
information.</p>

<p style="margin-left:17%; margin-top: 1em">This option
requires a /etc/shadow file. A /etc/shadow entry will be
created if there were none.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;g</b>,
<b>&minus;&minus;gid&nbsp;</b><i>GROUP</i></p>

<p style="margin-left:17%;">The name or numerical ID of the
user's new primary group. The group must exist.</p>

<p style="margin-left:17%; margin-top: 1em">Any file from
the user's home directory owned by the previous primary
group of the user will be owned by this new group.</p>

<p style="margin-left:17%; margin-top: 1em">The group
ownership of files outside of the user's home directory must
be fixed manually.</p>

<p style="margin-left:17%; margin-top: 1em">The change of
the group ownership of files inside of the user's home
directory is also not done if the home dir owner uid is
different from the current or new user id. This is a safety
measure for special home directories such as /.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;G</b>,
<b>&minus;&minus;groups&nbsp;</b><i>GROUP1</i>[<i>,GROUP2,...</i>[<i>,GROUPN</i>]]]</p>

<p style="margin-left:17%;">A list of supplementary groups
which the user is also a member of. Each group is separated
from the next by a comma, with no intervening whitespace.
The groups must exist.</p>

<p style="margin-left:17%; margin-top: 1em">If the user is
currently a member of a group which is not listed, the user
will be removed from the group. This behaviour can be
changed via the <b>&minus;a</b> option, which appends the
user to the current supplementary group list.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;l</b>,
<b>&minus;&minus;login&nbsp;</b><i>NEW_LOGIN</i></p>

<p style="margin-left:17%;">The name of the user will be
changed from <i>LOGIN</i> to <i>NEW_LOGIN</i>. Nothing else
is changed. In particular, the user's home directory or mail
spool should probably be renamed manually to reflect the new
login name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;L</b>,
<b>&minus;&minus;lock</b></p>

<p style="margin-left:17%;">Lock a user's password. This
puts a '!' in front of the encrypted password, effectively
disabling the password. You can't use this option with
<b>&minus;p</b> or <b>&minus;U</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Note: if you
wish to lock the account (not only access with a password),
you should also set the <i>EXPIRE_DATE</i> to <i>1</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;m</b>,
<b>&minus;&minus;move&minus;home</b></p>

<p style="margin-left:17%;">moves the content of the user's
home directory to the new location. If the current home
directory does not exist the new home directory will not be
created.</p>

<p style="margin-left:17%; margin-top: 1em">This option is
only valid in combination with the <b>&minus;d</b> (or
<b>&minus;&minus;home</b>) option.</p>

<p style="margin-left:17%; margin-top: 1em"><b>usermod</b>
will try to adapt the ownership of the files and to copy the
modes, ACL and extended attributes, but manual changes might
be needed afterwards.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;o</b>,
<b>&minus;&minus;non&minus;unique</b></p>

<p style="margin-left:17%;">allows to change the user ID to
a non&minus;unique value.</p>

<p style="margin-left:17%; margin-top: 1em">This option is
only valid in combination with the <b>&minus;u</b> option.
As a user identity serves as key to map between users on one
hand and permissions, file ownerships and other aspects that
determine the system's behavior on the other hand, more than
one login name will access the account of the given UID.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;p</b>,
<b>&minus;&minus;password&nbsp;</b><i>PASSWORD</i></p>

<p style="margin-left:17%;">defines a new password for the
user. PASSWORD is expected to be encrypted, as returned by
<b>crypt</b> (3).</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note:</b>
Avoid this option on the command line because the password
(or encrypted password) will be visible by users listing the
processes.</p>

<p style="margin-left:17%; margin-top: 1em">The password
will be written in the local /etc/passwd or /etc/shadow
file. This might differ from the password database
configured in your PAM configuration.</p>

<p style="margin-left:17%; margin-top: 1em">You should make
sure the password respects the system's password policy.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;r</b>,
<b>&minus;&minus;remove</b></p>

<p style="margin-left:17%;">Remove the user from named
supplementary group(s). Use only with the <b>&minus;G</b>
option.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;R</b>,
<b>&minus;&minus;root&nbsp;</b><i>CHROOT_DIR</i></p>

<p style="margin-left:17%;">Apply changes in the
<i>CHROOT_DIR</i> directory and use the configuration files
from the <i>CHROOT_DIR</i> directory. Only absolute paths
are supported.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;P</b>,
<b>&minus;&minus;prefix&nbsp;</b><i>PREFIX_DIR</i></p>

<p style="margin-left:17%;">Apply changes within the
directory tree starting with <i>PREFIX_DIR</i> and use as
well the configuration files located there. This option does
not chroot and is intended for preparing a
cross&minus;compilation target. Some limitations: NIS and
LDAP users/groups are not verified. PAM authentication is
using the host files. No SELINUX support.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;s</b>,
<b>&minus;&minus;shell&nbsp;</b><i>SHELL</i></p>

<p style="margin-left:17%;">changes the user's login shell.
An empty string for SHELL blanks the field in /etc/passwd
and logs the user into the system's default shell.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;u</b>,
<b>&minus;&minus;uid&nbsp;</b><i>UID</i></p>

<p style="margin-left:17%;">The new value of the user's
ID.</p>

<p style="margin-left:17%; margin-top: 1em">This value must
be unique, unless the <b>&minus;o</b> option is used. The
value must be non&minus;negative.</p>

<p style="margin-left:17%; margin-top: 1em">The user's
mailbox, and any files which the user owns and which are
located in the user's home directory will have the file user
ID changed automatically.</p>

<p style="margin-left:17%; margin-top: 1em">The ownership
of files outside of the user's home directory must be fixed
manually.</p>

<p style="margin-left:17%; margin-top: 1em">The change of
the user ownership of files inside of the user's home
directory is also not done if the home dir owner uid is
different from the current or new user id. This is a safety
measure for special home directories such as /.</p>

<p style="margin-left:17%; margin-top: 1em">No checks will
be performed with regard to the <b>UID_MIN</b>,
<b>UID_MAX</b>, <b>SYS_UID_MIN</b>, or <b>SYS_UID_MAX</b>
from /etc/login.defs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;U</b>,
<b>&minus;&minus;unlock</b></p>

<p style="margin-left:17%;">Unlock a user's password. This
removes the '!' in front of the encrypted password. You
can't use this option with <b>&minus;p</b> or
<b>&minus;L</b>.</p>

<p style="margin-left:17%; margin-top: 1em">Note: if you
wish to unlock the account (not only access with a
password), you should also set the <i>EXPIRE_DATE</i> (for
example to <i>99999</i>, or to the <b>EXPIRE</b> value from
/etc/default/useradd).</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;v</b>,
<b>&minus;&minus;add&minus;subuids&nbsp;</b><i>FIRST</i>&minus;<i>LAST</i></p>

<p style="margin-left:17%;">Add a range of subordinate uids
to the user's account.</p>

<p style="margin-left:17%; margin-top: 1em">This option may
be specified multiple times to add multiple ranges to a
user's account.</p>

<p style="margin-left:17%; margin-top: 1em">No checks will
be performed with regard to <b>SUB_UID_MIN</b>,
<b>SUB_UID_MAX</b>, or <b>SUB_UID_COUNT</b> from
/etc/login.defs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;V</b>,
<b>&minus;&minus;del&minus;subuids&nbsp;</b><i>FIRST</i>&minus;<i>LAST</i></p>

<p style="margin-left:17%;">Remove a range of subordinate
uids from the user's account.</p>

<p style="margin-left:17%; margin-top: 1em">This option may
be specified multiple times to remove multiple ranges to a
user's account. When both
<b>&minus;&minus;del&minus;subuids</b> and
<b>&minus;&minus;add&minus;subuids</b> are specified, the
removal of all subordinate uid ranges happens before any
subordinate uid range is added.</p>

<p style="margin-left:17%; margin-top: 1em">No checks will
be performed with regard to <b>SUB_UID_MIN</b>,
<b>SUB_UID_MAX</b>, or <b>SUB_UID_COUNT</b> from
/etc/login.defs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;w</b>,
<b>&minus;&minus;add&minus;subgids&nbsp;</b><i>FIRST</i>&minus;<i>LAST</i></p>

<p style="margin-left:17%;">Add a range of subordinate gids
to the user's account.</p>

<p style="margin-left:17%; margin-top: 1em">This option may
be specified multiple times to add multiple ranges to a
user's account.</p>

<p style="margin-left:17%; margin-top: 1em">No checks will
be performed with regard to <b>SUB_GID_MIN</b>,
<b>SUB_GID_MAX</b>, or <b>SUB_GID_COUNT</b> from
/etc/login.defs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;W</b>,
<b>&minus;&minus;del&minus;subgids&nbsp;</b><i>FIRST</i>&minus;<i>LAST</i></p>

<p style="margin-left:17%;">Remove a range of subordinate
gids from the user's account.</p>

<p style="margin-left:17%; margin-top: 1em">This option may
be specified multiple times to remove multiple ranges to a
user's account. When both
<b>&minus;&minus;del&minus;subgids</b> and
<b>&minus;&minus;add&minus;subgids</b> are specified, the
removal of all subordinate gid ranges happens before any
subordinate gid range is added.</p>

<p style="margin-left:17%; margin-top: 1em">No checks will
be performed with regard to <b>SUB_GID_MIN</b>,
<b>SUB_GID_MAX</b>, or <b>SUB_GID_COUNT</b> from
/etc/login.defs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;Z</b>,
<b>&minus;&minus;selinux&minus;user&nbsp;</b><i>SEUSER</i></p>

<p style="margin-left:17%;">defines the SELinux user to be
mapped with <i>LOGIN</i>. An empty string (&quot;&quot;)
will remove the respective entry (if any). Note that the
shadow system doesn't store the selinux&minus;user, it uses
semanage(8) for that.</p>

<h2>CAVEATS
<a name="CAVEATS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You must make
certain that the named user is not executing any processes
when this command is being executed if the user's numerical
user ID, the user's name, or the user's home directory is
being changed. <b>usermod</b> checks this on Linux. On other
operating systems it only uses utmp to check if the user is
logged in.</p>

<p style="margin-left:11%; margin-top: 1em">You must change
the owner of any <b>crontab</b> files or <b>at</b> jobs
manually.</p>

<p style="margin-left:11%; margin-top: 1em">You must make
any changes involving NIS on the NIS server.</p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
configuration variables in /etc/login.defs change the
behavior of this tool:</p>


<p style="margin-left:11%; margin-top: 1em"><b>LASTLOG_UID_MAX</b>
(number)</p>

<p style="margin-left:17%;">Highest user ID number for
which the lastlog entries should be updated. As higher user
IDs are usually tracked by remote user identity and
authentication services there is no need to create a huge
sparse lastlog file for them.</p>

<p style="margin-left:17%; margin-top: 1em">No
<b>LASTLOG_UID_MAX</b> option present in the configuration
means that there is no user ID limit for writing lastlog
entries.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MAIL_DIR</b>
(string)</p>

<p style="margin-left:17%;">The mail spool directory. This
is needed to manipulate the mailbox when its corresponding
user account is modified or deleted. If not specified, a
compile&minus;time default is used. The parameter
CREATE_MAIL_SPOOL in /etc/default/useradd determines whether
the mail spool should be created.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MAIL_FILE</b>
(string)</p>

<p style="margin-left:17%;">Defines the location of the
users mail spool files relatively to their home
directory.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>MAIL_DIR</b> and <b>MAIL_FILE</b> variables are used by
<b>useradd</b>, <b>usermod</b>, and <b>userdel</b> to
create, move, or delete the user's mail spool.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MAX_MEMBERS_PER_GROUP</b>
(number)</p>

<p style="margin-left:17%;">Maximum members per group
entry. When the maximum is reached, a new group entry (line)
is started in /etc/group (with the same name, same password,
and same GID).</p>

<p style="margin-left:17%; margin-top: 1em">The default
value is 0, meaning that there are no limits in the number
of members in a group.</p>

<p style="margin-left:17%; margin-top: 1em">This feature
(split group) permits to limit the length of lines in the
group file. This is useful to make sure that lines for NIS
groups are not larger than 1024 characters.</p>

<p style="margin-left:17%; margin-top: 1em">If you need to
enforce such limit, you can use 25.</p>

<p style="margin-left:17%; margin-top: 1em">Note: split
groups may not be supported by all tools (even in the Shadow
toolsuite). You should not use this variable unless you
really need it.</p>


<p style="margin-left:11%; margin-top: 1em"><b>SUB_GID_MIN</b>
(number), <b>SUB_GID_MAX</b> (number), <b>SUB_GID_COUNT</b>
(number)</p>

<p style="margin-left:17%;">If /etc/subuid exists, the
commands <b>useradd</b> and <b>newusers</b> (unless the user
already have subordinate group IDs) allocate
<b>SUB_GID_COUNT</b> unused group IDs from the range
<b>SUB_GID_MIN</b> to <b>SUB_GID_MAX</b> for each new
user.</p>

<p style="margin-left:17%; margin-top: 1em">The default
values for <b>SUB_GID_MIN</b>, <b>SUB_GID_MAX</b>,
<b>SUB_GID_COUNT</b> are respectively 100000, 600100000 and
65536.</p>


<p style="margin-left:11%; margin-top: 1em"><b>SUB_UID_MIN</b>
(number), <b>SUB_UID_MAX</b> (number), <b>SUB_UID_COUNT</b>
(number)</p>

<p style="margin-left:17%;">If /etc/subuid exists, the
commands <b>useradd</b> and <b>newusers</b> (unless the user
already have subordinate user IDs) allocate
<b>SUB_UID_COUNT</b> unused user IDs from the range
<b>SUB_UID_MIN</b> to <b>SUB_UID_MAX</b> for each new
user.</p>

<p style="margin-left:17%; margin-top: 1em">The default
values for <b>SUB_UID_MIN</b>, <b>SUB_UID_MAX</b>,
<b>SUB_UID_COUNT</b> are respectively 100000, 600100000 and
65536.</p>

<h2>FILES
<a name="FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">/etc/group</p>

<p style="margin-left:17%;">Group account information</p>


<p style="margin-left:11%; margin-top: 1em">/etc/gshadow</p>

<p style="margin-left:17%;">Secure group account
informatio.</p>


<p style="margin-left:11%; margin-top: 1em">/etc/login.defs</p>

<p style="margin-left:17%;">Shadow password suite
configuration</p>


<p style="margin-left:11%; margin-top: 1em">/etc/passwd</p>

<p style="margin-left:17%;">User account information</p>


<p style="margin-left:11%; margin-top: 1em">/etc/shadow</p>

<p style="margin-left:17%;">Secure user account
information</p>


<p style="margin-left:11%; margin-top: 1em">/etc/subgid</p>

<p style="margin-left:17%;">Per user subordinate group
IDs</p>


<p style="margin-left:11%; margin-top: 1em">/etc/subuid</p>

<p style="margin-left:17%;">Per user subordinate user
IDs</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>chfn</b>(1),
<b>chsh</b>(1), <b>passwd</b>(1), <b>crypt</b>(3),
<b>gpasswd</b>(8), <b>groupadd</b>(8), <b>groupdel</b>(8),
<b>groupmod</b>(8), <b>login.defs</b>(5), <b>subgid</b>(5),
<b>subuid</b>(5), <b>useradd</b>(8), <b>userdel</b>(8).</p>
<hr>
</body>
</html>
