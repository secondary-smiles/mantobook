<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:57:04 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DCB-ETS</title>

</head>
<body>
<h1>dcb-ets</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">dcb-ets &minus;
show / manipulate ETS (Enhanced Transmission Selection)
settings of the DCB (Data Center Bridging) subsystem</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:23%; margin-top: 1em"><b>dcb</b> [
<i>OPTIONS</i> ] <b>ets</b> { <i>COMMAND</i> | <i>help</i>
}</p>

<p style="margin-left:23%; margin-top: 1em"><b>dcb ets show
dev</b> DEV [ <b>willing</b> ] [ <b>ets-cap</b> ] [
<b>cbs</b> ] [ <b>tc-tsa</b> ] [ <b>reco-tc-tsa</b> ] [
<b>pg-bw</b> ] [ <b>tc-bw</b> ] [ <b>reco-tc-bw</b> ] [
<b>prio-tc</b> ] [ <b>reco-prio-tc</b> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>dcb ets set
dev</b> DEV [ <b>willing</b> { <b>on</b> | <b>off</b> } ] [
{ <b>tc-tsa</b> | <b>reco-tc-tsa</b> } <i>TSA-MAP</i> ] [ {
<b>pg-bw</b> | <b>tc-bw</b> | <b>reco-tc-bw</b> }
<i>BW-MAP</i> ] [ { <b>prio-tc</b> | <b>reco-prio-tc</b> }
<i>PRIO-MAP</i> ]</p>

<p style="margin-left:23%; margin-top: 1em"><i>TSA-MAP</i>
:= [ <i>TSA-MAP</i> ] <i>TSA-MAPPING</i></p>


<p style="margin-left:23%; margin-top: 1em"><i>TSA-MAPPING</i>
:= { <i>TC</i> | <b>all</b> }<b>:</b>{ <b>strict</b> |
<b>cbs</b> | <b>ets</b> | <b>vendor</b> }</p>

<p style="margin-left:23%; margin-top: 1em"><i>BW-MAP</i>
:= [ <i>BW-MAP</i> ] <i>BW-MAPPING</i></p>


<p style="margin-left:23%; margin-top: 1em"><i>BW-MAPPING</i>
:= { <i>TC</i> | <b>all</b> }<b>:</b><i>INTEGER</i></p>


<p style="margin-left:23%; margin-top: 1em"><i>PRIO-MAP</i>
:= [ <i>PRIO-MAP</i> ] <i>PRIO-MAPPING</i></p>


<p style="margin-left:23%; margin-top: 1em"><i>PRIO-MAPPING</i>
:= { <i>PRIO</i> | <b>all</b> }<b>:</b><i>TC</i></p>

<p style="margin-left:23%; margin-top: 1em"><i>TC</i> := {
<b>0</b> .. <b>7</b> }</p>

<p style="margin-left:23%; margin-top: 1em"><i>PRIO</i> :=
{ <b>0</b> .. <b>7</b> }</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>dcb ets</b>
is used to configure Enhanced Transmission Selection
attributes through Linux DCB (Data Center Bridging)
interface. ETS permits configuration of mapping of
priorities to traffic classes, traffic selection algorithm
to use per traffic class, bandwidth allocation, etc.</p>

<p style="margin-left:11%; margin-top: 1em">Two DCB TLVs
are related to the ETS feature: a configuration and
recommendation values. Recommendation values are named with
a prefix <b>reco-,</b> while the configuration ones have
plain names.</p>

<h2>PARAMETERS
<a name="PARAMETERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For read-write
parameters, the following describes only the write
direction, i.e. as used with the <b>set</b> command. For the
<b>show</b> command, the parameter name is to be used as a
simple keyword without further arguments. This instructs the
tool to show the value of a given parameter. When no
parameters are given, the tool shows the complete ETS
configuration. <b><br>
ets-cap</b></p>

<p style="margin-left:22%;">A read-only property that shows
the number of supported ETS traffic classes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>cbs</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>A read-only property that is enabled if the driver and
the hardware support the CBS Transmission Selection
Algorithm.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>willing</b> { <b>on</b> |
<b>off</b> }</p>

<p style="margin-left:22%;">Whether local host should
accept configuration from peer TLVs.</p>

<p style="margin-left:11%;"><b>prio-tc</b> <i>PRIO-MAP</i>
<b><br>
reco-prio-tc</b> <i>PRIO-MAP</i></p>

<p style="margin-left:22%;"><i>PRIO-MAP</i> uses the array
parameter syntax, see <b>dcb</b>(8) for details. Keys are
priorities, values are traffic classes. For each priority
sets a TC where traffic with that priority is directed
to.</p>

<p style="margin-left:11%;"><b>tc-tsa</b> <i>TSA-MAP</i>
<b><br>
reco-tc-tsa</b> <i>TSA-MAP</i></p>

<p style="margin-left:22%;"><i>TSA-MAP</i> uses the array
parameter syntax, see <b>dcb</b>(8) for details. Keys are
TCs, values are Transmission Selection Algorithm (TSA)
keywords described below. For each TC sets an algorithm used
for deciding how traffic queued up at this TC is scheduled
for transmission. Supported TSAs are:</p>

<p style="margin-left:22%; margin-top: 1em"><b>strict</b> -
for strict priority, where traffic in higher-numbered TCs
always takes precedence over traffic in lower-numbered TCs.
<b><br>
ets</b> - for Enhanced Traffic Selection, where available
bandwidth is distributed among the ETS-enabled TCs according
to the weights set by <b>tc-bw</b> and <b>reco-tc-bw</b>,
respectively. <b><br>
cbs</b> - for Credit Based Shaper, where traffic is
scheduled in a strict manner up to the limit set by a
shaper. <b><br>
vendor</b> - for vendor-specific traffic selection
algorithm.</p>

<p style="margin-left:11%;"><b>tc-bw</b> <i>BW-MAP</i>
<b><br>
reco-tc-bw</b> <i>BW-MAP</i></p>

<p style="margin-left:22%;"><i>BW-MAP</i> uses the array
parameter syntax, see <b>dcb</b>(8) for details. Keys are
TCs, values are integers representing percent of available
bandwidth given to the traffic class in question. The value
should be 0 for TCs whose TSA is not <b>ets</b>, and the sum
of all values shall be 100. As an exception to the standard
wording, a configuration with no <b>ets</b> TCs is permitted
to sum up to 0 instead.</p>

<p style="margin-left:11%;"><b>pg-bw</b> <i>BW-MAP</i></p>

<p style="margin-left:22%;">The precise meaning of
<b>pg-bw</b> is not standardized, but the assumption seems
to be that the same scheduling process as on the transmit
side is applicable on receive side as well, and configures
receive bandwidth allocation for <b>ets</b> ingress traffic
classes (priority groups).</p>

<h2>EXAMPLE &amp; USAGE
<a name="EXAMPLE &amp; USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Configure ETS
priomap in a one-to-one fashion:</p>

<p style="margin-left:11%; margin-top: 1em"># dcb ets set
dev eth0 prio-tc 0:0 1:1 2:2 3:3 4:4 5:5 6:6 7:7</p>

<p style="margin-left:11%; margin-top: 1em">Set TSA and
transmit bandwidth configuration:</p>

<p style="margin-left:11%; margin-top: 1em"># dcb ets set
dev eth0 tc-tsa all:strict 0:ets 1:ets 2:ets \ <br>
tc-bw all:0 0:33 1:33 2:34</p>

<p style="margin-left:11%; margin-top: 1em">Show what was
set:</p>

<p style="margin-left:11%; margin-top: 1em"># dcb ets show
dev eth0 prio-tc tc-tsa tc-bw <br>
prio-tc 0:0 1:1 2:2 3:3 4:4 5:5 6:6 7:7 <br>
tc-tsa 0:ets 1:ets 2:ets 3:strict 4:strict 5:strict 6:strict
7:strict <br>
tc-bw 0:33 1:33 2:34 3:0 4:0 5:0 6:0 7:0</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Exit status is
0 if command was successful or a positive integer upon
failure.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>dcb</b>(8)</p>

<h2>REPORTING BUGS
<a name="REPORTING BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Report any bugs
to the Network Developers mailing list
<b>&lt;netdev@vger.kernel.org&gt;</b> where the development
and maintenance is primarily done. You do not have to be
subscribed to the list to send a message there.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Petr Machata
&lt;me@pmachata.org&gt;</p>
<hr>
</body>
</html>
