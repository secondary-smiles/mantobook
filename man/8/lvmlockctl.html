<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:57:06 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>LVMLOCKCTL</title>

</head>
<body>
<h1>lvmlockctl</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">lvmlockctl
&mdash; Control for lvmlockd</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>lvmlockctl</b>
[<i>options</i>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This command
interacts with <b>lvmlockd</b>(8).</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;h</b>|<b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">Show this help information.</p>


<p style="margin-left:11%;"><b>&minus;q</b>|<b>&minus;&minus;quit</b></p>

<p style="margin-left:22%;">Tell lvmlockd to quit.</p>


<p style="margin-left:11%;"><b>&minus;i</b>|<b>&minus;&minus;info</b></p>

<p style="margin-left:22%;">Print lock state information
from lvmlockd.</p>


<p style="margin-left:11%;"><b>&minus;d</b>|<b>&minus;&minus;dump</b></p>

<p style="margin-left:22%;">Print log buffer from
lvmlockd.</p>


<p style="margin-left:11%;"><b>&minus;w</b>|<b>&minus;&minus;wait&nbsp;0</b>|<b>1</b></p>

<p style="margin-left:22%;">Wait option for other
commands.</p>


<p style="margin-left:11%;"><b>&minus;f</b>|<b>&minus;&minus;force&nbsp;0</b>|<b>1</b></p>

<p style="margin-left:22%;">Force option for other
commands.</p>


<p style="margin-left:11%;"><b>&minus;k</b>|<b>&minus;&minus;kill</b>
<i>vgname</i></p>

<p style="margin-left:22%;">Kill access to the VG when
sanlock cannot renew lease.</p>


<p style="margin-left:11%;"><b>&minus;r</b>|<b>&minus;&minus;drop</b>
<i>vgname</i></p>

<p style="margin-left:22%;">Clear locks for the VG when it
is unused after kill (&minus;k).</p>


<p style="margin-left:11%;"><b>&minus;E</b>|<b>&minus;&minus;gl&minus;enable</b>
<i>vgname</i></p>

<p style="margin-left:22%;">Tell lvmlockd to enable the
global lock in a sanlock VG.</p>


<p style="margin-left:11%;"><b>&minus;D</b>|<b>&minus;&minus;gl&minus;disable</b>
<i>vgname</i></p>

<p style="margin-left:22%;">Tell lvmlockd to disable the
global lock in a sanlock VG.</p>


<p style="margin-left:11%;"><b>&minus;S</b>|<b>&minus;&minus;stop&minus;lockspaces</b></p>

<p style="margin-left:22%;">Stop all lockspaces.</p>

<h2>USAGE
<a name="USAGE"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>&minus;&minus;info</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">This collects and displays lock
state from lvmlockd. The display is primitive, incomplete
and will change in future version. To print the raw lock
state from lvmlockd, combine this option with
&minus;&minus;dump|&minus;d.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;dump</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This collects the circular log buffer of debug
statements from lvmlockd and prints it.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;kill</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This is run by sanlock when it loses access to the
storage holding leases for a VG. It runs the command
specified in lvm.conf lvmlockctl_kill_command to deactivate
LVs in the VG. If the specified command is successful, locks
will be dropped for the VG in lvmlockd (the equivalent of
<b>lvmlockctl &minus;&minus;drop</b> will be run.) If no
command is specified, or the command fails, then the user
must intervene to forcefully deactivate LVs in the VG, and
if successful, run <b>lvmlockctl &minus;&minus;drop</b>. For
more, see <b>lvmlockd</b>(8).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;drop</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This should only be run after a VG has been successfully
deactivated following an lvmlockctl &minus;&minus;kill
command. It clears the stale lockspace from lvmlockd. When
lvmlockctl_kill_command is used, the &minus;&minus;kill
command may run drop automatically. For more, see
<b>lvmlockd</b>(8).</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;gl&minus;enable</b></p>

<p style="margin-left:22%;">This enables the global lock in
a sanlock VG. This is necessary if the VG that previously
held the global lock is removed. For more, see
<b>lvmlockd</b>(8).</p>


<p style="margin-left:11%;"><b>&minus;&minus;gl&minus;disable</b></p>

<p style="margin-left:22%;">This disables the global lock
in a sanlock VG. This is necessary if the global lock has
mistakenly been enabled in more than one VG. The global lock
should be disabled in all but one sanlock VG. For more, see
<b>lvmlockd</b>(8).</p>


<p style="margin-left:11%;"><b>&minus;&minus;stop&minus;lockspaces</b></p>

<p style="margin-left:22%;">This tells lvmlockd to stop all
lockspaces. It can be useful to stop lockspaces for VGs that
the <b>vgchange &minus;&minus;lock&minus;stop</b> command
can no longer see, or to stop the dlm global lockspace which
is not directly stopped by the vgchange command. The wait
and force options can be used with this command.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>lvm</b>(8),
<b>lvmlockd</b>(8)</p>
<hr>
</body>
</html>
