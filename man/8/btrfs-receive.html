<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:57:04 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>BTRFS-RECEIVE</title>

</head>
<body>
<h1>btrfs-receive</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">btrfs-receive
&minus; receive subvolumes from send stream</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs
receive</b> [options] &lt;path&gt;</p>

<p style="margin-left:11%; margin-top: 1em">or</p>

<p style="margin-left:11%; margin-top: 1em"><b>btrfs
receive</b> &minus;&minus;dump [options]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Receive a
stream of changes and replicate one or more subvolumes that
were previously generated by <b>btrfs send</b>. The received
subvolumes are stored to <i>path</i>, unless
<i>&minus;&minus;dump</i> option is given.</p>

<p style="margin-left:11%; margin-top: 1em">If
<i>&minus;&minus;dump</i> option is specified, <b>btrfs
receive</b> will only do the validation of the stream, and
print the stream metadata, one operation per line.</p>

<p style="margin-left:11%; margin-top: 1em"><b>btrfs
receive</b> will fail in the following cases:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>1.</p></td>
<td width="1%"></td>
<td width="85%">


<p>receiving subvolume already exists</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>2.</p></td>
<td width="1%"></td>
<td width="85%">


<p>previously received subvolume has been changed after it
was received</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>3.</p></td>
<td width="1%"></td>
<td width="85%">


<p>default subvolume has changed or you didn't mount the
filesystem at the toplevel subvolume</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">A subvolume is
made read&minus;only after the receiving process finishes
successfully (see BUGS below).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Options <br>
&minus;f&nbsp;</b><i>&lt;FILE&gt;</i></p>

<p style="margin-left:22%;">read the stream from
<i>FILE</i> instead of stdin,</p>


<p style="margin-left:11%;"><b>&minus;C|&minus;&minus;chroot</b></p>

<p style="margin-left:22%;">confine the process to
<i>path</i> using <b>chroot(1)</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;e</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>terminate after receiving an <i>end cmd</i> marker in
the stream.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Without this
option the receiver side terminates only in case of an error
on end of file.</p>


<p style="margin-left:11%;"><b>&minus;E|&minus;&minus;max&minus;errors
&lt;NERR&gt;</b></p>

<p style="margin-left:22%;">terminate as soon as NERR
errors occur while stream processing commands from the
stream</p>

<p style="margin-left:22%; margin-top: 1em">Default value
is 1. A value of 0 means no limit.</p>


<p style="margin-left:11%;"><b>&minus;m&nbsp;</b><i>&lt;ROOTMOUNT&gt;</i></p>

<p style="margin-left:22%;">the root mount point of the
destination filesystem</p>

<p style="margin-left:22%; margin-top: 1em">By default the
mount point is searched in <i>/proc/self/mounts</i>. If
<i>/proc</i> is not accessible, e.g. in a chroot
environment, use this option to tell us where this
filesystem is mounted.</p>


<p style="margin-left:11%;"><b>&minus;&minus;force&minus;decompress</b></p>

<p style="margin-left:22%;">if the stream contains
compressed data (see
<i>&minus;&minus;compressed&minus;data</i> in
<i>btrfs&minus;send(8)</i>), always decompress it instead of
writing it with encoded I/O</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;dump</b></p></td>
<td width="2%"></td>
<td width="73%">


<p>dump the stream metadata, one line per operation</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Does not
require the <i>path</i> parameter. The filesystem remains
unchanged.</p>


<p style="margin-left:11%;"><b>&minus;q|&minus;&minus;quiet</b></p>

<p style="margin-left:22%;">(deprecated) alias for global
<i>&minus;q</i> option</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="8%"></td>
<td width="60%">


<p>(deprecated) alias for global <i>&minus;v</i> option</p></td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Global
options <br>
&minus;v|&minus;&minus;verbose</b></p>

<p style="margin-left:22%;">increase verbosity about
performed actions, print details about each operation</p>


<p style="margin-left:11%;"><b>&minus;q|&minus;&minus;quiet</b></p>

<p style="margin-left:22%;">suppress all messages except
errors</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs
receive</b> sets the subvolume read&minus;only after it
completes successfully. However, while the receive is in
progress, users who have write access to files or
directories in the receiving <i>path</i> can add, remove, or
modify files, in which case the resulting read&minus;only
subvolume will not be an exact copy of the sent
subvolume.</p>

<p style="margin-left:11%; margin-top: 1em">If the
intention is to create an exact copy, the receiving
<i>path</i> should be protected from access by users until
the receive operation has completed and the subvolume is set
to read&minus;only.</p>

<p style="margin-left:11%; margin-top: 1em">Additionally,
receive does not currently do a very good job of validating
that an incremental send stream actually makes sense, and it
is thus possible for a specially crafted send stream to
create a subvolume with reflinks to arbitrary files in the
same filesystem. Because of this, users are advised to not
use <i>btrfs receive</i> on send streams from untrusted
sources, and to protect trusted streams when sending them
across untrusted networks.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs
receive</b> returns a zero exit status if it succeeds. Non
zero is returned in case of failure.</p>

<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>btrfs</b> is
part of btrfs&minus;progs. Please refer to the documentation
at <i>https://btrfs.readthedocs.io</i>.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>btrfs&minus;send(8)</i>,
<i>mkfs.btrfs(8)</i></p>
<hr>
</body>
</html>
