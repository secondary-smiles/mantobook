<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:57:05 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DEVLINK&minus;DEV</title>

</head>
<body>
<h1>devlink-dev</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">devlink-dev
&minus; devlink device configuration</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:23%; margin-top: 1em"><b>devlink</b>
[ <i>OPTIONS</i> ] <b>dev</b> { <i>COMMAND</i> | <b>help</b>
}</p>

<p style="margin-left:23%; margin-top: 1em"><i>OPTIONS</i>
:= { <b>&minus;V</b>[<i>ersion</i>] |
<b>&minus;n</b>[<i>no-nice-names</i>] }</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
show</b> [ <i>DEV</i> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
help</b></p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
eswitch set</b> <i>DEV</i> [ <b>mode</b> { <b>legacy</b> |
<b>switchdev</b> } ] [ <b>inline-mode</b> { <b>none</b> |
<b>link</b> | <b>network</b> | <b>transport</b> } ] [
<b>encap-mode</b> { <b>none</b> | <b>basic</b> } ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
eswitch show</b> <i>DEV</i></p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
param set</b> <i>DEV</i> <b>name</b> <i>PARAMETER</i>
<b>value</b> <i>VALUE</i> <b>cmode</b> { <b>runtime</b> |
<b>driverinit</b> | <b>permanent</b> }</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
param show</b> [ <i>DEV</i> <b>name</b> <i>PARAMETER</i>
]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
reload</b> <i>DEV</i> [ <b>netns</b> { <i>PID</i> |
<i>NAME</i> | <i>ID</i> } ] [ <b>action</b> {
<b>driver_reinit</b> | <b>fw_activate</b> } ] [ <b>limit
no_reset</b> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
info</b> [ <i>DEV</i> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
flash</b> <i>DEV</i> <b>file</b> <i>PATH</i> [ <b>target</b>
<i>ID</i> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
selftests show</b> [ <i>DEV</i> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
selftests run</b> <i>DEV</i> [ <b>id</b> <i>ID...</i> ]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
show - display devlink device attributes</b> <i><br>
DEV</i> - specifies the devlink device to show. If this
argument is omitted all devices are listed.</p>

<p style="margin-left:17%; margin-top: 1em">Format is:</p>

<p style="margin-left:20%;">BUS_NAME/BUS_ADDRESS</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
eswitch show - display devlink device eswitch attributes
<br>
devlink dev eswitch set - sets devlink device eswitch
attributes <br>
mode</b> { <b>legacy</b> | <b>switchdev</b> }</p>

<p style="margin-left:22%;">Set eswitch mode</p>

<p style="margin-left:22%; margin-top: 1em"><i>legacy</i> -
Legacy SRIOV</p>


<p style="margin-left:22%; margin-top: 1em"><i>switchdev</i>
- SRIOV switchdev offloads</p>

<p style="margin-left:11%;"><b>inline-mode</b> {
<b>none</b> | <b>link</b> | <b>network</b> |
<b>transport</b> }</p>

<p style="margin-left:22%;">Some HWs need the VF driver to
put part of the packet headers on the TX descriptor so the
e-switch can do proper matching and steering.</p>

<p style="margin-left:22%; margin-top: 1em"><i>none</i> -
None</p>

<p style="margin-left:22%; margin-top: 1em"><i>link</i> -
L2 mode</p>

<p style="margin-left:22%; margin-top: 1em"><i>network</i>
- L3 mode</p>


<p style="margin-left:22%; margin-top: 1em"><i>transport</i>
- L4 mode</p>

<p style="margin-left:11%;"><b>encap-mode</b> { <b>none</b>
| <b>basic</b> }</p>

<p style="margin-left:22%;">Set eswitch encapsulation
support</p>

<p style="margin-left:22%; margin-top: 1em"><i>none</i> -
Disable encapsulation support</p>

<p style="margin-left:22%; margin-top: 1em"><i>basic</i> -
Enable encapsulation support</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
param set - set new value to devlink device configuration
parameter <br>
name</b> <i>PARAMETER</i></p>

<p style="margin-left:22%;">Specify parameter name to
set.</p>

<p style="margin-left:11%;"><b>value</b> <i>VALUE</i></p>

<p style="margin-left:22%;">New value to set.</p>

<p style="margin-left:11%;"><b>cmode</b> { <b>runtime</b> |
<b>driverinit</b> | <b>permanent</b> }</p>

<p style="margin-left:22%;">Configuration mode in which the
new value is set.</p>

<p style="margin-left:22%; margin-top: 1em"><i>runtime</i>
- Set new value while driver is running. This configuration
mode doesn&rsquo;t require any reset to apply the new
value.</p>


<p style="margin-left:22%; margin-top: 1em"><i>driverinit</i>
- Set new value which will be applied during driver
initialization. This configuration mode requires restart
driver by devlink reload command to apply the new value.</p>


<p style="margin-left:22%; margin-top: 1em"><i>permanent</i>
- New value is written to device&rsquo;s non-volatile
memory. This configuration mode requires hard reset to apply
the new value.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
param show - display devlink device supported configuration
parameters attributes <br>
name</b> <i>PARAMETER</i> Specify parameter name to show. If
this argument is omitted all parameters supported by devlink
devices are listed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
reload - perform hot reload of the driver.</b> <i><br>
DEV</i> - Specifies the devlink device to reload.</p>

<p style="margin-left:11%; margin-top: 1em"><b>netns</b> {
<i>PID</i> | <i>NAME</i> | <i>ID</i> } - Specifies the
network namespace to reload into, either by pid, name or
id.</p>

<p style="margin-left:11%; margin-top: 1em"><b>action</b> {
<b>driver_reinit</b> | <b>fw_activate</b> } - Specifies the
reload action required. If this argument is omitted
<i>driver_reinit</i> action will be used. Note that even
though user asks for a specific action, the driver
implementation might require to perform another action
alongside with it. For example, some driver do not support
driver reinitialization being performed without fw
activation. Therefore, the devlink reload command returns
the list of actions which were actrually performed.</p>


<p style="margin-left:11%; margin-top: 1em"><i>driver_reinit</i>
- Driver entities re-initialization, applying devlink-param
and devlink-resource values.</p>


<p style="margin-left:11%; margin-top: 1em"><i>fw_activate</i>
- Activates new firmware if such image is stored and pending
activation. If no limitation specified this action may
involve firmware reset. If no new image pending this action
will reload current firmware image.</p>

<p style="margin-left:11%; margin-top: 1em"><b>limit
no_reset</b> - Specifies limitation on reload action. If
this argument is omitted limit is unspecified and the reload
action is not limited. In such case driver implementation
may include reset or downtime as needed to perform the
actions.</p>


<p style="margin-left:11%; margin-top: 1em"><i>no_reset</i>
- No reset allowed, no down time allowed, no link flap and
no configuration is lost.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
info - display device information.</b> <br>
Display device information provided by the driver. This
command can be used to query versions of the hardware
components or device components which can&rsquo;t be updated
( <i>fixed</i> ) as well as device firmware which can be
updated. For firmware components <i>running</i> displays the
versions of firmware currently loaded into the device, while
<i>stored</i> reports the versions in device&rsquo;s flash.
<i>Running</i> and <i>stored</i> versions may differ after
flash has been updated, but before reboot.</p>

<p style="margin-left:11%; margin-top: 1em"><i>DEV</i> -
specifies the devlink device to show. If this argument is
omitted all devices are listed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
flash - write device&rsquo;s non-volatile memory.</b>
<i><br>
DEV</i> - specifies the devlink device to write to.</p>

<p style="margin-left:11%; margin-top: 1em"><b>file</b>
<i>PATH</i> - Path to the file which will be written into
device&rsquo;s flash. The path needs to be relative to one
of the directories searched by the kernel firmware loader,
such as /lib/firmware.</p>


<p style="margin-left:11%; margin-top: 1em"><b>component</b>
<i>NAME</i> - If device stores multiple firmware images in
non-volatile memory, this parameter may be used to indicate
which firmware image should be written. The value of
<i>NAME</i> should match the component names from <b>devlink
dev info</b> and may be driver-dependent.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
selftests show - shows supported selftests on devlink
device.</b> <i><br>
DEV</i> - specifies the devlink device. If this argument is
omitted all selftests for devlink devices are listed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink dev
selftests run - runs selftests on devlink device.</b>
<i><br>
DEV</i> - specifies the devlink device to execute
selftests.</p>

<p style="margin-left:11%; margin-top: 1em"><b>id</b>
<i>ID...</i> - The value of <i>ID(s)</i> should match the
selftests shown in <b>devlink dev selftests show</b> to
execute selftests on the devlink device. If this argument is
omitted all selftests supported by devlink devices are
executed.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">devlink dev
show</p>

<p style="margin-left:17%;">Shows the state of all devlink
devices on the system.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
show pci/0000:01:00.0</p>

<p style="margin-left:17%;">Shows the state of specified
devlink device.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
eswitch show pci/0000:01:00.0</p>

<p style="margin-left:17%;">Shows the eswitch mode of
specified devlink device.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
eswitch set pci/0000:01:00.0 mode switchdev</p>

<p style="margin-left:17%;">Sets the eswitch mode of
specified devlink device to switchdev.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
param show pci/0000:01:00.0 name max_macs</p>

<p style="margin-left:17%;">Shows the parameter max_macs
attributes.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
param set pci/0000:01:00.0 name internal_error_reset value
true cmode runtime</p>

<p style="margin-left:17%;">Sets the parameter
internal_error_reset of specified devlink device to
true.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
reload pci/0000:01:00.0</p>

<p style="margin-left:17%;">Performs hot reload of
specified devlink device.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
flash pci/0000:01:00.0 file firmware.bin</p>

<p style="margin-left:17%;">Flashes the specified devlink
device with provided firmware file name. If the driver
supports it, user gets updates about the flash status. For
example: <br>
Preparing to flash <br>
Flashing 100% <br>
Flashing done</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
selftests show pci/0000:01:00.0</p>

<p style="margin-left:17%;">Shows the supported selftests
by the devlink device.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
selftests run pci/0000:01:00.0 id flash</p>

<p style="margin-left:17%;">Perform a flash test on the
devlink device.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>devlink</b>(8),
<b>devlink-port</b>(8), <b>devlink-sb</b>(8),
<b>devlink-monitor</b>(8),</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Jiri Pirko
&lt;jiri@mellanox.com&gt;</p>
<hr>
</body>
</html>
