<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:57:06 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>mkfs.xfs</title>

</head>
<body>
<h1>mkfs.xfs</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">mkfs.xfs
&minus; construct an XFS filesystem</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>mkfs.xfs</b>
[ <b>&minus;b</b> <i>block_size_options</i> ] [
<b>&minus;c</b> <i>config_file_options</i> ] [
<b>&minus;m</b> <i>global_metadata_options</i> ] [
<b>&minus;d</b> <i>data_section_options</i> ] [
<b>&minus;f</b> ] [ <b>&minus;i</b> <i>inode_options</i> ] [
<b>&minus;l</b> <i>log_section_options</i> ] [
<b>&minus;n</b> <i>naming_options</i> ] [ <b>&minus;p</b>
<i>protofile_options</i> ] [ <b>&minus;q</b> ] [
<b>&minus;r</b> <i>realtime_section_options</i> ] [
<b>&minus;s</b> <i>sector_size_options</i> ] [
<b>&minus;L</b> <i>label</i> ] [ <b>&minus;N</b> ] [
<b>&minus;K</b> ] <i>device</i> <b><br>
mkfs.xfs &minus;V</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>mkfs.xfs</b>
constructs an XFS filesystem by writing on a special file
using the values found in the arguments of the command line.
It is invoked automatically by <b>mkfs</b>(8) when it is
given the <b>&minus;t xfs</b> option.</p>

<p style="margin-left:11%; margin-top: 1em">In its simplest
(and most commonly used form), the size of the filesystem is
determined from the disk driver. As an example, to make a
filesystem with an internal log on the first partition on
the first SCSI disk, use:</p>

<p style="margin-left:22%; margin-top: 1em"><b>mkfs.xfs
/dev/sda1</b></p>

<p style="margin-left:11%; margin-top: 1em">The metadata
log can be placed on another device to reduce the number of
disk seeks. To create a filesystem on the first partition on
the first SCSI disk with a 100MiB log located on the first
partition on the second SCSI disk, use:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="73%">



<p style="margin-top: 1em"><b>mkfs.xfs&nbsp;&minus;l&nbsp;logdev=/dev/sdb1,size=100m
/dev/sda1</b></p> </td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Each of the
<i>option</i> elements in the argument list above can be
given as multiple comma-separated suboptions if multiple
suboptions apply to the same option. Equivalently, each main
option can be given multiple times with different
suboptions. For example, <b>&minus;l internal,size=100m</b>
and <b>&minus;l internal &minus;l size=100m</b> are
equivalent.</p>

<p style="margin-left:11%; margin-top: 1em">In the
descriptions below, sizes are given in sectors, bytes,
blocks, kilobytes, megabytes, gigabytes, etc. Sizes are
treated as hexadecimal if prefixed by 0x or 0X, octal if
prefixed by 0, or decimal otherwise. The following lists
possible multiplication suffixes:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p><b>s&nbsp;</b>&minus;&nbsp;multiply by sector size
(default = 512, see <b>&minus;s</b> option below).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p><b>b&nbsp;</b>&minus;&nbsp;multiply by filesystem block
size (default = 4K, see <b>&minus;b</b> option below).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p><b>k&nbsp;</b>&minus;&nbsp;multiply by one kilobyte
(1,024 bytes).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p><b>m&nbsp;</b>&minus;&nbsp;multiply by one megabyte
(1,048,576 bytes).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p><b>g&nbsp;</b>&minus;&nbsp;multiply by one gigabyte
(1,073,741,824 bytes).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p><b>t&nbsp;</b>&minus;&nbsp;multiply by one terabyte
(1,099,511,627,776 bytes).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p><b>p&nbsp;</b>&minus;&nbsp;multiply by one petabyte
(1,024 terabytes).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="78%">


<p><b>e&nbsp;</b>&minus;&nbsp;multiply by one exabyte
(1,048,576 terabytes).</p></td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<p>When specifying parameters in units of sectors or
filesystem blocks, the <b>&minus;s</b></p><td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">option or the <b>&minus;b</b>
option may be used to specify the size of the sector or
block. If the size of the block or sector is not specified,
the default sizes (block: 4KiB, sector: 512B) will be
used.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Many feature
options allow an optional argument of 0 or 1, to explicitly
disable or enable the functionality.</p>

<p style="margin-left:11%; margin-top: 1em">The correctness
of the crc32c checksum implementation will be tested before
formatting the filesystem. If the test fails, the format
will abort.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Options may be
specified either on the command line or in a configuration
file. Not all command line options can be specified in
configuration files; only the command line options followed
by a <b>[section]</b> label can be used in a configuration
file.</p>

<p style="margin-left:11%; margin-top: 1em">Options that
can be used in configuration files are grouped into related
sections containing multiple options. The command line
options and configuration files use the same option sections
and grouping. Configuration file section names are listed in
the command line option sections below. Option names and
values are the same for both command line and configuration
file specification.</p>

<p style="margin-left:11%; margin-top: 1em">Options
specified are the combined set of command line parameters
and configuration file parameters. Duplicated options will
result in a respecification error, regardless of the
location they were specified at. <b><br>
&minus;c</b> <i>configuration_file_option</i></p>

<p style="margin-left:22%;">This option specifies the files
that mkfs configuration will be obtained from. The valid
<i>configuration_file_option</i> is:</p>

<p style="margin-left:29%;"><b>options=</b><i>name</i></p>

<p style="margin-left:40%;">The configuration options will
be sourced from the file specified by the <i>name</i> option
string. This option can be use either an absolute or
relative path to the configuration file to be read. Sample
configuration files can be found in
/usr/share/xfsprogs/mkfs.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;b</b>
<i>block_size_options</i> <b><br>
Section Name:</b> <i>[block]</i></p>

<p style="margin-left:22%;">This option specifies the
fundamental block size of the filesystem. The valid
<i>block_size_option</i> is:</p>

<p style="margin-left:29%;"><b>size=</b><i>value</i></p>

<p style="margin-left:40%;">The filesystem block size is
specified with a <i>value</i> in bytes. The default value is
4096 bytes (4 KiB), the minimum is 512, and the maximum is
65536 (64 KiB).</p>

<p style="margin-left:40%; margin-top: 1em">Although
<b>mkfs.xfs</b> will accept any of these values and create a
valid filesystem, XFS on Linux can only mount filesystems
with pagesize or smaller blocks.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;m</b>
<i>global_metadata_options</i> <b><br>
Section Name:</b> <i>[metadata]</i></p>

<p style="margin-left:22%;">These options specify metadata
format options that either apply to the entire filesystem or
aren&rsquo;t easily characterised by a specific
functionality group. The valid
<i>global_metadata_options</i> are:</p>


<p style="margin-left:29%;"><b>bigtime=</b><i>value</i></p>

<p style="margin-left:40%;">This option enables filesystems
that can handle inode timestamps from December 1901 to July
2486, and quota timer expirations from January 1970 to July
2486. The value is either 0 to disable the feature, or 1 to
enable large timestamps.</p>

<p style="margin-left:40%; margin-top: 1em">If this feature
is not enabled, the filesystem can only handle timestamps
from December 1901 to January 2038, and quota timers from
January 1970 to February 2106.</p>

<p style="margin-left:40%; margin-top: 1em">By default,
<b>mkfs.xfs</b> will enable this feature. If the option
<b>&minus;m crc=0</b> is used, the large timestamp feature
is not supported and is disabled.</p>

<p style="margin-left:29%;"><b>crc=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to create a
filesystem which maintains and checks CRC information in all
metadata objects on disk. The value is either 0 to disable
the feature, or 1 to enable the use of CRCs.</p>

<p style="margin-left:40%; margin-top: 1em">CRCs enable
enhanced error detection due to hardware issues, whilst the
format changes also improves crash recovery algorithms and
the ability of various tools to validate and repair metadata
corruptions when they are found. The CRC algorithm used is
CRC32c, so the overhead is dependent on CPU architecture as
some CPUs have hardware acceleration of this algorithm.
Typically the overhead of calculating and checking the CRCs
is not noticeable in normal operation.</p>

<p style="margin-left:40%; margin-top: 1em">By default,
<b>mkfs.xfs</b> will enable metadata CRCs.</p>

<p style="margin-left:40%; margin-top: 1em">Formatting a
filesystem without CRCs selects the V4 format, which is
deprecated and will be removed from upstream in September
2030. Distributors may choose to withdraw support for the V4
format earlier than this date. Several other options, noted
below, are only tunable on V4 formats, and will be removed
along with the V4 format itself.</p>

<p style="margin-left:29%;"><b>finobt=</b><i>value</i></p>

<p style="margin-left:40%;">This option enables the use of
a separate free inode btree index in each allocation group.
The value is either 0 to disable the feature, or 1 to create
a free inode btree in each allocation group.</p>

<p style="margin-left:40%; margin-top: 1em">The free inode
btree mirrors the existing allocated inode btree index which
indexes both used and free inodes. The free inode btree does
not index used inodes, allowing faster, more consistent
inode allocation performance as filesystems age.</p>

<p style="margin-left:40%; margin-top: 1em">By default,
<b>mkfs.xfs</b> will create free inode btrees for
filesystems created with the (default) <b>&minus;m crc=1</b>
option set. When the option <b>&minus;m crc=0</b> is used,
the free inode btree feature is not supported and is
disabled.</p>


<p style="margin-left:29%;"><b>inobtcount=</b><i>value</i></p>

<p style="margin-left:40%;">This option causes the
filesystem to record the number of blocks used by the inode
btree and the free inode btree. This can be used to reduce
mount times when the free inode btree is enabled.</p>

<p style="margin-left:40%; margin-top: 1em">By default,
<b>mkfs.xfs</b> will enable this option. This feature is
only available for filesystems created with the (default)
<b>&minus;m finobt=1</b> option set. When the option
<b>&minus;m finobt=0</b> is used, the inode btree counter
feature is not supported and is disabled.</p>

<p style="margin-left:29%;"><b>uuid=</b><i>value</i></p>

<p style="margin-left:40%;">Use the given value as the
filesystem UUID for the newly created filesystem. The
default is to generate a random UUID.</p>

<p style="margin-left:29%;"><b>rmapbt=</b><i>value</i></p>

<p style="margin-left:40%;">This option enables the
creation of a reverse-mapping btree index in each allocation
group. The value is either 0 to disable the feature, or 1 to
create the btree.</p>

<p style="margin-left:40%; margin-top: 1em">The reverse
mapping btree maps filesystem blocks to the owner of the
filesystem block. Most of the mappings will be to an inode
number and an offset, though there will also be mappings to
filesystem metadata. This secondary metadata can be used to
validate the primary metadata or to pinpoint exactly which
data has been lost when a disk error occurs.</p>

<p style="margin-left:40%; margin-top: 1em">By default,
<b>mkfs.xfs</b> will not create reverse mapping btrees. This
feature is only available for filesystems created with the
(default) <b>&minus;m crc=1</b> option set. When the option
<b>&minus;m crc=0</b> is used, the reverse mapping btree
feature is not supported and is disabled.</p>


<p style="margin-left:29%;"><b>reflink=</b><i>value</i></p>

<p style="margin-left:40%;">This option enables the use of
a separate reference count btree index in each allocation
group. The value is either 0 to disable the feature, or 1 to
create a reference count btree in each allocation group.</p>

<p style="margin-left:40%; margin-top: 1em">The reference
count btree enables the sharing of physical extents between
the data forks of different files, which is commonly known
as &quot;reflink&quot;. Unlike traditional Unix filesystems
which assume that every inode and logical block pair map to
a unique physical block, a reflink-capable XFS filesystem
removes the uniqueness requirement, allowing up to four
billion arbitrary inode/logical block pairs to map to a
physical block. If a program tries to write to a
multiply-referenced block in a file, the write will be
redirected to a new block, and that file&rsquo;s
logical-to-physical mapping will be changed to the new block
(&quot;copy on write&quot;). This feature enables the
creation of per-file snapshots and deduplication. It is only
available for the data forks of regular files.</p>

<p style="margin-left:40%; margin-top: 1em">By default,
<b>mkfs.xfs</b> will create reference count btrees and
therefore will enable the reflink feature. This feature is
only available for filesystems created with the (default)
<b>&minus;m crc=1</b> option set. When the option
<b>&minus;m crc=0</b> is used, the reference count btree
feature is not supported and reflink is disabled.</p>

<p style="margin-left:40%; margin-top: 1em">Note: the
filesystem DAX mount option ( <b>&minus;o dax</b> ) is
incompatible with reflink-enabled XFS filesystems. To use
filesystem DAX with XFS, specify the <b>&minus;m
reflink=0</b> option to mkfs.xfs to disable the reflink
feature.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;d</b>
<i>data_section_options</i> <b><br>
Section Name:</b> <i>[data]</i></p>

<p style="margin-left:22%;">These options specify the
location, size, and other parameters of the data section of
the filesystem. The valid <i>data_section_options</i>
are:</p>


<p style="margin-left:29%;"><b>agcount=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the
number of allocation groups. The data section of the
filesystem is divided into allocation groups to improve the
performance of XFS. More allocation groups imply that more
parallelism can be achieved when allocating blocks and
inodes. The minimum allocation group size is 16 MiB; the
maximum size is just under 1 TiB. The data section of the
filesystem is divided into <i>value</i> allocation groups
(default value is scaled automatically based on the
underlying device size).</p>

<p style="margin-left:29%;"><b>agsize=</b><i>value</i></p>

<p style="margin-left:40%;">This is an alternative to using
the <b>agcount</b> suboption. The <i>value</i> is the
desired size of the allocation group expressed in bytes
(usually using the <b>m</b> or <b>g</b> suffixes). This
value must be a multiple of the filesystem block size, and
must be at least 16MiB, and no more than 1TiB, and may be
automatically adjusted to properly align with the stripe
geometry. The <b>agcount</b> and <b>agsize</b> suboptions
are mutually exclusive.</p>


<p style="margin-left:29%;"><b>cowextsize=</b><i>value</i></p>

<p style="margin-left:40%;">Set the copy-on-write extent
size hint on all inodes created by <b>mkfs.xfs</b>. The
value must be provided in units of filesystem blocks. If the
value is zero, the default value (currently 32 blocks) will
be used. Directories will pass on this hint to newly created
regular files and directories.</p>

<p style="margin-left:29%;"><b>name=</b><i>value</i></p>

<p style="margin-left:40%;">This can be used to specify the
name of the special file containing the filesystem. In this
case, the log section must be specified as <b>internal</b>
(with a size, see the <b>&minus;l</b> option below) and
there can be no real-time section.</p>


<p style="margin-left:29%;"><b>file[=</b><i>value</i><b>]</b></p>

<p style="margin-left:40%;">This is used to specify that
the file given by the <b>name</b> suboption is a regular
file. The <i>value</i> is either 0 or 1, with 1 signifying
that the file is regular. This suboption is used only to
make a filesystem image. If the <i>value</i> is omitted then
1 is assumed.</p>

<p style="margin-left:29%;"><b>size=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the
size of the data section. This suboption is required if
<b>&minus;d file[=1]</b> is given. Otherwise, it is only
needed if the filesystem should occupy less space than the
size of the special file.</p>

<p style="margin-left:40%; margin-top: 1em">The data
section must be at least 300MB in size.</p>

<p style="margin-left:29%;"><b>sunit=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the
stripe unit for a RAID device or a logical volume. The
<i>value</i> has to be specified in 512-byte block units.
Use the <b>su</b> suboption to specify the stripe unit size
in bytes. This suboption ensures that data allocations will
be stripe unit aligned when the current end of file is being
extended and the file size is larger than 512KiB. Also inode
allocations and the internal log will be stripe unit
aligned.</p>

<p style="margin-left:29%;"><b>su=</b><i>value</i></p>

<p style="margin-left:40%;">This is an alternative to using
<b>sunit.</b> The <b>su</b> suboption is used to specify the
stripe unit for a RAID device or a striped logical volume.
The <i>value</i> has to be specified in bytes, (usually
using the <b>m</b> or <b>g</b> suffixes). This <i>value</i>
must be a multiple of the filesystem block size.</p>

<p style="margin-left:29%;"><b>swidth=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the
stripe width for a RAID device or a striped logical volume.
The <i>value</i> has to be specified in 512-byte block
units. Use the <b>sw</b> suboption to specify the stripe
width size in bytes. This suboption is required if
<b>&minus;d sunit</b> has been specified and it has to be a
multiple of the <b>&minus;d sunit</b> suboption.</p>

<p style="margin-left:29%;"><b>sw=</b><i>value</i></p>

<p style="margin-left:40%;">suboption is an alternative to
using <b>swidth.</b> The <b>sw</b> suboption is used to
specify the stripe width for a RAID device or striped
logical volume. The <i>value</i> is expressed as a
multiplier of the stripe unit, usually the same as the
number of stripe members in the logical volume
configuration, or data disks in a RAID device.</p>

<p style="margin-left:40%; margin-top: 1em">When a
filesystem is created on a block device, <b>mkfs.xfs</b>
will automatically query the block device for appropriate
<b>sunit</b> and <b>swidth</b> values if the block device
and the filesystem size would be larger than 1GB.</p>

<p style="margin-left:29%;"><b>noalign</b></p>

<p style="margin-left:40%;">This option disables automatic
geometry detection and creates the filesystem without stripe
geometry alignment even if the underlying storage device
provides this information.</p>


<p style="margin-left:29%;"><b>rtinherit=</b><i>value</i></p>

<p style="margin-left:40%;">If <i>value</i> is set to 1,
all inodes created by <b>mkfs.xfs</b> will be created with
the realtime flag set. The default is 0. Directories will
pass on this flag to newly created regular files and
directories.</p>


<p style="margin-left:29%;"><b>projinherit=</b><i>value</i></p>

<p style="margin-left:40%;">All inodes created by
<b>mkfs.xfs</b> will be assigned the project quota id
provided in <i>value.</i> Directories will pass on the
project id to newly created regular files and
directories.</p>


<p style="margin-left:29%;"><b>extszinherit=</b><i>value</i></p>

<p style="margin-left:40%;">All inodes created by
<b>mkfs.xfs</b> will have this <i>value</i> extent size hint
applied. The value must be provided in units of filesystem
blocks. Directories will pass on this hint to newly created
regular files and directories.</p>


<p style="margin-left:29%;"><b>daxinherit=</b><i>value</i></p>

<p style="margin-left:40%;">If <i>value</i> is set to 1,
all inodes created by <b>mkfs.xfs</b> will be created with
the DAX flag set. The default is 0. Directories will pass on
this flag to newly created regular files and directories. By
default, <b>mkfs.xfs</b> will not enable DAX mode.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;f</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Force overwrite when an existing filesystem is detected
on the device. By default, <b>mkfs.xfs</b> will not write to
the device if it suspects that there is a filesystem or
partition table on the device already.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;i</b>
<i>inode_options</i> <b><br>
Section Name:</b> <i>[inode]</i></p>

<p style="margin-left:22%;">This option specifies the inode
size of the filesystem, and other inode allocation
parameters. The XFS inode contains a fixed-size part and a
variable-size part. The variable-size part, whose size is
affected by this option, can contain: directory data, for
small directories; attribute data, for small attribute sets;
symbolic link data, for small symbolic links; the extent
list for the file, for files with a small number of extents;
and the root of a tree describing the location of extents
for the file, for files with a large number of extents.</p>

<p style="margin-left:22%; margin-top: 1em">The valid
<i>inode_options</i> are:</p>

<p style="margin-left:29%;"><b>size=</b><i>value</i> <b>|
perblock=</b><i>value</i></p>

<p style="margin-left:40%;">The inode size is specified
either as a <i>value</i> in bytes with <b>size=</b> or as
the number fitting in a filesystem block with
<b>perblock=</b>. The minimum (and default) <i>value</i> is
256 bytes without crc, 512 bytes with crc enabled. The
maximum <i>value</i> is 2048 (2 KiB) subject to the
restriction that the inode size cannot exceed one half of
the filesystem block size.</p>

<p style="margin-left:40%; margin-top: 1em">XFS uses 64-bit
inode numbers internally; however, the number of significant
bits in an inode number is affected by filesystem geometry.
In practice, filesystem size and inode size are the
predominant factors. The Linux kernel (on 32 bit hardware
platforms) and most applications cannot currently handle
inode numbers greater than 32 significant bits, so if no
inode size is given on the command line, <b>mkfs.xfs</b>
will attempt to choose a size such that inode numbers will
be &lt; 32 bits. If an inode size is specified, or if a
filesystem is sufficiently large, <b>mkfs.xfs</b> will warn
if this will create inode numbers &gt; 32 significant
bits.</p>

<p style="margin-left:29%;"><b>maxpct=</b><i>value</i></p>

<p style="margin-left:40%;">This specifies the maximum
percentage of space in the filesystem that can be allocated
to inodes. The default <i>value</i> is 25% for filesystems
under 1TB, 5% for filesystems under 50TB and 1% for
filesystems over 50TB.</p>

<p style="margin-left:40%; margin-top: 1em">Setting the
value to 0 means that essentially all of the filesystem can
become inode blocks (subject to possible <b>inode32</b>
mount option restrictions, see <b>xfs</b>(5) for
details.)</p>

<p style="margin-left:40%; margin-top: 1em">This value can
be modified with <b>xfs_growfs</b>(8).</p>


<p style="margin-left:29%;"><b>align[=</b><i>value</i><b>]</b></p>

<p style="margin-left:40%;">This is used to specify that
inode allocation is or is not aligned. The <i>value</i> is
either 0 or 1, with 1 signifying that inodes are allocated
aligned. If the <i>value</i> is omitted, 1 is assumed. The
default is that inodes are aligned. Aligned inode access is
normally more efficient than unaligned access; alignment
must be established at the time the filesystem is created,
since inodes are allocated at that time. This option can be
used to turn off inode alignment when the filesystem needs
to be mountable by a version of IRIX that does not have the
inode alignment feature (any release of IRIX before 6.2, and
IRIX 6.2 without XFS patches).</p>

<p style="margin-left:40%; margin-top: 1em">This option is
only tunable on the deprecated V4 format.</p>

<p style="margin-left:29%;"><b>attr=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the
version of extended attribute inline allocation policy to be
used. By default, this is 2, which uses an efficient
algorithm for managing the available inline inode space
between attribute and extent data.</p>

<p style="margin-left:40%; margin-top: 1em">The previous
version 1, which has fixed regions for attribute and extent
data, is kept for backwards compatibility with kernels older
than version 2.6.16.</p>

<p style="margin-left:40%; margin-top: 1em">This option is
only tunable on the deprecated V4 format.</p>


<p style="margin-left:29%;"><b>projid32bit[=</b><i>value</i><b>]</b></p>

<p style="margin-left:40%;">This is used to enable 32bit
quota project identifiers. The <i>value</i> is either 0 or
1, with 1 signifying that 32bit projid are to be enabled. If
the value is omitted, 1 is assumed. (This default changed in
release version 3.2.0.)</p>

<p style="margin-left:40%; margin-top: 1em">This option is
only tunable on the deprecated V4 format.</p>


<p style="margin-left:29%;"><b>sparse[=</b><i>value</i><b>]</b></p>

<p style="margin-left:40%;">Enable sparse inode chunk
allocation. The <i>value</i> is either 0 or 1, with 1
signifying that sparse allocation is enabled. If the value
is omitted, 1 is assumed. Sparse inode allocation is
disabled by default. This feature is only available for
filesystems formatted with <b>&minus;m crc=1.</b></p>

<p style="margin-left:40%; margin-top: 1em">When enabled,
sparse inode allocation allows the filesystem to allocate
smaller than the standard 64-inode chunk when free space is
severely limited. This feature is useful for filesystems
that might fragment free space over time such that no free
extents are large enough to accommodate a chunk of 64
inodes. Without this feature enabled, inode allocations can
fail with out of space errors under severe fragmented free
space conditions.</p>


<p style="margin-left:29%;"><b>nrext64[=</b><i>value]</i></p>

<p style="margin-left:40%;">Extend maximum values of inode
data and attr fork extent counters from 2^31 - 1 and 2^15 -
1 to 2^48 - 1 and 2^32 - 1 respectively. If the value is
omitted, 1 is assumed. This feature is disabled by default.
This feature is only available for filesystems formatted
with -m crc=1.</p>


<p style="margin-left:22%; margin-top: 1em"><b>&minus;l</b>
<i>log_section_options</i></p>

<p style="margin-left:11%;"><b>Section Name:</b>
<i>[log]</i></p>

<p style="margin-left:22%;">These options specify the
location, size, and other parameters of the log section of
the filesystem. The valid <i>log_section_options</i>
are:</p>

<p style="margin-left:29%;"><b>agnum=</b><i>value</i></p>

<p style="margin-left:40%;">If the log is internal,
allocate it in this AG.</p>


<p style="margin-left:29%;"><b>internal[=</b><i>value</i><b>]</b></p>

<p style="margin-left:40%;">This is used to specify that
the log section is a piece of the data section instead of
being another device or logical volume. The <i>value</i> is
either 0 or 1, with 1 signifying that the log is internal.
If the <i>value</i> is omitted, 1 is assumed.</p>


<p style="margin-left:29%;"><b>logdev=</b><i>device</i></p>

<p style="margin-left:40%;">This is used to specify that
the log section should reside on the <i>device</i> separate
from the data section. The <b>internal=1</b> and
<b>logdev</b> options are mutually exclusive.</p>

<p style="margin-left:29%;"><b>size=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the
size of the log section.</p>

<p style="margin-left:40%; margin-top: 1em">If the log is
contained within the data section and <b>size</b>
isn&rsquo;t specified, <b>mkfs.xfs</b> will try to select a
suitable log size depending on the size of the filesystem.
The actual logsize depends on the filesystem block size and
the directory block size.</p>

<p style="margin-left:40%; margin-top: 1em">Otherwise, the
<b>size</b> suboption is only needed if the log section of
the filesystem should occupy less space than the size of the
special file. The <i>value</i> is specified in bytes or
blocks, with a <b>b</b> suffix meaning multiplication by the
filesystem block size, as described above. The overriding
minimum value for size is 512 blocks. With some combinations
of filesystem block size, inode size, and directory block
size, the minimum log size is larger than 512 blocks.</p>

<p style="margin-left:40%; margin-top: 1em">The log must be
at least 64MB in size. The log cannot be more than 2GB in
size.</p>


<p style="margin-left:29%;"><b>version=</b><i>value</i></p>

<p style="margin-left:40%;">This specifies the version of
the log. The current default is 2, which allows for larger
log buffer sizes, as well as supporting stripe-aligned log
writes (see the sunit and su options, below).</p>

<p style="margin-left:40%; margin-top: 1em">The previous
version 1, which is limited to 32k log buffers and does not
support stripe-aligned writes, is kept for backwards
compatibility with very old 2.4 kernels.</p>

<p style="margin-left:40%; margin-top: 1em">This option is
only tunable on the deprecated V4 format.</p>

<p style="margin-left:29%;"><b>sunit=</b><i>value</i></p>

<p style="margin-left:40%;">This specifies the alignment to
be used for log writes. The <i>value</i> has to be specified
in 512-byte block units. Use the <b>su</b> suboption to
specify the log stripe unit size in bytes. Log writes will
be aligned on this boundary, and rounded up to this
boundary. This gives major improvements in performance on
some configurations such as software RAID5 when the
<b>sunit</b> is specified as the filesystem block size. The
equivalent byte value must be a multiple of the filesystem
block size. Version 2 logs are automatically selected if the
log <b>sunit</b> suboption is specified.</p>

<p style="margin-left:40%; margin-top: 1em">The <b>su</b>
suboption is an alternative to using <b>sunit.</b></p>

<p style="margin-left:29%;"><b>su=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the log
stripe. The <i>value</i> has to be specified in bytes,
(usually using the <b>s</b> or <b>b</b> suffixes). This
value must be a multiple of the filesystem block size.
Version 2 logs are automatically selected if the log
<b>su</b> suboption is specified.</p>


<p style="margin-left:29%;"><b>lazy-count=</b><i>value</i></p>

<p style="margin-left:40%;">This changes the method of
logging various persistent counters in the superblock. Under
metadata intensive workloads, these counters are updated and
logged frequently enough that the superblock updates become
a serialization point in the filesystem. The <i>value</i>
can be either 0 or 1.</p>

<p style="margin-left:40%; margin-top: 1em">With
<b>lazy-count=1</b>, the superblock is not modified or
logged on every change of the persistent counters. Instead,
enough information is kept in other parts of the filesystem
to be able to maintain the persistent counter values without
needed to keep them in the superblock. This gives
significant improvements in performance on some
configurations. The default <i>value</i> is 1 (on) so you
must specify <b>lazy-count=0</b> if you want to disable this
feature for older kernels which don&rsquo;t support it.</p>

<p style="margin-left:40%; margin-top: 1em">This option is
only tunable on the deprecated V4 format.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;n</b>
<i>naming_options</i> <b><br>
Section Name:</b> <i>[naming]</i></p>

<p style="margin-left:22%;">These options specify the
version and size parameters for the naming (directory) area
of the filesystem. The valid <i>naming_options</i> are:</p>

<p style="margin-left:29%;"><b>size=</b><i>value</i></p>

<p style="margin-left:40%;">The directory block size is
specified with a <i>value</i> in bytes. The block size must
be a power of 2 and cannot be less than the filesystem block
size. The default size <i>value</i> for version 2
directories is 4096 bytes (4 KiB), unless the filesystem
block size is larger than 4096, in which case the default
<i>value</i> is the filesystem block size. For version 1
directories the block size is the same as the filesystem
block size.</p>


<p style="margin-left:29%;"><b>version=</b><i>value</i></p>

<p style="margin-left:40%;">The naming (directory) version
<i>value</i> can be either 2 or &rsquo;ci&rsquo;, defaulting
to 2 if unspecified. With version 2 directories, the
directory block size can be any power of 2 size from the
filesystem block size up to 65536.</p>

<p style="margin-left:40%; margin-top: 1em">The
<b>version=ci</b> option enables ASCII only case-insensitive
filename lookup and version 2 directories. Filenames are
case-preserving, that is, the names are stored in
directories using the case they were created with.</p>

<p style="margin-left:40%; margin-top: 1em">Note: Version 1
directories are not supported.</p>

<p style="margin-left:29%;"><b>ftype=</b><i>value</i></p>

<p style="margin-left:40%;">This feature allows the inode
type to be stored in the directory structure so that the
<b>readdir</b>(3) and <b>getdents</b>(2) do not need to look
up the inode to determine the inode type.</p>

<p style="margin-left:40%; margin-top: 1em">The
<i>value</i> is either 0 or 1, with 1 signifying that
filetype information will be stored in the directory
structure. The default value is 1.</p>

<p style="margin-left:40%; margin-top: 1em">When CRCs are
enabled (the default), the ftype functionality is always
enabled, and cannot be turned off.</p>

<p style="margin-left:40%; margin-top: 1em">In other words,
this option is only tunable on the deprecated V4 format.</p>

<p style="margin-left:11%;"><b>&minus;p</b>
<i>protofile_options</i> <b><br>
Section Name:</b> <i>[proto]</i></p>

<p style="margin-left:22%;">These options specify the
protofile parameters for populating the filesystem. The
valid <i>protofile_options</i> are:</p>


<p style="margin-left:29%;"><b>[file=]</b><i>protofile</i></p>

<p style="margin-left:40%;">The <b>file=</b> prefix is not
required for this CLI argument for legacy reasons. If
specified as a config file directive, the prefix is
required.</p>

<p style="margin-left:40%; margin-top: 1em">If the optional
<i>protofile</i> argument is given, <b>mkfs.xfs</b> uses
<i>protofile</i> as a prototype file and takes its
directions from that file. The blocks and inodes specifiers
in the <i>protofile</i> are provided for backwards
compatibility, but are otherwise unused. The syntax of the
protofile is defined by a number of tokens separated by
spaces or newlines. Note that the line numbers are not part
of the syntax but are meant to help you in the following
discussion of the file contents.</p>

<p style="margin-left:48%; margin-top: 1em"><tt><b>1
/stand/</b></tt><i>diskboot</i></p>

<pre style="margin-left:48%;"><b>2       4872 110
3       d&minus;&minus;777 3 1
4       usr     d&minus;&minus;777 3 1
5       sh      &minus;&minus;&minus;755 3 1 /bin/sh
6       ken     d&minus;&minus;755 6 1
7               $
8       b0      b&minus;&minus;644 3 1 0 0
9       c0      c&minus;&minus;644 3 1 0 0
10      fifo    p&minus;&minus;644 3 1
11      slink   l&minus;&minus;644 3 1 /a/symbolic/link
12      :  This is a comment line
13      $
14      $</b></pre>


<p style="margin-left:40%; margin-top: 1em">Line 1 is a
dummy string. (It was formerly the bootfilename.) It is
present for backward compatibility; boot blocks are not used
on SGI systems.</p>

<p style="margin-left:40%; margin-top: 1em">Note that some
string of characters must be present as the first line of
the proto file to cause it to be parsed correctly; the value
of this string is immaterial since it is ignored.</p>

<p style="margin-left:40%; margin-top: 1em">Line 2 contains
two numeric values (formerly the numbers of blocks and
inodes). These are also merely for backward compatibility:
two numeric values must appear at this point for the proto
file to be correctly parsed, but their values are immaterial
since they are ignored.</p>

<p style="margin-left:40%; margin-top: 1em">The lines 3
through 11 specify the files and directories you want to
include in this filesystem. Line 3 defines the root
directory. Other directories and files that you want in the
filesystem are indicated by lines 4 through 6 and lines 8
through 10. Line 11 contains symbolic link syntax.</p>

<p style="margin-left:40%; margin-top: 1em">Notice the
dollar sign (<b>$</b>) syntax on line 7. This syntax directs
the <b>mkfs.xfs</b> command to terminate the branch of the
filesystem it is currently on and then continue from the
directory specified by the next line, in this case line 8.
It must be the last character on a line. The colon on line
12 introduces a comment; all characters up until the
following newline are ignored. Note that this means you
cannot have a file in a prototype file whose name contains a
colon. The <b>$</b> on lines 13 and 14 end the process,
since no additional specifications follow.</p>

<p style="margin-left:40%; margin-top: 1em">File
specifications provide the following:</p>

<p style="margin-left:40%; margin-top: 1em">* file mode
<br>
* user ID <br>
* group ID <br>
* the file&rsquo;s beginning contents</p>

<p style="margin-left:40%; margin-top: 1em">A 6-character
string defines the mode for a file. The first character of
this string defines the file type. The character range for
this first character is <b>&minus;bcdpl.</b> A file may be a
regular file, a block special file, a character special
file, directory files, named pipes (first-in, first out
files), and symbolic links. The second character of the mode
string is used to specify setuserID mode, in which case it
is <b>u</b>. If setuserID mode is not specified, the second
character is <b>&minus;</b>. The third character of the mode
string is used to specify the setgroupID mode, in which case
it is <b>g</b>. If setgroupID mode is not specified, the
third character is <b>&minus;</b>. The remaining characters
of the mode string are a three digit octal number. This
octal number defines the owner, group, and other read,
write, and execute permissions for the file, respectively.
For more information on file permissions, see the
<b>chmod</b>(1) command.</p>

<p style="margin-left:40%; margin-top: 1em">Following the
mode character string are two decimal number tokens that
specify the user and group IDs of the file&rsquo;s
owner.</p>

<p style="margin-left:40%; margin-top: 1em">In a regular
file, the next token specifies the pathname from which the
contents and size of the file are copied. In a block or
character special file, the next token are two decimal
numbers that specify the major and minor device numbers.
When a file is a symbolic link, the next token specifies the
contents of the link.</p>

<p style="margin-left:40%; margin-top: 1em">When the file
is a directory, the <b>mkfs.xfs</b> command creates the
entries <b>dot</b> (.) and <b>dot-dot</b> (..) and then
reads the list of names and file specifications in a
recursive manner for all of the entries in the directory. A
scan of the protofile is always terminated with the dollar (
<b>$</b> ) token.</p>


<p style="margin-left:29%;"><b>slashes_are_spaces=</b><i>value</i></p>

<p style="margin-left:40%;">If set to 1, slashes
(&quot;/&quot;) in the first token of each line of the
protofile are converted to spaces. This enables the creation
of a filesystem containing filenames with spaces. By
default, this is set to 0.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;q</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Quiet option. Normally <b>mkfs.xfs</b> prints the
parameters of the filesystem to be constructed; the
<b>&minus;q</b> flag suppresses this.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;r</b>
<i>realtime_section_options</i> <b><br>
Section Name:</b> <i>[realtime]</i></p>

<p style="margin-left:22%;">These options specify the
location, size, and other parameters of the real-time
section of the filesystem. The valid
<i>realtime_section_options</i> are:</p>

<p style="margin-left:29%;"><b>rtdev=</b><i>device</i></p>

<p style="margin-left:40%;">This is used to specify the
<i>device</i> which should contain the real-time section of
the filesystem. The suboption value is the name of a block
device.</p>


<p style="margin-left:29%;"><b>extsize=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the
size of the blocks in the real-time section of the
filesystem. This <i>value</i> must be a multiple of the
filesystem block size. The minimum allowed size is the
filesystem block size or 4 KiB (whichever is larger); the
default size is the stripe width for striped volumes or 64
KiB for non-striped volumes; the maximum allowed size is 1
GiB. The real-time extent size should be carefully chosen to
match the parameters of the physical media used.</p>

<p style="margin-left:29%;"><b>size=</b><i>value</i></p>

<p style="margin-left:40%;">This is used to specify the
size of the real-time section. This suboption is only needed
if the real-time section of the filesystem should occupy
less space than the size of the partition or logical volume
containing the section.</p>

<p style="margin-left:29%;"><b>noalign</b></p>

<p style="margin-left:40%;">This option disables stripe
size detection, enforcing a realtime device with no stripe
geometry.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;s</b>
<i>sector_size_options</i> <b><br>
Section Name:</b> <i>[sector]</i></p>

<p style="margin-left:22%;">This option specifies the
fundamental sector size of the filesystem. The valid
<i>sector_size_option</i> is:</p>

<p style="margin-left:29%;"><b>size=</b><i>value</i></p>

<p style="margin-left:40%;">The sector size is specified
with a <i>value</i> in bytes. The default <i>sector_size</i>
is 512 bytes. The minimum value for sector size is 512; the
maximum is 32768 (32 KiB). The <i>sector_size</i> must be a
power of 2 size and cannot be made larger than the
filesystem block size.</p>

<p style="margin-left:11%;"><b>&minus;L</b>
<i>label</i></p>

<p style="margin-left:22%;">Set the filesystem
<i>label</i>. XFS filesystem labels can be at most 12
characters long; if <i>label</i> is longer than 12
characters, <b>mkfs.xfs</b> will not proceed with creating
the filesystem. Refer to the <b>mount</b>(8) and
<b>xfs_admin</b>(8) manual entries for additional
information.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Causes the file system parameters to be printed out
without really creating the file system.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;K</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Do not attempt to discard blocks at mkfs time.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;V</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Prints the version number and exits.</p></td></tr>
</table>

<h2>Configuration File Format
<a name="Configuration File Format"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
configuration file uses a basic INI format to specify
sections and options within a section. Section and option
names are case sensitive. Section names must not contain
whitespace. Options are name-value pairs, ended by the first
whitespace in the line. Option names cannot contain
whitespace. Full line comments can be added by starting a
line with a # symbol. If values contain whitespace, then it
must be quoted.</p>

<p style="margin-left:11%; margin-top: 1em">The following
example configuration file sets the block size to 4096
bytes, turns on reverse mapping btrees and sets the inode
size to 2048 bytes.</p>

<p style="margin-left:11%; margin-top: 1em"># Example
mkfs.xfs configuration file</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">
</td>
<td width="74%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">


<p>[block]</p></td>
<td width="74%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">


<p>size=4k</p></td>
<td width="74%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">
</td>
<td width="74%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">


<p>[metadata]</p></td>
<td width="74%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">


<p>rmapbt=1</p></td>
<td width="74%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">
</td>
<td width="74%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">


<p>[inode]</p></td>
<td width="74%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="15%">


<p>size=2048</p></td>
<td width="74%">
</td></tr>
</table>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>xfs</b>(5),
<b>mkfs</b>(8), <b>mount</b>(8), <b>xfs_info</b>(8),
<b>xfs_admin</b>(8).</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">With a
prototype file, it is not possible to specify hard
links.</p>
<hr>
</body>
</html>
