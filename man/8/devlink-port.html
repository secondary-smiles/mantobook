<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:57:05 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DEVLINK&minus;PORT</title>

</head>
<body>
<h1>devlink-port</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">devlink-port
&minus; devlink port configuration</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:23%; margin-top: 1em"><b>devlink</b>
[ <i>OPTIONS</i> ] <b>port</b> { <i>COMMAND</i> |
<b>help</b> }</p>

<p style="margin-left:23%; margin-top: 1em"><i>OPTIONS</i>
:= { <b>&minus;V</b>[<i>ersion</i>] |
<b>&minus;n</b>[<i>no-nice-names</i>] }</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
set</b> <i>DEV/PORT_INDEX</i> [ <b>type</b> { <b>eth</b> |
<b>ib</b> | <b>auto</b> } ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
split</b> <i>DEV/PORT_INDEX</i> <b>count</b>
<i>COUNT</i></p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
unsplit</b> <i>DEV/PORT_INDEX</i></p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
show</b> [ <i>DEV/PORT_INDEX</i> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
health</b> { <i>show</i> | <i>recover</i> | <i>diagnose</i>
| <i>dump</i> | <i>set</i> }</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
add</b> { <i>DEV | DEV/PORT_INDEX</i> } [ <b>flavour</b>
<i>FLAVOUR</i> ] [ <b>pfnum</b> <i>PFNUMBER</i> ] [
<b>sfnum</b> <i>SFNUMBER</i> ] [ <b>controller</b>
<i>CNUM</i> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
del</b> <i>DEV/PORT_INDEX</i></p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
function set</b> <i>DEV/PORT_INDEX</i> [ <b>hw_addr</b> ADDR
] [ <b>state</b> { <b>active</b> | <b>inactive</b> } ] [
<b>roce</b> { <b>enable</b> | <b>disable</b> } ] [
<b>migratable</b> { <b>enable</b> | <b>disable</b> } ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
function rate</b> { <i>show</i> | <i>set</i> | <i>add</i> |
<i>del</i> | <i>help</i> }</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
param set</b> <i>DEV/PORT_INDEX</i> <b>name</b>
<i>PARAMETER</i> <b>value</b> <i>VALUE</i> <b>cmode</b> {
<b>runtime</b> | <b>driverinit</b> | <b>permanent</b> }</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink dev
param show</b> [ <i>DEV/PORT_INDEX</i> <b>name</b>
<i>PARAMETER</i> ]</p>

<p style="margin-left:23%; margin-top: 1em"><b>devlink port
help</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>devlink port
set - change devlink port attributes</b> <i><br>
DEV/PORT_INDEX</i> - specifies the devlink port to operate
on.</p>

<p style="margin-left:17%; margin-top: 1em">Format is:</p>


<p style="margin-left:20%;">BUS_NAME/BUS_ADDRESS/PORT_INDEX</p>

<p style="margin-left:11%;"><b>type</b> { <b>eth</b> |
<b>ib</b> | <b>auto</b> }</p>

<p style="margin-left:22%;">set port type</p>

<p style="margin-left:22%; margin-top: 1em"><i>eth</i> -
Ethernet</p>

<p style="margin-left:22%; margin-top: 1em"><i>ib</i> -
Infiniband</p>

<p style="margin-left:22%; margin-top: 1em"><i>auto</i> -
autoselect</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
split - split devlink port into more</b> <i><br>
DEV/PORT_INDEX</i> - specifies the devlink port to operate
on. <b><br>
count</b> <i>COUNT</i></p>

<p style="margin-left:22%;">number of ports to split
to.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
unsplit - unsplit previously split devlink port</b> <br>
Could be performed on any split port of the same split
group.</p>


<p style="margin-left:11%; margin-top: 1em"><i>DEV/PORT_INDEX</i>
- specifies the devlink port to operate on.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
show - display devlink port attributes</b> <i><br>
DEV/PORT_INDEX</i> - specifies the devlink port to show. If
this argument is omitted all ports are listed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
health - devlink health reporting and recovery</b> <br>
Is an alias for <b>devlink-health</b>(8).</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
add - add a devlink port</b> <i><br>
DEV</i> - specifies the devlink device to operate on. or</p>


<p style="margin-left:11%; margin-top: 1em"><i>DEV/PORT_INDEX</i>
- specifies the devlink port index to use for the requested
new port. This is optional. When omitted, driver allocates
unique port index. <b><br>
flavour</b> { <b>pcipf</b> | <b>pcisf</b> }</p>

<p style="margin-left:22%;">set port flavour</p>

<p style="margin-left:22%; margin-top: 1em"><i>pcipf</i> -
PCI PF port</p>

<p style="margin-left:22%; margin-top: 1em"><i>pcisf</i> -
PCI SF port</p>

<p style="margin-left:11%;"><b>pfnum</b>
<i>PFNUMBER</i></p>

<p style="margin-left:22%;">Specifies PCI pfnumber to use
on which a SF device to create</p>

<p style="margin-left:11%;"><b>sfnum</b>
<i>SFNUMBER</i></p>

<p style="margin-left:22%;">Specifies sfnumber to assign to
the device of the SF. This field is optional for those
devices which supports auto assignment of the SF number.</p>

<p style="margin-left:11%;"><b>controller</b>
<i>CNUM</i></p>

<p style="margin-left:22%;">Specifies controller number for
which the SF port is created. This field is optional. It is
used only when SF port is created for the external
controller.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
function set - Set the port function attribute(s).</b>
<i><br>
DEV/PORT_INDEX</i> - specifies the devlink port to operate
on. <b><br>
hw_addr</b> <i>ADDR</i></p>

<p style="margin-left:22%;">Hardware address of the
function to set. This is a Ethernet MAC address when port
type is Ethernet.</p>

<p style="margin-left:11%;"><b>state</b> { <b>active</b> |
<b>inactive</b> }</p>

<p style="margin-left:22%;">New state of the function to
change to.</p>

<p style="margin-left:22%; margin-top: 1em"><i>active</i> -
Once configuration of the function is done, activate the
function.</p>


<p style="margin-left:22%; margin-top: 1em"><i>inactive</i>
- To inactivate the function and its device(s), set to
inactive.</p>

<p style="margin-left:11%;"><b>roce</b> { <b>enable</b> |
<b>disable</b> }</p>

<p style="margin-left:22%;">Set the RoCE capability of the
function.</p>

<p style="margin-left:11%;"><b>migratable</b> {
<b>enable</b> | <b>disable</b> }</p>

<p style="margin-left:22%;">Set the migratable capability
of the function.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
del - delete a devlink port</b> <i><br>
DEV/PORT_INDEX</i> - specifies the devlink port to
delete.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
param set - set new value to devlink port configuration
parameter</b> <i><br>
DEV/PORT_INDEX</i> - specifies the devlink port to operate
on. <b><br>
name</b> <i>PARAMETER</i></p>

<p style="margin-left:22%;">Specify parameter name to
set.</p>

<p style="margin-left:11%;"><b>value</b> <i>VALUE</i></p>

<p style="margin-left:22%;">New value to set.</p>

<p style="margin-left:11%;"><b>cmode</b> { <b>runtime</b> |
<b>driverinit</b> | <b>permanent</b> }</p>

<p style="margin-left:22%;">Configuration mode in which the
new value is set.</p>

<p style="margin-left:22%; margin-top: 1em"><i>runtime</i>
- Set new value while driver is running. This configuration
mode doesn&rsquo;t require any reset to apply the new
value.</p>


<p style="margin-left:22%; margin-top: 1em"><i>driverinit</i>
- Set new value which will be applied during driver
initialization. This configuration mode requires restart
driver by devlink reload command to apply the new value.</p>


<p style="margin-left:22%; margin-top: 1em"><i>permanent</i>
- New value is written to device&rsquo;s non-volatile
memory. This configuration mode requires hard reset to apply
the new value.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
param show - display devlink port supported configuration
parameters attributes</b> <i><br>
DEV/PORT_INDEX</i> - specifies the devlink port to operate
on.</p>

<p style="margin-left:11%; margin-top: 1em"><b>name</b>
<i>PARAMETER</i> Specify parameter name to show. If this
argument, as well as port index, are omitted - all
parameters supported by devlink device ports are listed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>devlink port
function rate - manage devlink rate objects</b> <br>
Is an alias for <b>devlink-rate</b>(8).</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">devlink port
show</p>

<p style="margin-left:17%;">Shows the state of all devlink
ports on the system.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
show pci/0000:01:00.0/1</p>

<p style="margin-left:17%;">Shows the state of specified
devlink port.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
set pci/0000:01:00.0/1 type eth</p>

<p style="margin-left:17%;">Set type of specified devlink
port to Ethernet.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
split pci/0000:01:00.0/1 count 4</p>

<p style="margin-left:17%;">Split the specified devlink
port into four ports.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
unsplit pci/0000:01:00.0/1</p>

<p style="margin-left:17%;">Unplit the specified previously
split devlink port.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
health show</p>

<p style="margin-left:17%;">Shows status and configuration
of all supported reporters registered on all devlink
ports.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
health show pci/0000:01:00.0/1 reporter tx</p>

<p style="margin-left:17%;">Shows status and configuration
of tx reporter registered on pci/0000:01:00.0/1 devlink
port.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
add pci/0000:06:00.0 flavour pcisf pfnum 0 sfnum 88</p>

<p style="margin-left:17%;">Add a devlink port of flavour
PCI SF on PCI PF having number 0 with SF number 88. To make
use of the function an example sequence is to add a port,
configure the function attribute and activate the function.
Once function usage is completed, inactivate the function
and finally delete the port. When there is desire to reuse
the port without deletion, it can be reconfigured and
activated again when function is in inactive state and
function&rsquo;s operational state is detached.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
del pci/0000:06:00.0/1</p>

<p style="margin-left:17%;">Delete previously created
devlink port. It is recommended to first deactivate the
function if the function supports state management.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
function set pci/0000:01:00.0/1 hw_addr
00:00:00:11:22:33</p>

<p style="margin-left:17%;">Configure hardware address of
the PCI function represented by devlink port. If the port
supports change in function state, hardware address must be
configured before activating the function.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
function set pci/0000:01:00.0/1 state active</p>

<p style="margin-left:17%;">Activate the function. This
will initiate the function enumeration and driver
loading.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
function set pci/0000:01:00.0/1 state inactive</p>

<p style="margin-left:17%;">Deactivate the function. This
will initiate the function teardown which results in driver
unload and device removal.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
function set pci/0000:01:00.0/1 roce enable</p>

<p style="margin-left:17%;">This will enable the RoCE
functionality of the function.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
function set pci/0000:01:00.0/1 migratable enable</p>

<p style="margin-left:17%;">This will enable the migratable
functionality of the function.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
function set pci/0000:01:00.0/1 hw_addr 00:00:00:11:22:33
state active</p>

<p style="margin-left:17%;">Configure hardware address and
also active the function. When a function is activated
together with other configuration in a single command, all
the configuration is applied first before changing the state
to active.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
param show</p>

<p style="margin-left:17%;">Shows (dumps) all the port
parameters across all the devices registered in the
devlink.</p>

<p style="margin-left:11%; margin-top: 1em">devlink dev
param set pci/0000:01:00.0/1 name internal_error_reset value
true cmode runtime</p>

<p style="margin-left:17%;">Sets the parameter
internal_error_reset of specified devlink port (#1) to
true.</p>

<p style="margin-left:11%; margin-top: 1em">devlink port
add pci/0000:06:00.0 flavour pcisf pfnum 0 sfnum 88
controller 1</p>

<p style="margin-left:17%;">Add a devlink port of flavour
PCI SF on controller 1 which has PCI PF of number 0 with SF
number 88. To make use of the function an example sequence
is to add a port, configure the function attribute and
activate the function. Once the function usage is completed,
deactivate the function and finally delete the port. When
there is desire to reuse the port without deletion, it can
be reconfigured and activated again when function is in
inactive state and function&rsquo;s operational state is
detached.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>devlink</b>(8),
<b>devlink-dev</b>(8), <b>devlink-sb</b>(8),
<b>devlink-monitor</b>(8), <b>devlink-health</b>(8),</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Jiri Pirko
&lt;jiri@mellanox.com&gt;</p>
<hr>
</body>
</html>
