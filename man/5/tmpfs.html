<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:56:55 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>tmpfs</title>

</head>
<body>
<h1>tmpfs</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">tmpfs &minus; a
virtual memory filesystem</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>tmpfs</b> facility allows the creation of filesystems
whose contents reside in virtual memory. Since the files on
such filesystems typically reside in RAM, file access is
extremely fast.</p>

<p style="margin-left:11%; margin-top: 1em">The filesystem
is automatically created when mounting a filesystem with the
type <b>tmpfs</b> via a command such as the following:</p>

<p style="margin-left:17%; margin-top: 1em">$ sudo mount
&minus;t tmpfs &minus;o size=10M tmpfs /mnt/mytmpfs</p>

<p style="margin-left:11%; margin-top: 1em">A <b>tmpfs</b>
filesystem has the following properties:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p>The filesystem can employ swap space when physical
memory pressure demands it.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p>The filesystem consumes only as much physical memory and
swap space as is required to store the current contents of
the filesystem.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="3%"></td>
<td width="85%">


<p>During a remount operation
(<i>mount&nbsp;&minus;o&nbsp;remount</i>), the filesystem
size can be changed (without losing the existing contents of
the filesystem).</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If a
<b>tmpfs</b> filesystem is unmounted, its contents are
discarded (lost).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Mount
options</b> <br>
The <b>tmpfs</b> filesystem supports the following mount
options: <b><br>
size</b>=<i>bytes</i></p>

<p style="margin-left:22%;">Specify an upper limit on the
size of the filesystem. The size is given in bytes, and
rounded up to entire pages.</p>

<p style="margin-left:22%; margin-top: 1em">The size may
have a <b>k</b>, <b>m</b>, or <b>g</b> suffix for Ki, Mi, Gi
(binary kilo (kibi), binary mega (mebi), and binary giga
(gibi)).</p>

<p style="margin-left:22%; margin-top: 1em">The size may
also have a % suffix to limit this instance to a percentage
of physical RAM.</p>

<p style="margin-left:22%; margin-top: 1em">The default,
when neither <b>size</b> nor <b>nr_blocks</b> is specified,
is <i>size=50%</i>.</p>


<p style="margin-left:11%;"><b>nr_blocks</b>=<i>blocks</i></p>

<p style="margin-left:22%;">The same as <b>size</b>, but in
blocks of <b>PAGE_CACHE_SIZE</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Blocks may be
specified with <b>k</b>, <b>m</b>, or <b>g</b> suffixes like
<b>size</b>, but not a % suffix.</p>


<p style="margin-left:11%;"><b>nr_inodes</b>=<i>inodes</i></p>

<p style="margin-left:22%;">The maximum number of inodes
for this instance. The default is half of the number of your
physical RAM pages, or (on a machine with highmem) the
number of lowmem RAM pages, whichever is smaller.</p>

<p style="margin-left:22%; margin-top: 1em">Inodes may be
specified with <b>k</b>, <b>m</b>, or <b>g</b> suffixes like
<b>size</b>, but not a % suffix.</p>

<p style="margin-left:11%;"><b>mode</b>=<i>mode</i></p>

<p style="margin-left:22%;">Set initial permissions of the
root directory.</p>

<p style="margin-left:11%;"><b>gid</b>=<i>gid</i> (since
Linux 2.5.7)</p>

<p style="margin-left:22%;">Set the initial group ID of the
root directory.</p>

<p style="margin-left:11%;"><b>uid</b>=<i>uid</i> (since
Linux 2.5.7)</p>

<p style="margin-left:22%;">Set the initial user ID of the
root directory.</p>

<p style="margin-left:11%;"><b>huge</b>=<i>huge_option</i>
(since Linux 4.7.0)</p>

<p style="margin-left:22%;">Set the huge table memory
allocation policy for all files in this instance (if
<b>CONFIG_TRANSPARENT_HUGE_PAGECACHE</b> is enabled).</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>huge_option</i> value is one of the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>never</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Do not allocate huge pages. This is the default.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>always</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Attempt to allocate huge pages every time a new page is
needed.</p> </td></tr>
</table>

<p style="margin-left:22%;"><b>within_size</b></p>

<p style="margin-left:32%;">Only allocate huge page if it
will be fully within <i>i_size</i>. Also respect
<b>fadvise</b>(2) and <b>madvise</b>(2) hints</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>advise</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Only allocate huge pages if requested with
<b>fadvise</b>(2) or <b>madvise</b>(2).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>deny</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>For use in emergencies, to force the huge option off
from all mounts.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p><b>force</b></p></td>
<td width="1%"></td>
<td width="68%">


<p>Force the huge option on for all mounts; useful for
testing.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>mpol</b>=<i>mpol_option</i>
(since Linux 2.6.15)</p>

<p style="margin-left:22%;">Set the NUMA memory allocation
policy for all files in this instance (if <b>CONFIG_NUMA</b>
is enabled).</p>

<p style="margin-left:22%; margin-top: 1em">The
<i>mpol_option</i> value is one of the following: <b><br>
default</b></p>

<p style="margin-left:32%;">Use the process allocation
policy (see <b>set_mempolicy</b>(2)).</p>

<p style="margin-left:22%;"><b>prefer</b>:<i>node</i></p>

<p style="margin-left:32%;">Preferably allocate memory from
the given <i>node</i>.</p>


<p style="margin-left:22%;"><b>bind</b>:<i>nodelist</i></p>

<p style="margin-left:32%;">Allocate memory only from nodes
in <i>nodelist</i>.</p>

<p style="margin-left:22%;"><b>interleave</b></p>

<p style="margin-left:32%;">Allocate from each node in
turn.</p>


<p style="margin-left:22%;"><b>interleave</b>:<i>nodelist</i></p>

<p style="margin-left:32%;">Allocate from each node of
<i>in</i> turn.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>local</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>Preferably allocate memory from the local node.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">In the above,
<i>nodelist</i> is a comma-separated list of decimal numbers
and ranges that specify NUMA nodes. A range is a pair of
hyphen-separated decimal numbers, the smallest and largest
node numbers in the range. For example,
<i>mpol=bind:0&minus;3,5,7,9&minus;15</i>.</p>

<h2>VERSIONS
<a name="VERSIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>tmpfs</b> facility was added in Linux 2.4, as a successor
to the older <b>ramfs</b> facility, which did not provide
limit checking or allow for the use of swap space.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In order for
user-space tools and applications to create <b>tmpfs</b>
filesystems, the kernel must be configured with the
<b>CONFIG_TMPFS</b> option.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>tmpfs</b> filesystem supports extended attributes (see
<b>xattr</b>(7)), but <i>user</i> extended attributes are
not permitted.</p>

<p style="margin-left:11%; margin-top: 1em">An internal
shared memory filesystem is used for System V shared memory
(<b>shmget</b>(2)) and shared anonymous mappings
(<b>mmap</b>(2) with the <b>MAP_SHARED</b> and
<b>MAP_ANONYMOUS</b> flags). This filesystem is available
regardless of whether the kernel was configured with the
<b>CONFIG_TMPFS</b> option.</p>

<p style="margin-left:11%; margin-top: 1em">A <b>tmpfs</b>
filesystem mounted at <i>/dev/shm</i> is used for the
implementation of POSIX shared memory
(<b>shm_overview</b>(7)) and POSIX semaphores
(<b>sem_overview</b>(7)).</p>

<p style="margin-left:11%; margin-top: 1em">The amount of
memory consumed by all <b>tmpfs</b> filesystems is shown in
the <i>Shmem</i> field of <i>/proc/meminfo</i> and in the
<i>shared</i> field displayed by <b>free</b>(1).</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>tmpfs</b> facility was formerly called <b>shmfs</b>.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>df</b>(1),
<b>du</b>(1), <b>memfd_create</b>(2), <b>mmap</b>(2),
<b>set_mempolicy</b>(2), <b>shm_open</b>(3),
<b>mount</b>(8)</p>

<p style="margin-left:11%; margin-top: 1em">The kernel
source files <i>Documentation/filesystems/tmpfs.txt</i> and
<i>Documentation/admin&minus;guide/mm/transhuge.rst</i>.</p>
<hr>
</body>
</html>
