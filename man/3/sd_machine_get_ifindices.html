<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:56:01 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_MACHINE_GET_CLASS</title>

</head>
<body>
<h1>sd_machine_get_ifindices</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">sd_machine_get_class,
sd_machine_get_ifindices &minus; Determine the class and
network interface indices of a locally running virtual
machine or container</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;systemd/sd&minus;login.h&gt;</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_machine_get_class(const&nbsp;char*&nbsp;</b><i>machine</i><b>,
char&nbsp;**</b><i>class</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_machine_get_ifindices(const&nbsp;char*&nbsp;</b><i>machine</i><b>,
int&nbsp;**</b><i>ret_ifindices</i><b>);</b></p> </td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sd_machine_get_class()</b>
may be used to determine the class of a locally running
virtual machine or container that is registered with
<b>systemd-machined.service</b>(8). The string returned is
either &quot;vm&quot; or &quot;container&quot;. The returned
string needs to be freed with the libc <b>free</b>(3) call
after use.</p>


<p style="margin-left:11%; margin-top: 1em"><b>sd_machine_get_ifindices()</b>
may be used to determine the numeric indices of the network
interfaces on the host that are pointing towards the
specified locally running virtual machine or container. The
vm or container must be registered with
<b>systemd-machined.service</b>(8). The output parameter
<i>ret_ifindices</i> may be passed as <b>NULL</b> when the
output value is not needed. The returned array needs to be
freed with the libc <b>free</b>(3) call after use.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">On success,
these functions return a non&minus;negative integer.
<b>sd_machine_get_ifindices()</b> returns the number of the
relevant network interfaces. On failure, these calls return
a negative errno&minus;style error code.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Errors</b>
<br>
Returned errors may indicate the following problems:</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;ENXIO</b></p>

<p style="margin-left:17%;">The specified machine does not
exist or is currently not running.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;EINVAL</b></p>

<p style="margin-left:17%;">An input parameter was invalid
(out of range, or <b>NULL</b>, where that is not
accepted).</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;ENOMEM</b></p>

<p style="margin-left:17%;">Memory allocation failed.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These APIs are
implemented as a shared library, which can be compiled and
linked to with the <b>libsystemd&nbsp;pkg-config</b>(1)
file.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>systemd</b>(1),
<b>sd-login</b>(3), <b>systemd-machined.service</b>(8),
<b>sd_pid_get_machine_name</b>(3)</p>
<hr>
</body>
</html>
