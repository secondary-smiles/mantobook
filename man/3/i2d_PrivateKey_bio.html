<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:55:20 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>D2I_PRIVATEKEY</title>

</head>
<body>
<h1>i2d_PrivateKey_bio</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">d2i_PrivateKey_ex,
d2i_PrivateKey, d2i_PublicKey, d2i_KeyParams,
d2i_AutoPrivateKey_ex, d2i_AutoPrivateKey, i2d_PrivateKey,
i2d_PublicKey, i2d_KeyParams, i2d_KeyParams_bio,
d2i_PrivateKey_ex_bio, d2i_PrivateKey_bio,
d2i_PrivateKey_ex_fp, d2i_PrivateKey_fp, d2i_KeyParams_bio,
i2d_PrivateKey_bio, i2d_PrivateKey_fp &minus; decode and
encode functions for reading and saving EVP_PKEY
structures</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;openssl/evp.h&gt; <br>
EVP_PKEY *d2i_PrivateKey_ex(int type, EVP_PKEY **a, const
unsigned char **pp, <br>
long length, OSSL_LIB_CTX *libctx, <br>
const char *propq); <br>
EVP_PKEY *d2i_PrivateKey(int type, EVP_PKEY **a, const
unsigned char **pp, <br>
long length); <br>
EVP_PKEY *d2i_PublicKey(int type, EVP_PKEY **a, const
unsigned char **pp, <br>
long length); <br>
EVP_PKEY *d2i_KeyParams(int type, EVP_PKEY **a, const
unsigned char **pp, <br>
long length); <br>
EVP_PKEY *d2i_AutoPrivateKey_ex(EVP_PKEY **a, const unsigned
char **pp, <br>
long length, OSSL_LIB_CTX *libctx, <br>
const char *propq); <br>
EVP_PKEY *d2i_AutoPrivateKey(EVP_PKEY **a, const unsigned
char **pp, <br>
long length); <br>
int i2d_PrivateKey(const EVP_PKEY *a, unsigned char **pp);
<br>
int i2d_PublicKey(const EVP_PKEY *a, unsigned char **pp);
<br>
int i2d_KeyParams(const EVP_PKEY *a, unsigned char **pp);
<br>
int i2d_KeyParams_bio(BIO *bp, const EVP_PKEY *pkey); <br>
EVP_PKEY *d2i_KeyParams_bio(int type, EVP_PKEY **a, BIO
*in); <br>
#include &lt;openssl/x509.h&gt; <br>
EVP_PKEY *d2i_PrivateKey_ex_bio(BIO *bp, EVP_PKEY **a,
OSSL_LIB_CTX *libctx, <br>
const char *propq); <br>
EVP_PKEY *d2i_PrivateKey_bio(BIO *bp, EVP_PKEY **a); <br>
EVP_PKEY *d2i_PrivateKey_ex_fp(FILE *fp, EVP_PKEY **a,
OSSL_LIB_CTX *libctx, <br>
const char *propq); <br>
EVP_PKEY *d2i_PrivateKey_fp(FILE *fp, EVP_PKEY **a); <br>
int i2d_PrivateKey_bio(BIO *bp, const EVP_PKEY *pkey); <br>
int i2d_PrivateKey_fp(FILE *fp, const EVP_PKEY *pkey);</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>d2i_PrivateKey_ex()</b>
decodes a private key using algorithm <i>type</i>. It
attempts to use any key-specific format or PKCS#8
unencrypted PrivateKeyInfo format. The <i>type</i> parameter
should be a public key algorithm constant such as
<b><small>EVP_PKEY_RSA</small></b> . An error occurs if the
decoded key does not match <i>type</i>. Some private key
decoding implementations may use cryptographic algorithms
(for example to automatically derive the public key if it is
not explicitly included in the encoding). In this case the
supplied library context <i>libctx</i> and property query
string <i>propq</i> are used. If successful and the <i>a</i>
parameter is not <small>NULL</small> the function assigns
the returned <b><small>EVP_PKEY</small></b> structure
pointer to <i>*a</i>, overwriting any previous value.</p>


<p style="margin-left:11%; margin-top: 1em"><b>d2i_PrivateKey()</b>
does the same as <b>d2i_PrivateKey_ex()</b> except that the
default library context and property query string are used.
<b>d2i_PublicKey()</b> does the same for public keys.
<b>d2i_KeyParams()</b> does the same for key parameters.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>d2i_PrivateKey_ex_bio()</b> and
<b>d2i_PrivateKey_bio()</b> functions are similar to
<b>d2i_PrivateKey_ex()</b> and <b>d2i_PrivateKey()</b>
respectively except that they decode the data read from the
given <small>BIO.</small> The <b>d2i_PrivateKey_ex_fp()</b>
and <b>d2i_PrivateKey_fp()</b> functions are the same except
that they read the data from the given
<small>FILE.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>d2i_AutoPrivateKey_ex()</b>
and <b>d2i_AutoPrivateKey()</b> are similar to
<b>d2i_PrivateKey_ex()</b> and <b>d2i_PrivateKey()</b>
respectively except that they attempt to automatically
detect the private key format.</p>


<p style="margin-left:11%; margin-top: 1em"><b>i2d_PrivateKey()</b>
encodes <i>a</i>. It uses a key specific format or, if none
is defined for that key type, PKCS#8 unencrypted
PrivateKeyInfo format. <b>i2d_PublicKey()</b> does the same
for public keys. <b>i2d_KeyParams()</b> does the same for
key parameters. These functions are similar to the
<b>d2i_X509()</b> functions; see <b>d2i_X509</b>(3).
<b>i2d_PrivateKey_bio()</b> and <b>i2d_PrivateKey_fp()</b>
do the same thing except that they encode to a
<b><small>BIO</small></b> or <b><small>FILE</small></b>
respectively. Again, these work similarly to the functions
described in <b>d2i_X509</b>(3).</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All the
functions that operate on data in memory update the data
pointer <i>*pp</i> after a successful operation, just like
the other d2i and i2d functions; see <b>d2i_X509</b>(3).</p>

<p style="margin-left:11%; margin-top: 1em">All these
functions use <small>DER</small> format and unencrypted
keys. Applications wishing to encrypt or decrypt private
keys should use other functions such as
<b>d2i_PKCS8PrivateKey()</b> instead.</p>

<p style="margin-left:11%; margin-top: 1em">To decode a key
with type <b><small>EVP_PKEY_EC</small></b> ,
<b>d2i_PublicKey()</b> requires <i>*a</i> to be a non-NULL
<small>EVP_PKEY</small> structure assigned an
<small>EC_KEY</small> structure referencing the proper
<small>EC_GROUP.</small></p>

<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>d2i_PrivateKey_ex()</b>, <b>d2i_PrivateKey()</b>,
<b>d2i_AutoPrivateKey_ex()</b>, <b>d2i_AutoPrivateKey()</b>,
<b>d2i_PrivateKey_ex_bio()</b>, <b>d2i_PrivateKey_bio()</b>,
<b>d2i_PrivateKey_ex_fp()</b>, <b>d2i_PrivateKey_fp()</b>,
<b>d2i_PublicKey()</b>, <b>d2i_KeyParams()</b> and
<b>d2i_KeyParams_bio()</b> functions return a valid
<b><small>EVP_PKEY</small></b> structure or
<small>NULL</small> if an error occurs. The error code can
be obtained by calling <b>ERR_get_error</b>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>i2d_PrivateKey()</b>,
<b>i2d_PublicKey()</b> and <b>i2d_KeyParams()</b> return the
number of bytes successfully encoded or a negative value if
an error occurs. The error code can be obtained by calling
<b>ERR_get_error</b>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>i2d_PrivateKey_bio()</b>,
<b>i2d_PrivateKey_fp()</b> and <b>i2d_KeyParams_bio()</b>
return 1 if successfully encoded or zero if an error
occurs.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>crypto</b>(7),
<b>d2i_PKCS8PrivateKey_bio</b>(3)</p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>d2i_PrivateKey_ex()</b>,
<b>d2i_PrivateKey_ex_bio()</b>,
<b>d2i_PrivateKey_ex_fp()</b>, and
<b>d2i_AutoPrivateKey_ex()</b> were added in OpenSSL
3.0.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
2017&minus;2021 The OpenSSL Project Authors. All Rights
Reserved.</p>

<p style="margin-left:11%; margin-top: 1em">Licensed under
the Apache License 2.0 (the &quot;License&quot;). You may
not use this file except in compliance with the License. You
can obtain a copy in the file <small>LICENSE</small> in the
source distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
<hr>
</body>
</html>
