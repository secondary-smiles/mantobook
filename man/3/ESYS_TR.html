<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:54:50 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ESYS_TR</title>

</head>
<body>
<h1>ESYS_TR</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ESYS_TR &minus;
Esys Tpm Resource ESYS_TR</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Modules</b></p>

<p style="margin-left:17%;"><b>Global ESYS_TR
objects</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>Typedefs</b></p>

<p style="margin-left:17%;">typedef uint32_t
<b>ESYS_TR</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>Functions</b></p>

<p style="margin-left:17%;">TSS2_RC <b>Esys_TR_SetAuth</b>
(<b>ESYS_CONTEXT</b> *esysContext, <b>ESYS_TR</b> handle,
TPM2B_AUTH const *authValue) <br>
TSS2_RC <b>Esys_TR_GetName</b> (<b>ESYS_CONTEXT</b>
*esysContext, <b>ESYS_TR</b> handle, TPM2B_NAME **name) <br>
TSS2_RC <b>Esys_TR_FromTPMPublic_Async</b>
(<b>ESYS_CONTEXT</b> *esysContext, TPM2_HANDLE tpm_handle,
<b>ESYS_TR</b> optionalSession1, <b>ESYS_TR</b>
optionalSession2, <b>ESYS_TR</b> optionalSession3) <br>
TSS2_RC <b>Esys_TR_FromTPMPublic_Finish</b>
(<b>ESYS_CONTEXT</b> *esysContext, <b>ESYS_TR</b> *object)
<br>
TSS2_RC <b>Esys_TR_FromTPMPublic</b> (<b>ESYS_CONTEXT</b>
*esysContext, TPM2_HANDLE tpm_handle, <b>ESYS_TR</b>
optionalSession1, <b>ESYS_TR</b> optionalSession2,
<b>ESYS_TR</b> optionalSession3, <b>ESYS_TR</b> *object)
<br>
TSS2_RC <b>Esys_TR_Serialize</b> (<b>ESYS_CONTEXT</b>
*esys_context, <b>ESYS_TR</b> object, uint8_t **buffer,
size_t *buffer_size) <br>
TSS2_RC <b>Esys_TR_Deserialize</b> (<b>ESYS_CONTEXT</b>
*esys_context, uint8_t const *buffer, size_t buffer_size,
<b>ESYS_TR</b> *esys_handle) <br>
TSS2_RC <b>Esys_TR_Close</b> (<b>ESYS_CONTEXT</b>
*esys_context, <b>ESYS_TR</b> *rsrc_handle) <br>
TSS2_RC <b>Esys_TRSess_GetAttributes</b>
(<b>ESYS_CONTEXT</b> *esysContext, <b>ESYS_TR</b> session,
TPMA_SESSION *flags) <br>
TSS2_RC <b>Esys_TRSess_SetAttributes</b>
(<b>ESYS_CONTEXT</b> *esysContext, <b>ESYS_TR</b> session,
TPMA_SESSION flags, TPMA_SESSION mask)</p>

<h2>Detailed Description
<a name="Detailed Description"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Virtual objects
with meta data for Tpm Resources. The Esys TPM Resources are
the virtual objects inside the ESYSCONTEXT that hold the
metadata for corresponding TPM Resources.</p>

<p style="margin-left:11%; margin-top: 1em">There are a set
of global ESYS_TR objects such as ESYS_TR_NON or for the
various PCRs and hierarchies. ESYS_TR_MIN_OBJECT denotes the
first non-global ESYS_TR object.</p>

<h2>Typedef Documentation
<a name="Typedef Documentation"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ESYS_TR</b>
<br>
Reference to the virtual object inside the
<b>ESYS_CONTEXT</b> that holds the metadata for the
corresponding TPM Resource. Such can be Transient key,
Persistent objects, NV spaces, Sessions or PCRs.</p>

<h2>Function Documentation
<a name="Function Documentation"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TR_Close (ESYS_CONTEXT * esys_context, ESYS_TR *
object)</b> <br>
Close an ESYS_TR without removing it from the TPM.</p>

<p style="margin-left:11%; margin-top: 1em">This function
deletes an ESYS_TR object from an <b>ESYS_CONTEXT</b>
without deleting it from the TPM. This is useful for
NV-Indices or persistent keys, after Esys_TR_Serialize has
been called. Transient objects should be deleted using
Esys_FlushContext.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b> <i><br>
object</i> [out] ESYS_TR metadata object to be deleted from
<b>ESYS_CONTEXT</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
Success. <i><br>
TSS2_ESYS_RC_BAD_REFERENCE</i> if the esysContext is NULL.
<i><br>
TSS2_ESYS_RC_BAD_TR</i> if the ESYS_TR object is unknown to
the <b>ESYS_CONTEXT</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TR_Deserialize (ESYS_CONTEXT * esys_context, uint8_t
const * buffer, size_t buffer_size, ESYS_TR *
esys_handle)</b> <br>
Deserialization of an ESYS_TR from a byte buffer.</p>

<p style="margin-left:11%; margin-top: 1em">Deserialize the
metadata of an ESYS_TR object from a byte buffer that was
stored on disk for later use by a different program or
context. An object can be deserialized using
Esys_TR_Deserialize.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b>. <i><br>
esys_handle</i> [out] The ESYS_TR object to deserialize.
<i><br>
buffer</i> [in] The buffer containing the metadata of the
ESYS_TR object. <i><br>
buffer_size</i> [in] The size of the buffer parameter.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
Success. <i><br>
TSS2_ESYS_RC_MEMORY</i> if the object can not be allocated.
<i><br>
TSS2_ESYS_RC_INSUFFICIENT_BUFFER</i> if the buffer for
unmarshalling. <i><br>
TSS2_ESYS_RC_BAD_REFERENCE</i> if the esysContext is NULL.
<i><br>
TSS2_RCs</i> produced by lower layers of the software
stack.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TR_FromTPMPublic (ESYS_CONTEXT * esys_context,
TPM2_HANDLE tpm_handle, ESYS_TR shandle1, ESYS_TR shandle2,
ESYS_TR shandle3, ESYS_TR * object)</b> <br>
Creation of an ESYS_TR object from TPM metadata.</p>

<p style="margin-left:11%; margin-top: 1em">This function
can be used to create ESYS_TR object for Tpm Resources that
are not created or loaded (e.g. using ESys_CreatePrimary or
ESys_Load) but pre-exist inside the TPM. Examples are
NV-Indices or persistent object.</p>

<p style="margin-left:11%; margin-top: 1em">Note: For PCRs
and hierarchies, please use the global ESYS_TR identifiers.
Note: If a session is provided the TPM is queried for the
metadata twice. First without a session to retrieve some
metadata then with the session where this metadata is used
in the session HMAC calculation and thereby verified.</p>

<p style="margin-left:11%; margin-top: 1em">Since man in
the middle attacks should be prevented as much as possible
it is recommended to pass a session.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b> <i><br>
tpm_handle</i> [in] The handle of the TPM object to
represent as ESYS_TR. <i><br>
shandle1</i> [in,out] A session for securing the TPM command
(optional). <i><br>
shandle2</i> [in,out] A session for securing the TPM command
(optional). <i><br>
shandle3</i> [in,out] A session for securing the TPM command
(optional). <i><br>
object</i> [out] The newly created ESYS_TR metadata
object.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
success <i><br>
ESYS_RC_SUCCESS</i> if the function call was a success.
<i><br>
TSS2_ESYS_RC_BAD_REFERENCE</i> if the esysContext or
required input pointers or required output handle references
are NULL. <i><br>
TSS2_ESYS_RC_BAD_CONTEXT</i> if esysContext corruption is
detected. <i><br>
TSS2_ESYS_RC_MEMORY</i> if the ESAPI cannot allocate enough
memory for internal operations or return parameters. <i><br>
TSS2_ESYS_RC_BAD_SEQUENCE</i> if the context has an
asynchronous operation already pending. <i><br>
TSS2_ESYS_RC_INSUFFICIENT_RESPONSE</i> if the TPM&rsquo;s
response does not at least contain the tag, response length,
and response code. <i><br>
TSS2_ESYS_RC_MALFORMED_RESPONSE</i> if the TPM&rsquo;s
response is corrupted. <i><br>
TSS2_ESYS_RC_MULTIPLE_DECRYPT_SESSIONS</i> if more than one
session has the &rsquo;decrypt&rsquo; attribute bit set.
<i><br>
TSS2_ESYS_RC_MULTIPLE_ENCRYPT_SESSIONS</i> if more than one
session has the &rsquo;encrypt&rsquo; attribute bit set.
<i><br>
TSS2_ESYS_RC_NO_DECRYPT_PARAM</i> if one of the sessions has
the &rsquo;decrypt&rsquo; attribute set and the command does
not support encryption of the first command parameter.
<i><br>
TSS2_RCs</i> produced by lower layers of the software stack
may be returned to the caller unaltered unless handled
internally.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TR_FromTPMPublic_Async (ESYS_CONTEXT * esys_context,
TPM2_HANDLE tpm_handle, ESYS_TR shandle1, ESYS_TR shandle2,
ESYS_TR shandle3)</b> <br>
Start synchronous creation of an ESYS_TR object from TPM
metadata.</p>

<p style="margin-left:11%; margin-top: 1em">This function
starts the asynchronous retrieval of metadata from the TPM
in order to create a new ESYS_TR object.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b> <i><br>
tpm_handle</i> [in] The handle of the TPM object to
represent as ESYS_TR. <i><br>
shandle1</i> [in,out] A session for securing the TPM command
(optional). <i><br>
shandle2</i> [in,out] A session for securing the TPM command
(optional). <i><br>
shandle3</i> [in,out] A session for securing the TPM command
(optional).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
success <i><br>
ESYS_RC_SUCCESS</i> if the function call was a success.
<i><br>
TSS2_ESYS_RC_BAD_REFERENCE</i> if the esysContext is NULL.
<i><br>
TSS2_ESYS_RC_BAD_CONTEXT</i> if esysContext corruption is
detected. <i><br>
TSS2_ESYS_RC_MEMORY</i> if the ESAPI cannot allocate enough
memory for internal operations or return parameters. <i><br>
TSS2_ESYS_RC_MULTIPLE_DECRYPT_SESSIONS</i> if more than one
session has the &rsquo;decrypt&rsquo; attribute bit set.
<i><br>
TSS2_ESYS_RC_MULTIPLE_ENCRYPT_SESSIONS</i> if more than one
session has the &rsquo;encrypt&rsquo; attribute bit set.
<i><br>
TSS2_ESYS_RC_NO_DECRYPT_PARAM</i> if one of the sessions has
the &rsquo;decrypt&rsquo; attribute set and the command does
not support encryption of the first command parameter.
<i><br>
TSS2_RCs</i> produced by lower layers of the software stack
may be returned to the caller unaltered unless handled
internally.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TR_FromTPMPublic_Finish (ESYS_CONTEXT * esys_context,
ESYS_TR * object)</b> <br>
Finish asynchronous creation of an ESYS_TR object from TPM
metadata.</p>

<p style="margin-left:11%; margin-top: 1em">This function
finishes the asynchronous retrieval of metadata from the TPM
in order to create a new ESYS_TR object.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b> <i><br>
object</i> [out] The newly created ESYS_TR metadata
object.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
success <i><br>
ESYS_RC_SUCCESS</i> if the function call was a success.
<i><br>
TSS2_ESYS_RC_BAD_REFERENCE</i> if the esysContext or
required input pointers or required output handle references
are NULL. <i><br>
TSS2_ESYS_RC_BAD_CONTEXT</i> if esysContext corruption is
detected. <i><br>
TSS2_ESYS_RC_MEMORY</i> if the ESAPI cannot allocate enough
memory for internal operations or return parameters. <i><br>
TSS2_ESYS_RC_BAD_SEQUENCE</i> if the context has an
asynchronous operation already pending. <i><br>
TSS2_ESYS_RC_TRY_AGAIN</i> if the timeout counter expires
before the TPM response is received. <i><br>
TSS2_ESYS_RC_INSUFFICIENT_RESPONSE</i> if the TPM&rsquo;s
response does not at least contain the tag, response length,
and response code. <i><br>
TSS2_ESYS_RC_MALFORMED_RESPONSE</i> if the TPM&rsquo;s
response is corrupted. <i><br>
TSS2_RCs</i> produced by lower layers of the software stack
may be returned to the caller unaltered unless handled
internally.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TR_GetName (ESYS_CONTEXT * esys_context, ESYS_TR
esys_handle, TPM2B_NAME ** name)</b> <br>
Retrieve the TPM public name of an Esys_TR object.</p>

<p style="margin-left:11%; margin-top: 1em">Some operations
(i.e. Esys_PolicyNameHash) require the name of a TPM object
to be passed. Esys_TR_GetName provides this name to the
caller.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b>. <i><br>
esys_handle</i> [in,out] The ESYS_TR for which to retrieve
the name. <i><br>
name</i> [out] The name of the object (caller-allocated; use
free()).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
Success. <i><br>
TSS2_ESYS_RC_MEMORY</i> if needed memory can&rsquo;t be
allocated. <i><br>
TSS2_ESYS_RC_GENERAL_FAILURE</i> for errors of the crypto
library. <i><br>
TSS2_ESYS_RC_BAD_REFERENCE</i> if the esysContext is NULL.
<i><br>
TSS2_ESYS_RC_BAD_TR</i> if the handle is invalid. <i><br>
TSS2_SYS_RC_*</i> for SAPI errors.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TR_Serialize (ESYS_CONTEXT * esys_context, ESYS_TR
esys_handle, uint8_t ** buffer, size_t * buffer_size)</b>
<br>
Serialization of an ESYS_TR into a byte buffer.</p>

<p style="margin-left:11%; margin-top: 1em">Serialize the
metadata of an ESYS_TR object into a byte buffer such that
it can be stored on disk for later use by a different
program or context. The serialized object can be
deserialized using Esys_TR_Deserialize.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b>. <i><br>
esys_handle</i> [in] The ESYS_TR object to serialize.
<i><br>
buffer</i> [out] The buffer containing the serialized
metadata. (caller-callocated) Shall be freed using free().
<i><br>
buffer_size</i> [out] The size of the buffer parameter.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
Success. <i><br>
TSS2_ESYS_RC_BAD_TR</i> if the ESYS_TR object is unknown to
the <b>ESYS_CONTEXT</b>. <i><br>
TSS2_ESYS_RC_MEMORY</i> if the buffer for marshaling the
object can&rsquo;t be allocated. <i><br>
TSS2_ESYS_RC_BAD_VALUE</i> For invalid ESYS data to be
marshaled. <i><br>
TSS2_RCs</i> produced by lower layers of the software
stack.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TR_SetAuth (ESYS_CONTEXT * esys_context, ESYS_TR
esys_handle, TPM2B_AUTH const * authValue)</b> <br>
Set the authorization value of an ESYS_TR.</p>

<p style="margin-left:11%; margin-top: 1em">Authorization
values are associated with ESYS_TR Tpm Resource object. They
are then picked up whenever an authorization is needed.</p>

<p style="margin-left:11%; margin-top: 1em">Note: The
authorization value is not stored in the metadata during
Esys_TR_Serialize. Therefor Esys_TR_SetAuth needs to be
called again after every Esys_TR_Deserialize.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b>. <i><br>
esys_handle</i> [in,out] The ESYS_TR for which to set the
auth value. <i><br>
authValue</i> [in] The auth value to set for the ESYS_TR or
NULL to zero the auth.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
Success. <i><br>
TSS2_ESYS_RC_BAD_REFERENCE</i> if the esysContext is NULL.
<i><br>
TSS2_ESYS_RC_BAD_TR</i> if the ESYS_TR object is unknown to
the <b>ESYS_CONTEXT</b> or it equals ESYS_TR_NONE.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TRSess_GetAttributes (ESYS_CONTEXT * esys_context,
ESYS_TR esys_handle, TPMA_SESSION * flags)</b> <br>
Retrieve the Session Attributes of the ESYS_TR session.</p>

<p style="margin-left:11%; margin-top: 1em">Sessions
possess attributes, such as whether they shall continue of
be flushed after the next command, or whether they are used
to encrypt parameters. Note: this function only applies to
ESYS_TR objects that represent sessions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b>. <i><br>
esys_handle</i> [in,out] The ESYS_TR of the session. <i><br>
flags</i> [out] The attributes of the session.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>


<p style="margin-left:17%;"><i>TSS2_ESYS_RC_BAD_REFERENCE</i>
if the esysContext is NULL. <i><br>
TSS2_ESYS_RC_BAD_TR</i> if the ESYS_TR object is unknown to
the <b>ESYS_CONTEXT</b> or ESYS_TR object is not a session
object.</p>

<p style="margin-left:11%; margin-top: 1em"><b>TSS2_RC
Esys_TRSess_SetAttributes (ESYS_CONTEXT * esys_context,
ESYS_TR esys_handle, TPMA_SESSION flags, TPMA_SESSION
mask)</b> <br>
Set session attributes</p>

<p style="margin-left:11%; margin-top: 1em">Set or unset a
session&rsquo;s attributes according to the provided flags
and mask.</p>

<p style="margin-left:11%; margin-top: 1em">new_attributes
= old_attributes &amp; ~mask | flags &amp; mask</p>

<p style="margin-left:11%; margin-top: 1em">Note: this
function only applies to ESYS_TR objects that represent
sessions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Parameters</b></p>

<p style="margin-left:17%;"><i>esys_context</i> [in,out]
The <b>ESYS_CONTEXT</b>. <i><br>
esys_handle</i> [in,out] The ESYS_TR of the session. <i><br>
flags</i> [in] The flags to be set or unset for the session.
<i><br>
mask</i> [in] The mask for the flags to be set or unset.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Return
values</b></p>

<p style="margin-left:17%;"><i>TSS2_RC_SUCCESS</i> on
Success. <i><br>
TSS2_ESYS_RC_BAD_REFERENCE</i> if the esysContext is NULL.
<i><br>
TSS2_ESYS_RC_BAD_TR</i> if the ESYS_TR object is unknown to
the <b>ESYS_CONTEXT</b> or ESYS_TR object is not a session
object.</p>

<h2>Author
<a name="Author"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Generated
automatically by Doxygen for tpm2-tss from the source
code.</p>
<hr>
</body>
</html>
