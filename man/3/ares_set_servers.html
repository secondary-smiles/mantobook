<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:54:16 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ARES_SET_SERVERS</title>

</head>
<body>
<h1>ares_set_servers</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">ares_set_servers,
ares_set_servers_ports &minus; Initialize an ares_channel
name servers configuration</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;ares.h&gt;</p>

<p style="margin-left:11%; margin-top: 1em">int
ares_set_servers(ares_channel <i>channel</i>, <br>
struct ares_addr_node *<i>servers</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int
ares_set_servers_ports(ares_channel <i>channel</i>, <br>
struct ares_addr_port_node *<i>servers</i>)</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>ares_set_servers(3)</b> function initializes name servers
configuration for the channel data identified by
<i>channel</i>, from a <i>servers</i> pointer to a linked
list of ares_addr_node structs holding name servers address
data.</p>

<p style="margin-left:11%; margin-top: 1em">The name server
linked list pointer argument may be the result of a previous
call to <b>ares_get_servers(3)</b> or a linked list of
<b>ares_addr_node</b> structs set up by other means.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>ares_set_servers(3)</b> function also allows the
specification of UDP and TCP ports to be used for
communication on a per-server basis. The provided linked
list argument may be the result of a previous call to
<b>ares_get_servers_ports(3)</b> or a linked list of
<b>ares_addr_port_node</b> structs set up by other
means.</p>

<p style="margin-left:11%; margin-top: 1em">This function
replaces any potentially previously configured name servers
with the ones given in the linked list. So, in order to
configure a channel with more than one name server all the
desired ones must be specified in a single list.</p>

<p style="margin-left:11%; margin-top: 1em">The function
does not take ownership of the linked list argument. The
caller is responsible for freeing the linked list when no
longer needed.</p>

<p style="margin-left:11%; margin-top: 1em">This function
is capable of handling IPv4 and IPv6 name server addresses
simultaneously, rendering <b>ares_init_options(3)</b> with
optmask <b>ARES_OPT_SERVERS</b> functionally obsolete except
for IPv4-only name server usage.</p>

<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ares_set_servers(3)</b>
may return any of the following values:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>ARES_SUCCESS</b></p></td>
<td width="5%"></td>
<td width="66%">


<p>The name servers configuration was successfully
initialized.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>ARES_ENOMEM</b></p></td>
<td width="5%"></td>
<td width="66%">


<p>The process&rsquo;s available memory was exhausted.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>ARES_ENODATA</b></p></td>
<td width="5%"></td>
<td width="66%">


<p>The channel data identified by <i>channel</i> was
invalid.</p> </td></tr>
</table>


<p style="margin-left:11%;"><b>ARES_ENOTINITIALIZED</b></p>

<p style="margin-left:34%;">c-ares library initialization
not yet performed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>ARES_ENOTIMP</b></p></td>
<td width="5%"></td>
<td width="66%">


<p>Changing name servers configuration while queries are
outstanding is not implemented.</p></td></tr>
</table>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ares_set_servers_csv</b>(3),
<b>ares_get_servers</b>(3), <b>ares_init_options</b>(3),
<b>ares_dup(3)</b></p>

<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ares_set_servers(3)</b>
was added in c-ares 1.7.1; <b>ares_set_servers_ports(3)</b>
was added in c-ares 1.11.0.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Implementation
of this function and associated library internals are based
on code, comments and feedback provided in November and
December of 2008 by Daniel Stenberg, Gregor Jasny, Phil
Blundell and Yang Tse, December 2009 by Cedric Bail,
February 2010 by Jakub Hrozek. On March 2010 Yang Tse
shuffled all the bits and this function popped out. <br>
Copyright 1998 by the Massachusetts Institute of Technology.
<br>
Copyright (C) 2008-2010 by Daniel Stenberg</p>
<hr>
</body>
</html>
