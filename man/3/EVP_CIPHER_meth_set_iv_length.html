<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:54:53 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>EVP_CIPHER_METH_NEW</title>

</head>
<body>
<h1>EVP_CIPHER_meth_set_iv_length</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">EVP_CIPHER_meth_new,
EVP_CIPHER_meth_dup, EVP_CIPHER_meth_free,
EVP_CIPHER_meth_set_iv_length, EVP_CIPHER_meth_set_flags,
EVP_CIPHER_meth_set_impl_ctx_size, EVP_CIPHER_meth_set_init,
EVP_CIPHER_meth_set_do_cipher, EVP_CIPHER_meth_set_cleanup,
EVP_CIPHER_meth_set_set_asn1_params,
EVP_CIPHER_meth_set_get_asn1_params,
EVP_CIPHER_meth_set_ctrl, EVP_CIPHER_meth_get_init,
EVP_CIPHER_meth_get_do_cipher, EVP_CIPHER_meth_get_cleanup,
EVP_CIPHER_meth_get_set_asn1_params,
EVP_CIPHER_meth_get_get_asn1_params,
EVP_CIPHER_meth_get_ctrl &minus; Routines to build up
EVP_CIPHER methods</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;openssl/evp.h&gt;</p>

<p style="margin-left:11%; margin-top: 1em">The following
functions have been deprecated since OpenSSL 3.0, and can be
hidden entirely by defining
<b><small>OPENSSL_API_COMPAT</small></b> with a suitable
version value, see <b>openssl_user_macros</b>(7):</p>

<p style="margin-left:11%; margin-top: 1em">EVP_CIPHER
*EVP_CIPHER_meth_new(int cipher_type, int block_size, int
key_len); <br>
EVP_CIPHER *EVP_CIPHER_meth_dup(const EVP_CIPHER *cipher);
<br>
void EVP_CIPHER_meth_free(EVP_CIPHER *cipher); <br>
int EVP_CIPHER_meth_set_iv_length(EVP_CIPHER *cipher, int
iv_len); <br>
int EVP_CIPHER_meth_set_flags(EVP_CIPHER *cipher, unsigned
long flags); <br>
int EVP_CIPHER_meth_set_impl_ctx_size(EVP_CIPHER *cipher,
int ctx_size); <br>
int EVP_CIPHER_meth_set_init(EVP_CIPHER *cipher, <br>
int (*init)(EVP_CIPHER_CTX *ctx, <br>
const unsigned char *key, <br>
const unsigned char *iv, <br>
int enc)); <br>
int EVP_CIPHER_meth_set_do_cipher(EVP_CIPHER *cipher, <br>
int (*do_cipher)(EVP_CIPHER_CTX *ctx, <br>
unsigned char *out, <br>
const unsigned char *in, <br>
size_t inl)); <br>
int EVP_CIPHER_meth_set_cleanup(EVP_CIPHER *cipher, <br>
int (*cleanup)(EVP_CIPHER_CTX *)); <br>
int EVP_CIPHER_meth_set_set_asn1_params(EVP_CIPHER *cipher,
<br>
int (*set_asn1_parameters)(EVP_CIPHER_CTX *, <br>
ASN1_TYPE *)); <br>
int EVP_CIPHER_meth_set_get_asn1_params(EVP_CIPHER *cipher,
<br>
int (*get_asn1_parameters)(EVP_CIPHER_CTX *, <br>
ASN1_TYPE *)); <br>
int EVP_CIPHER_meth_set_ctrl(EVP_CIPHER *cipher, <br>
int (*ctrl)(EVP_CIPHER_CTX *, int type, <br>
int arg, void *ptr)); <br>
int (*EVP_CIPHER_meth_get_init(const EVP_CIPHER
*cipher))(EVP_CIPHER_CTX *ctx, <br>
const unsigned char *key, <br>
const unsigned char *iv, <br>
int enc); <br>
int (*EVP_CIPHER_meth_get_do_cipher(const EVP_CIPHER
*cipher))(EVP_CIPHER_CTX *ctx, <br>
unsigned char *out, <br>
const unsigned char *in, <br>
size_t inl); <br>
int (*EVP_CIPHER_meth_get_cleanup(const EVP_CIPHER
*cipher))(EVP_CIPHER_CTX *); <br>
int (*EVP_CIPHER_meth_get_set_asn1_params(const EVP_CIPHER
*cipher))(EVP_CIPHER_CTX *, <br>
ASN1_TYPE *); <br>
int (*EVP_CIPHER_meth_get_get_asn1_params(const EVP_CIPHER
*cipher))(EVP_CIPHER_CTX *, <br>
ASN1_TYPE *); <br>
int (*EVP_CIPHER_meth_get_ctrl(const EVP_CIPHER
*cipher))(EVP_CIPHER_CTX *, <br>
int type, int arg, <br>
void *ptr);</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All of the
functions described on this page are deprecated.
Applications should instead use the
<small>OSSL_PROVIDER</small> APIs.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b><small>EVP_CIPHER</small></b> type is a structure for
symmetric cipher method implementation.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_new()</b>
creates a new <b><small>EVP_CIPHER</small></b>
structure.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_dup()</b>
creates a copy of <b>cipher</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_free()</b>
destroys a <b><small>EVP_CIPHER</small></b> structure.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_set_iv_length()</b>
sets the length of the <small>IV.</small> This is only
needed when the implemented cipher mode requires it.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_set_flags()</b>
sets the flags to describe optional behaviours in the
particular <b>cipher</b>. With the exception of cipher
modes, of which only one may be present, several flags can
be or&rsquo;d together. The available flags are: <small><br>
EVP_CIPH_STREAM_CIPHER, EVP_CIPH_ECB_MODE EVP_CIPH_CBC_MODE,
<br>
EVP_CIPH_CFB_MODE, EVP_CIPH_OFB_MODE, EVP_CIPH_CTR_MODE,
<br>
EVP_CIPH_GCM_MODE, EVP_CIPH_CCM_MODE, EVP_CIPH_XTS_MODE,
<br>
EVP_CIPH_WRAP_MODE, EVP_CIPH_OCB_MODE,
EVP_CIPH_SIV_MODE</small></p>

<p style="margin-left:17%;">The cipher mode.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_VARIABLE_LENGTH</small></p>

<p style="margin-left:17%;">This cipher is of variable
length.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_CUSTOM_IV</small></p>

<p style="margin-left:17%;">Storing and initialising the
<small>IV</small> is left entirely to the
implementation.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_ALWAYS_CALL_INIT</small></p>

<p style="margin-left:17%;">Set this if the
implementation&rsquo;s <b>init()</b> function should be
called even if <b>key</b> is <b><small>NULL</small></b>
.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_CTRL_INIT</small></p>

<p style="margin-left:17%;">Set this to have the
implementation&rsquo;s <b>ctrl()</b> function called with
command code <b><small>EVP_CTRL_INIT</small></b> early in
its setup.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_CUSTOM_KEY_LENGTH</small></p>

<p style="margin-left:17%;">Checking and setting the key
length after creating the <b><small>EVP_CIPHER</small></b>
is left to the implementation. Whenever someone uses
<b>EVP_CIPHER_CTX_set_key_length()</b> on a
<b><small>EVP_CIPHER</small></b> with this flag set, the
implementation&rsquo;s <b>ctrl()</b> function will be called
with the control code
<b><small>EVP_CTRL_SET_KEY_LENGTH</small></b> and the key
length in <b>arg</b>.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_NO_PADDING</small></p>

<p style="margin-left:17%;">Don&rsquo;t use standard block
padding.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_RAND_KEY</small></p>

<p style="margin-left:17%;">Making a key with random
content is left to the implementation. This is done by
calling the implementation&rsquo;s <b>ctrl()</b> function
with the control code
<b><small>EVP_CTRL_RAND_KEY</small></b> and the pointer to
the key memory storage in <b>ptr</b>.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_CUSTOM_COPY</small></p>

<p style="margin-left:17%;">Set this to have the
implementation&rsquo;s <b>ctrl()</b> function called with
command code <b><small>EVP_CTRL_COPY</small></b> at the end
of <b>EVP_CIPHER_CTX_copy()</b>. The intended use is for
further things to deal with after the implementation
specific data block has been copied. The destination
<b><small>EVP_CIPHER_CTX</small></b> is passed to the
control with the <b>ptr</b> parameter. The implementation
specific data block is reached with
<b>EVP_CIPHER_CTX_get_cipher_data()</b>.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_FLAG_DEFAULT_ASN1</small></p>

<p style="margin-left:17%;">Use the default
<small>EVP</small> routines to pass <small>IV</small> to and
from <small>ASN.1.</small></p>


<p style="margin-left:11%;"><small>EVP_CIPH_FLAG_LENGTH_BITS</small></p>

<p style="margin-left:17%;">Signals that the length of the
input buffer for encryption / decryption is to be understood
as the number of bits instead of bytes for this
implementation. This is only useful for <small>CFB1</small>
ciphers.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_FLAG_CTS</small></p>

<p style="margin-left:17%;">Indicates that the cipher uses
ciphertext stealing. This is currently used to indicate that
the cipher is a one shot that only allows a single call to
<b>EVP_CipherUpdate()</b>.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_FLAG_CUSTOM_CIPHER</small></p>

<p style="margin-left:17%;">This indicates that the
implementation takes care of everything, including padding,
buffering and finalization. The <small>EVP</small> routines
will simply give them control and do nothing more.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_FLAG_AEAD_CIPHER</small></p>

<p style="margin-left:17%;">This indicates that this is an
<small>AEAD</small> cipher implementation.</p>


<p style="margin-left:11%;"><small>EVP_CIPH_FLAG_TLS1_1_MULTIBLOCK</small></p>

<p style="margin-left:17%;">Allow interleaving of crypto
blocks, a particular optimization only applicable to certain
<small>TLS</small> ciphers.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_set_impl_ctx_size()</b>
sets the size of the <small>EVP_CIPHER</small> &rsquo;s
implementation context so that it can be automatically
allocated.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_set_init()</b>
sets the cipher init function for <b>cipher</b>. The cipher
init function is called by <b>EVP_CipherInit()</b>,
<b>EVP_CipherInit_ex()</b>, <b>EVP_EncryptInit()</b>,
<b>EVP_EncryptInit_ex()</b>, <b>EVP_DecryptInit()</b>,
<b>EVP_DecryptInit_ex()</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_set_do_cipher()</b>
sets the cipher function for <b>cipher</b>. The cipher
function is called by <b>EVP_CipherUpdate()</b>,
<b>EVP_EncryptUpdate()</b>, <b>EVP_DecryptUpdate()</b>,
<b>EVP_CipherFinal()</b>, <b>EVP_EncryptFinal()</b>,
<b>EVP_EncryptFinal_ex()</b>, <b>EVP_DecryptFinal()</b> and
<b>EVP_DecryptFinal_ex()</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_set_cleanup()</b>
sets the function for <b>cipher</b> to do extra cleanup
before the method&rsquo;s private data structure is cleaned
out and freed. Note that the cleanup function is passed a
<b><small>EVP_CIPHER_CTX</small> *</b>, the private data
structure is then available with
<b>EVP_CIPHER_CTX_get_cipher_data()</b>. This cleanup
function is called by <b>EVP_CIPHER_CTX_reset()</b> and
<b>EVP_CIPHER_CTX_free()</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_set_set_asn1_params()</b>
sets the function for <b>cipher</b> to set the
AlgorithmIdentifier &quot;parameter&quot; based on the
passed cipher. This function is called by
<b>EVP_CIPHER_param_to_asn1()</b>.
<b>EVP_CIPHER_meth_set_get_asn1_params()</b> sets the
function for <b>cipher</b> that sets the cipher parameters
based on an <small>ASN.1</small> AlgorithmIdentifier
&quot;parameter&quot;. Both these functions are needed when
there is a need for custom data (more or other than the
cipher <small>IV</small> ). They are called by
<b>EVP_CIPHER_param_to_asn1()</b> and
<b>EVP_CIPHER_asn1_to_param()</b> respectively if
defined.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_set_ctrl()</b>
sets the control function for <b>cipher</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_get_init()</b>,
<b>EVP_CIPHER_meth_get_do_cipher()</b>,
<b>EVP_CIPHER_meth_get_cleanup()</b>,
<b>EVP_CIPHER_meth_get_set_asn1_params()</b>,
<b>EVP_CIPHER_meth_get_get_asn1_params()</b> and
<b>EVP_CIPHER_meth_get_ctrl()</b> are all used to retrieve
the method data given with the EVP_CIPHER_meth_set_*()
functions above.</p>

<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>EVP_CIPHER_meth_new()</b>
and <b>EVP_CIPHER_meth_dup()</b> return a pointer to a newly
created <b><small>EVP_CIPHER</small></b> , or
<small>NULL</small> on failure. All EVP_CIPHER_meth_set_*()
functions return 1. All EVP_CIPHER_meth_get_*() functions
return pointers to their respective <b>cipher</b>
function.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>EVP_EncryptInit</b>(3)</p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All of these
functions were deprecated in OpenSSL 3.0.</p>

<p style="margin-left:11%; margin-top: 1em">The functions
described here were added in OpenSSL 1.1.0. The
<b><small>EVP_CIPHER</small></b> structure created with
these functions became reference counted in OpenSSL 3.0.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
2016&minus;2021 The OpenSSL Project Authors. All Rights
Reserved.</p>

<p style="margin-left:11%; margin-top: 1em">Licensed under
the Apache License 2.0 (the &quot;License&quot;). You may
not use this file except in compliance with the License. You
can obtain a copy in the file <small>LICENSE</small> in the
source distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
<hr>
</body>
</html>
