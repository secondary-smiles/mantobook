<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:56:20 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>TPMLIB_GetTPMProperty</title>

</head>
<body>
<h1>TPMLIB_GetTPMProperty</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">TPMLIB_GetTPMProperty
&minus; Get a runtime property of the TPM</p>

<h2>LIBRARY
<a name="LIBRARY"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><small>TPM</small>
library (libtpms, &minus;ltpms)</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;libtpms/tpm_library.h</b>&gt;</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>TPM_RESULT</small>
TPMLIB_GetTPMProperty(enum TPMLIB_TPMProperty, int
*result);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>TPMLIB_GetTPMProperty()</b> call is used to retrieve
run-time parameters of the <small>TPM</small> such as the
number of authorization sessions it can hold or the maximum
sizes of the permanent state, savestate or volatile state
blobs.</p>

<p style="margin-left:11%; margin-top: 1em">This function
can be called before or after the <small>TPM</small> has
been created. The current implementation of libtpms will
return the same value before and after the
<small>TPM</small> was started.</p>

<p style="margin-left:11%; margin-top: 1em">With the
introduction of the function
<b>TPMLIB_ChooseTPMVersion()</b>, the call to this function
should be executed after the <small>TPM</small> version has
been chosen. The reason is that different <small>TPM</small>
versions may return different values.</p>

<p style="margin-left:11%; margin-top: 1em">The following
properties have been defined: <b><small><br>
TPMPROP_TPM_RSA_KEY_LENGTH_MAX</small></b></p>

<p style="margin-left:17%;">The maximum size of an
<small>RSA</small> key.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_BUFFER_MAX</small></b></p>

<p style="margin-left:17%;">The maximum sizes of the
<small>TPM</small> command and result buffers.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_KEY_HANDLES</small></b></p>

<p style="margin-left:17%;">The number of key slots.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_OWNER_EVICT_KEY_HANDLES</small></b></p>

<p style="margin-left:17%;">The number of owner-evict
keys.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_MIN_AUTH_SESSIONS</small></b></p>

<p style="margin-left:17%;">The number of authorization
sessions.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_MIN_TRANS_SESSIONS</small></b></p>

<p style="margin-left:17%;">The number of transport
sessions.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_MIN_DAA_SESSIONS</small></b></p>

<p style="margin-left:17%;">The number of
<small>DAA</small> sessions.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_MIN_SESSION_LIST</small></b></p>

<p style="margin-left:17%;">The size of the session
list.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_MIN_COUNTERS</small></b></p>

<p style="margin-left:17%;">The number of monotonic
counters.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_NUM_FAMILY_TABLE_ENTRY_MIN</small></b></p>

<p style="margin-left:17%;">The number of family
entries.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_NUM_DELEGATE_TABLE_ENTRY_MIN</small></b></p>

<p style="margin-left:17%;">The number of delegate
entries.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_SPACE_SAFETY_MARGIN</small></b></p>

<p style="margin-left:17%;">The space safety margin used
for the worst-case sizes of the savestate and volatile state
blobs. This safety margin is not used for the size of the
permanent data blob.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_MAX_NV_SPACE</small></b></p>

<p style="margin-left:17%;">The maximum size of the
permanent data blob.</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_MAX_SAVESTATE_SPACE</small></b></p>

<p style="margin-left:17%;">The maximum size of the
savestate blob (includes the space safety margin).</p>


<p style="margin-left:11%;"><b><small>TPMPROP_TPM_MAX_VOLATILESTATE_SPACE</small></b></p>

<p style="margin-left:17%;">The maximum size of the
volatile state blob (includes the space saferty margin).</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><small>TPM_SUCCESS</small></b></p>

<p style="margin-left:17%;">The function completed
successfully.</p>


<p style="margin-left:11%;"><b><small>TPM_FAIL</small></b></p>

<p style="margin-left:17%;">An undefined property was
queried.</p>

<p style="margin-left:11%; margin-top: 1em">For a complete
list of <small>TPM</small> error codes please consult the
include file <b>libtpms/tpm_error.h</b></p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;stdio.h&gt; <br>
#include &lt;libtpms/tpm_library.h&gt; <br>
#include &lt;libtpms/tpm_error.h&gt; <br>
int main(void) { <br>
TPM_RESULT res; <br>
int result; <br>
int rc = 0; <br>
if (TPMLIB_MainInit() != TPM_SUCCESS) { <br>
fprintf(stderr, &quot;Could not start the TPM.\n&quot;);
<br>
return 1; <br>
} <br>
if (TPMLIB_GetTPMProperty(TPMPROP_TPM_RSA_KEY_LENGTH_MAX,
&amp;result) <br>
!= TPM_SUCCESS) { <br>
fprintf(stderr, &quot;Could not read the max. size of RSA
keys.\n&quot;); <br>
goto err_exit; <br>
} <br>
fprintf(stdout, &quot;Max. size of RSA keys: %d\n&quot;,
result); <br>
err_exit: <br>
TPMLIB_Terminate(); <br>
return 0; <br>
}</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>TPMLIB_MainInit</b>(3),
<b>TPMLIB_Terminate</b>(3), <b>TPMLIB_Process</b>(3),
<b>TPMLIB_RegisterCallbacks</b>(3),
<b>TPMLIB_GetVersion</b>(3),
<b>TPMLIB_ChooseTPMVersion</b>(3)</p>
<hr>
</body>
</html>
