<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:55:45 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>OSSL_STORE_INFO</title>

</head>
<body>
<h1>OSSL_STORE_INFO_get1_PKEY</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">OSSL_STORE_INFO,
OSSL_STORE_INFO_get_type, OSSL_STORE_INFO_get0_NAME,
OSSL_STORE_INFO_get0_NAME_description,
OSSL_STORE_INFO_get0_PARAMS, OSSL_STORE_INFO_get0_PUBKEY,
OSSL_STORE_INFO_get0_PKEY, OSSL_STORE_INFO_get0_CERT,
OSSL_STORE_INFO_get0_CRL, OSSL_STORE_INFO_get1_NAME,
OSSL_STORE_INFO_get1_NAME_description,
OSSL_STORE_INFO_get1_PARAMS, OSSL_STORE_INFO_get1_PUBKEY,
OSSL_STORE_INFO_get1_PKEY, OSSL_STORE_INFO_get1_CERT,
OSSL_STORE_INFO_get1_CRL, OSSL_STORE_INFO_type_string,
OSSL_STORE_INFO_free, OSSL_STORE_INFO_new_NAME,
OSSL_STORE_INFO_set0_NAME_description,
OSSL_STORE_INFO_new_PARAMS, OSSL_STORE_INFO_new_PUBKEY,
OSSL_STORE_INFO_new_PKEY, OSSL_STORE_INFO_new_CERT,
OSSL_STORE_INFO_new_CRL, OSSL_STORE_INFO_new,
OSSL_STORE_INFO_get0_data &minus; Functions to manipulate
OSSL_STORE_INFO objects</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;openssl/store.h&gt; <br>
typedef struct ossl_store_info_st OSSL_STORE_INFO; <br>
int OSSL_STORE_INFO_get_type(const OSSL_STORE_INFO
*store_info); <br>
const char *OSSL_STORE_INFO_get0_NAME(const OSSL_STORE_INFO
*store_info); <br>
char *OSSL_STORE_INFO_get1_NAME(const OSSL_STORE_INFO
*store_info); <br>
const char *OSSL_STORE_INFO_get0_NAME_description(const
OSSL_STORE_INFO <br>
*store_info); <br>
char *OSSL_STORE_INFO_get1_NAME_description(const
OSSL_STORE_INFO *store_info); <br>
EVP_PKEY *OSSL_STORE_INFO_get0_PARAMS(const OSSL_STORE_INFO
*store_info); <br>
EVP_PKEY *OSSL_STORE_INFO_get1_PARAMS(const OSSL_STORE_INFO
*store_info); <br>
EVP_PKEY *OSSL_STORE_INFO_get0_PUBKEY(const OSSL_STORE_INFO
*info); <br>
EVP_PKEY *OSSL_STORE_INFO_get1_PUBKEY(const OSSL_STORE_INFO
*info); <br>
EVP_PKEY *OSSL_STORE_INFO_get0_PKEY(const OSSL_STORE_INFO
*store_info); <br>
EVP_PKEY *OSSL_STORE_INFO_get1_PKEY(const OSSL_STORE_INFO
*store_info); <br>
X509 *OSSL_STORE_INFO_get0_CERT(const OSSL_STORE_INFO
*store_info); <br>
X509 *OSSL_STORE_INFO_get1_CERT(const OSSL_STORE_INFO
*store_info); <br>
X509_CRL *OSSL_STORE_INFO_get0_CRL(const OSSL_STORE_INFO
*store_info); <br>
X509_CRL *OSSL_STORE_INFO_get1_CRL(const OSSL_STORE_INFO
*store_info); <br>
const char *OSSL_STORE_INFO_type_string(int type); <br>
void OSSL_STORE_INFO_free(OSSL_STORE_INFO *store_info); <br>
OSSL_STORE_INFO *OSSL_STORE_INFO_new_NAME(char *name); <br>
int OSSL_STORE_INFO_set0_NAME_description(OSSL_STORE_INFO
*info, char *desc); <br>
OSSL_STORE_INFO *OSSL_STORE_INFO_new_PARAMS(DSA
*dsa_params); <br>
OSSL_STORE_INFO *OSSL_STORE_INFO_new_PUBKEY(EVP_PKEY
*pubkey); <br>
OSSL_STORE_INFO *OSSL_STORE_INFO_new_PKEY(EVP_PKEY *pkey);
<br>
OSSL_STORE_INFO *OSSL_STORE_INFO_new_CERT(X509 *x509); <br>
OSSL_STORE_INFO *OSSL_STORE_INFO_new_CRL(X509_CRL *crl);
<br>
OSSL_STORE_INFO *OSSL_STORE_INFO_new(int type, void *data);
<br>
void *OSSL_STORE_INFO_get0_data(int type, const
OSSL_STORE_INFO *info);</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These functions
are primarily useful for applications to retrieve supported
objects from <b><small>OSSL_STORE_INFO</small></b> objects
and for scheme specific loaders to create
<b><small>OSSL_STORE_INFO</small></b> holders.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Types
<small><br>
OSSL_STORE_INFO</small></b> is an opaque type that&rsquo;s
just an intermediary holder for the objects that have been
retrieved by <b>OSSL_STORE_load()</b> and similar functions.
Supported OpenSSL type object can be extracted using one of
STORE_INFO_get0_&lt; <small>TYPE</small> &gt;() where &lt;
<small>TYPE</small> &gt; can be <small>NAME, PARAMS, PKEY,
CERT,</small> or <small>CRL.</small> The life time of this
extracted object is as long as the life time of the
<b><small>OSSL_STORE_INFO</small></b> it was extracted from,
so care should be taken not to free the latter too early. As
an alternative, STORE_INFO_get1_&lt; <small>TYPE</small>
&gt;() extracts a duplicate (or the same object with its
reference count increased), which can be used after the
containing <b><small>OSSL_STORE_INFO</small></b> has been
freed. The object returned by STORE_INFO_get1_&lt;
<small>TYPE</small> &gt;() must be freed separately by the
caller. See &quot; <small>SUPPORTED OBJECTS&quot;</small>
for more information on the types that are supported.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Functions
<br>
OSSL_STORE_INFO_get_type()</b> takes a
<b><small>OSSL_STORE_INFO</small></b> and returns the
<small>STORE</small> type number for the object inside.</p>


<p style="margin-left:11%; margin-top: 1em"><b>STORE_INFO_get_type_string()</b>
takes a <small>STORE</small> type number and returns a short
string describing it.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_get0_NAME()</b>,
<b>OSSL_STORE_INFO_get0_NAME_description()</b>,
<b>OSSL_STORE_INFO_get0_PARAMS()</b>,
<b>OSSL_STORE_INFO_get0_PUBKEY()</b>,
<b>OSSL_STORE_INFO_get0_PKEY()</b>,
<b>OSSL_STORE_INFO_get0_CERT()</b>,
<b>OSSL_STORE_INFO_get0_CRL()</b> all take a
<b><small>OSSL_STORE_INFO</small></b> and return the object
it holds if the <b><small>OSSL_STORE_INFO</small></b> type
(as returned by <b>OSSL_STORE_INFO_get_type()</b>) matches
the function, otherwise <small>NULL.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_get1_NAME()</b>,
<b>OSSL_STORE_INFO_get1_NAME_description()</b>,
<b>OSSL_STORE_INFO_get1_PARAMS()</b>,
<b>OSSL_STORE_INFO_get1_PUBKEY()</b>,
<b>OSSL_STORE_INFO_get1_PKEY()</b>,
<b>OSSL_STORE_INFO_get1_CERT()</b> and
<b>OSSL_STORE_INFO_get1_CRL()</b> all take a
<b><small>OSSL_STORE_INFO</small></b> and return a duplicate
the object it holds if the
<b><small>OSSL_STORE_INFO</small></b> type (as returned by
<b>OSSL_STORE_INFO_get_type()</b>) matches the function,
otherwise <small>NULL.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_free()</b>
frees a <b><small>OSSL_STORE_INFO</small></b> and its
contained type.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_new_NAME()</b>
, <b>OSSL_STORE_INFO_new_PARAMS()</b>, ,
<b>OSSL_STORE_INFO_new_PUBKEY()</b>,
<b>OSSL_STORE_INFO_new_PKEY()</b>,
<b>OSSL_STORE_INFO_new_CERT()</b> and
<b>OSSL_STORE_INFO_new_CRL()</b> create a
<b><small>OSSL_STORE_INFO</small></b> object to hold the
given input object. On success the input object is
consumed.</p>

<p style="margin-left:11%; margin-top: 1em">Additionally,
for <b><small>OSSL_STORE_INFO_NAME</small></b> objects,
<b>OSSL_STORE_INFO_set0_NAME_description()</b> can be used
to add an extra description. This description is meant to be
human readable and should be used for information
printout.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_new()</b>
creates a <b><small>OSSL_STORE_INFO</small></b> with an
arbitrary <i>type</i> number and <i>data</i> structure.
It&rsquo;s the responsibility of the caller to define type
numbers other than the ones defined by
<i>&lt;openssl/store.h&gt;</i>, and to handle freeing the
associated data structure on their own. <i>Using type
numbers that are defined by &lt;openssl/store.h&gt; may
cause undefined behaviours, including crashes</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_get0_data()</b>
returns the data pointer that was passed to
<b>OSSL_STORE_INFO_new()</b> if <i>type</i> matches the type
number in <i>info</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_new()</b>
and <b>OSSL_STORE_INFO_get0_data()</b> may be useful for
applications that define their own <small>STORE</small>
data, but must be used with care.</p>

<h2>SUPPORTED OBJECTS
<a name="SUPPORTED OBJECTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Currently
supported object types are: <small><br>
OSSL_STORE_INFO_NAME</small></p>

<p style="margin-left:17%;">A name is exactly that, a name.
It&rsquo;s like a name in a directory, but formatted as a
complete <small>URI.</small> For example, the path in
<small>URI</small> &quot;file:/foo/bar/&quot; could include
a file named &quot;cookie.pem&quot;, and in that case, the
returned <b><small>OSSL_STORE_INFO_NAME</small></b> object
would have the <small>URI</small>
&quot;file:/foo/bar/cookie.pem&quot;, which can be used by
the application to get the objects in that file. This can be
applied to all schemes that can somehow support a listing of
object URIs.</p>

<p style="margin-left:17%; margin-top: 1em">For
&quot;file:&quot; URIs that are used without the explicit
scheme, the returned name will be the path of each object,
so if &quot;/foo/bar&quot; was given and that path has the
file &quot;cookie.pem&quot;, the name
&quot;/foo/bar/cookie.pem&quot; will be returned.</p>

<p style="margin-left:17%; margin-top: 1em">The returned
<small>URI</small> is considered canonical and must be
unique and permanent for the storage where the object (or
collection of objects) resides. Each loader is responsible
for ensuring that it only returns canonical URIs. However,
it&rsquo;s possible that certain schemes allow an object (or
collection thereof) to be reached with alternative URIs;
just because one <small>URI</small> is canonical
doesn&rsquo;t mean that other variants can&rsquo;t be
used.</p>

<p style="margin-left:17%; margin-top: 1em">At the
discretion of the loader that was used to get these names,
an extra description may be attached as well.</p>


<p style="margin-left:11%;"><small>OSSL_STORE_INFO_PARAMS</small></p>

<p style="margin-left:17%;">Key parameters.</p>


<p style="margin-left:11%;"><small>OSSL_STORE_INFO_PKEY</small></p>

<p style="margin-left:17%;">A keypair or just a private key
(possibly with key parameters).</p>


<p style="margin-left:11%;"><small>OSSL_STORE_INFO_PUBKEY</small></p>

<p style="margin-left:17%;">A public key (possibly with key
parameters).</p>


<p style="margin-left:11%;"><small>OSSL_STORE_INFO_CERT</small></p>

<p style="margin-left:17%;">An X.509 certificate.</p>


<p style="margin-left:11%;"><small>OSSL_STORE_INFO_CRL</small></p>

<p style="margin-left:17%;">A X.509 certificate revocation
list.</p>

<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_get_type()</b>
returns the <small>STORE</small> type number of the given
<b><small>OSSL_STORE_INFO</small></b> . There is no error
value.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_get0_NAME()</b>,
<b>OSSL_STORE_INFO_get0_NAME_description()</b>,
<b>OSSL_STORE_INFO_get0_PARAMS()</b>,
<b>OSSL_STORE_INFO_get0_PKEY()</b>,
<b>OSSL_STORE_INFO_get0_CERT()</b> and
<b>OSSL_STORE_INFO_get0_CRL()</b> all return a pointer to
the OpenSSL object on success, <small>NULL</small>
otherwise.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_get1_NAME()</b>,
<b>OSSL_STORE_INFO_get1_NAME_description()</b>,
<b>OSSL_STORE_INFO_get1_PARAMS()</b>,
<b>OSSL_STORE_INFO_get1_PKEY()</b>,
<b>OSSL_STORE_INFO_get1_CERT()</b> and
<b>OSSL_STORE_INFO_get1_CRL()</b> all return a pointer to a
duplicate of the OpenSSL object on success,
<small>NULL</small> otherwise.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_type_string()</b>
returns a string on success, or <small>NULL</small> on
failure.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_new_NAME()</b>,
<b>OSSL_STORE_INFO_new_PARAMS()</b>,
<b>OSSL_STORE_INFO_new_PKEY()</b>,
<b>OSSL_STORE_INFO_new_CERT()</b> and
<b>OSSL_STORE_INFO_new_CRL()</b> return a
<b><small>OSSL_STORE_INFO</small></b> pointer on success, or
<small>NULL</small> on failure.</p>


<p style="margin-left:11%; margin-top: 1em"><b>OSSL_STORE_INFO_set0_NAME_description()</b>
returns 1 on success, or 0 on failure.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ossl_store</b>(7),
<b>OSSL_STORE_open</b>(3),
<b>OSSL_STORE_register_loader</b>(3)</p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<small>OSSL_STORE API</small> was added in OpenSSL
1.1.1.</p>

<p style="margin-left:11%; margin-top: 1em">The
<small>OSSL_STORE_INFO_PUBKEY</small> object type was added
in OpenSSL 3.0.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
2016&minus;2021 The OpenSSL Project Authors. All Rights
Reserved.</p>

<p style="margin-left:11%; margin-top: 1em">Licensed under
the Apache License 2.0 (the &quot;License&quot;). You may
not use this file except in compliance with the License. You
can obtain a copy in the file <small>LICENSE</small> in the
source distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
<hr>
</body>
</html>
