<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:54:29 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CURLOPT_DOH_SSL_VERIFYPEER</title>

</head>
<body>
<h1>CURLOPT_DOH_SSL_VERIFYPEER</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">CURLOPT_DOH_SSL_VERIFYPEER
&minus; verify the DoH SSL certificate</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;curl/curl.h&gt;</p>

<p style="margin-left:11%; margin-top: 1em">CURLcode
curl_easy_setopt(CURL *handle, CURLOPT_DOH_SSL_VERIFYPEER,
<br>
long verify);</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Pass a long as
parameter set to 1L to enable or 0L to disable.</p>

<p style="margin-left:11%; margin-top: 1em">This option
tells curl to verify the authenticity of the DoH
(DNS-over-HTTPS) server&rsquo;s certificate. A value of 1
means curl verifies; 0 (zero) means it does not.</p>

<p style="margin-left:11%; margin-top: 1em">This option is
the DoH equivalent of <i>CURLOPT_SSL_VERIFYPEER(3)</i> and
only affects requests to the DoH server.</p>

<p style="margin-left:11%; margin-top: 1em">When
negotiating a TLS or SSL connection, the server sends a
certificate indicating its identity. Curl verifies whether
the certificate is authentic, i.e. that you can trust that
the server is who the certificate says it is. This trust is
based on a chain of digital signatures, rooted in
certification authority (CA) certificates you supply. curl
uses a default bundle of CA certificates (the path for that
is determined at build time) and you can specify alternate
certificates with the <i>CURLOPT_CAINFO(3)</i> option or the
<i>CURLOPT_CAPATH(3)</i> option.</p>

<p style="margin-left:11%; margin-top: 1em">When
<i>CURLOPT_DOH_SSL_VERIFYPEER(3)</i> is enabled, and the
verification fails to prove that the certificate is
authentic, the connection fails. When the option is zero,
the peer certificate verification succeeds regardless.</p>

<p style="margin-left:11%; margin-top: 1em">Authenticating
the certificate is not enough to be sure about the server.
You typically also want to ensure that the server is the
server you mean to be talking to. Use
<i>CURLOPT_DOH_SSL_VERIFYHOST(3)</i> for that. The check
that the host name in the certificate is valid for the host
name you are connecting to is done independently of the
<i>CURLOPT_DOH_SSL_VERIFYPEER(3)</i> option.</p>

<p style="margin-left:11%; margin-top: 1em">WARNING:
disabling verification of the certificate allows bad guys to
man-in-the-middle the communication without you knowing it.
Disabling verification makes the communication insecure.
Just having encryption on a transfer is not enough as you
cannot be sure that you are communicating with the correct
end-point.</p>

<h2>DEFAULT
<a name="DEFAULT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">1</p>

<h2>PROTOCOLS
<a name="PROTOCOLS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">DoH</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CURL *curl =
curl_easy_init(); <br>
if(curl) { <br>
curl_easy_setopt(curl, CURLOPT_URL,
&quot;https://example.com&quot;);</p>


<p style="margin-left:11%; margin-top: 1em">curl_easy_setopt(curl,
CURLOPT_DOH_URL,
&quot;https://cloudflare-dns.com/dns-query&quot;);</p>

<p style="margin-left:11%; margin-top: 1em">/* Disable
certificate verification of the DoH server */ <br>
curl_easy_setopt(curl, CURLOPT_DOH_SSL_VERIFYPEER, 0L);</p>


<p style="margin-left:11%; margin-top: 1em">curl_easy_perform(curl);
<br>
}</p>

<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Added in
7.76.0</p>

<p style="margin-left:11%; margin-top: 1em">If built TLS
enabled.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Returns
CURLE_OK if the option is supported, and
CURLE_UNKNOWN_OPTION if not.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>CURLOPT_DOH_SSL_VERIFYHOST</b>(3),
<b>CURLOPT_SSL_VERIFYHOST</b>(3),
<b>CURLOPT_SSL_VERIFYPEER</b>(3),
<b>CURLOPT_PROXY_SSL_VERIFYPEER</b>(3),
<b>CURLOPT_PROXY_SSL_VERIFYHOST</b>(3),
<b>CURLOPT_CAINFO</b>(3), <b>CURLOPT_CAPATH</b>(3),</p>
<hr>
</body>
</html>
