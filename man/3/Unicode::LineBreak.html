<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:56:23 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Unicode::LineBreak</title>

</head>
<body>
<h1>Unicode::LineBreak</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Unicode::LineBreak
&minus; UAX #14 Unicode Line Breaking Algorithm</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">use
Unicode::LineBreak; <br>
$lb = Unicode::LineBreak&minus;&gt;new(); <br>
$broken = $lb&minus;&gt;break($string);</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Unicode::LineBreak
performs Line Breaking Algorithm described in Unicode
Standard Annex #14 [ <small>UAX</small> #14].
East_Asian_Width informative property defined by Annex #11 [
<small>UAX</small> #11] will be concerned to determine
breaking positions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Terminology</b>
<br>
Following terms are used for convenience.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Mandatory
break</b> is obligatory line breaking behavior defined by
core rules and performed regardless of surrounding
characters. <b>Arbitrary break</b> is line breaking behavior
allowed by core rules and chosen by user to perform it.
Arbitrary break includes <b>direct break</b> and <b>indirect
break</b> defined by [ <small>UAX</small> #14].</p>

<p style="margin-left:11%; margin-top: 1em"><b>Alphabetic
characters</b> are characters usually no line breaks are
allowed between pairs of them, except that other characters
provide break oppotunities. <b>Ideographic characters</b>
are characters that usually allow line breaks both before
and after themselves. [ <small>UAX</small> #14] classifies
most of alphabetic to <small>AL</small> and most of
ideographic to <small>ID</small> (These terms are inaccurate
from the point of view by grammatology). On several scripts,
breaking positions are not obvious by each characters
therefore heuristic based on dictionary is used.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Number of
columns</b> of a string is not always equal to the number of
characters it contains: Each of characters is either
<b>wide</b>, <b>narrow</b> or nonspacing; they occupy 2, 1
or 0 columns, respectively. Several characters may be both
wide and narrow by the contexts they are used. Characters
may have more various widths by customization.</p>

<h2>PUBLIC INTERFACE
<a name="PUBLIC INTERFACE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Line
Breaking</b> <br>
new ([ <small>KEY</small> =&gt; <small>VALUE, ...</small>
])</p>

<p style="margin-left:17%;"><i>Constructor</i>. About
<small>KEY</small> =&gt; <small>VALUE</small> pairs see
&quot;Options&quot;.</p>

<p style="margin-left:11%;">break ( <small>STRING</small>
)</p>

<p style="margin-left:17%;"><i>Instance method</i>. Break
Unicode string <small>STRING</small> and returns it. In
array context, returns array of lines contained in the
result.</p>

<p style="margin-left:11%;">break_partial (
<small>STRING</small> )</p>

<p style="margin-left:17%;"><i>Instance method</i>. Same as
<b>break()</b> but accepts incremental inputs. Give
&quot;undef&quot; as <small>STRING</small> argument to
specify that input was completed.</p>

<p style="margin-left:11%;">config ( <small>KEY</small> )
<br>
config ( <small>KEY</small> =&gt; <small>VALUE, ...</small>
)</p>

<p style="margin-left:17%;"><i>Instance method</i>. Get or
update configuration. About <small>KEY</small> =&gt;
<small>VALUE</small> pairs see &quot;Options&quot;.</p>

<p style="margin-left:11%;">copy</p>

<p style="margin-left:17%;"><i>Copy constructor</i>. Create
a copy of object instance.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Getting
Informations</b> <br>
breakingRule ( <small>BEFORESTR, AFTERSTR</small> )</p>

<p style="margin-left:17%;"><i>Instance method</i>. Get
possible line breaking behavior between strings
<small>BEFORESTR</small> and <small>AFTERSTR.</small> See
&quot;Constants&quot; for returned value.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
This method gives just approximate description of line
breaking behavior. Use <b>break()</b> and so on to wrap
actual texts.</p>

<p style="margin-left:11%;">context ([Charset =&gt;
<small>CHARSET</small> ], [Language =&gt;
<small>LANGUAGE</small> ])</p>

<p style="margin-left:17%;"><i>Function</i>. Get
language/region context used by character set
<small>CHARSET</small> or language
<small>LANGUAGE.</small></p>

<p style="margin-left:11%; margin-top: 1em"><b>Options</b>
<br>
&quot;new&quot; and &quot;config&quot; methods accept
following pairs. Some of them affect number of columns
([<b>E</b>]), grapheme cluster segmentation ([<b>G</b>])
(see also Unicode::GCString) or line breaking behavior
([<b>L</b>]). <br>
BreakIndent =&gt; &quot;YES&quot; | &quot;NO&quot;</p>

<p style="margin-left:17%;">[<b>L</b>] Always allows break
after SPACEs at beginning of line, a.k.a. indent. [
<small>UAX</small> #14] does not take account of such usage
of <small>SPACE.</small> Default is &quot;YES&quot;.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
This option was introduced at release 1.011.</p>

<p style="margin-left:11%;">CharMax =&gt;
<small>NUMBER</small></p>

<p style="margin-left:17%;">[<b>L</b>] Possible maximum
number of characters in one line, not counting trailing
SPACEs and newline sequence. Note that number of characters
generally doesn&rsquo;t represent length of line. Default is
998. 0 means unlimited (as of release 2012.01).</p>

<p style="margin-left:11%;">ColMin =&gt;
<small>NUMBER</small></p>

<p style="margin-left:17%;">[<b>L</b>] Minimum number of
columns which line broken arbitrarily may include, not
counting trailing spaces and newline sequences. Default is
0.</p>

<p style="margin-left:11%;">ColMax =&gt;
<small>NUMBER</small></p>

<p style="margin-left:17%;">[<b>L</b>] Maximum number of
columns line may include not counting trailing spaces and
newline sequence. In other words, maximum length of line.
Default is 76.</p>

<p style="margin-left:11%; margin-top: 1em">See also
&quot;Urgent&quot; option and &quot;User-Defined Breaking
Behaviors&quot;. <br>
ComplexBreaking =&gt; &quot;YES&quot; | &quot;NO&quot;</p>

<p style="margin-left:17%;">[<b>L</b>] Performs heuristic
breaking on South East Asian complex context. Default is, if
word segmentation for South East Asian writing systems is
enabled, &quot;YES&quot;.</p>

<p style="margin-left:11%;">Context =&gt;
<small>CONTEXT</small></p>

<p style="margin-left:17%;">[<b>E</b>][<b>L</b>] Specify
language/region context. Currently available contexts are
&quot;EASTASIAN&quot; and &quot;NONEASTASIAN&quot;. Default
context is &quot;NONEASTASIAN&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">In
&quot;EASTASIAN&quot; context, characters with
East_Asian_Width property ambiguous (A) are treated as
&quot;wide&quot; and with Line Breaking Class
<small>AI</small> as ideographic ( <small>ID</small> ).</p>

<p style="margin-left:17%; margin-top: 1em">In
&quot;NONEASTASIAN&quot; context, characters with
East_Asian_Width property ambiguous (A) are treated as
&quot;narrow&quot; and with Line Breaking Class
<small>AI</small> as alphabetic ( <small>AL</small> ).</p>

<p style="margin-left:11%;">EAWidth =&gt; &quot;[&quot;
<small>ORD</small> &quot;=&gt;&quot; <small>PROPERTY</small>
&quot;]&quot; <br>
EAWidth =&gt; &quot;undef&quot;</p>

<p style="margin-left:17%;">[<b>E</b>] Tailor
classification of East_Asian_Width property.
<small>ORD</small> is <small>UCS</small> scalar value of
character or array reference of them.
<small>PROPERTY</small> is one of East_Asian_Width property
values and extended values (See &quot;Constants&quot;). This
option may be specified multiple times. If &quot;undef&quot;
is specified, all tailoring assigned before will be
canceled.</p>

<p style="margin-left:17%; margin-top: 1em">By default, no
tailorings are available. See also &quot;Tailoring Character
Properties&quot;.</p>

<p style="margin-left:11%;">Format =&gt;
<small>METHOD</small></p>

<p style="margin-left:17%;">[<b>L</b>] Specify the method
to format broken lines. <br>
&quot;SIMPLE&quot;</p>

<p style="margin-left:23%;">Default method. Just only
insert newline at arbitrary breaking positions.</p>

<p style="margin-left:17%;">&quot;NEWLINE&quot;</p>

<p style="margin-left:23%;">Insert or replace newline
sequences with that specified by &quot;Newline&quot; option,
remove SPACEs leading newline sequences or end-of-text. Then
append newline at end of text if it does not exist.</p>

<p style="margin-left:17%;">&quot;TRIM&quot;</p>

<p style="margin-left:23%;">Insert newline at arbitrary
breaking positions. Remove SPACEs leading newline
sequences.</p>

<p style="margin-left:17%;">&quot;undef&quot;</p>

<p style="margin-left:23%;">Do nothing, even inserting any
newlines.</p>

<p style="margin-left:17%;">Subroutine reference</p>

<p style="margin-left:23%;">See &quot;Formatting
Lines&quot;.</p>

<p style="margin-left:11%;">HangulAsAL =&gt;
&quot;YES&quot; | &quot;NO&quot;</p>

<p style="margin-left:17%;">[<b>L</b>] Treat hangul
syllables and conjoining jamos as alphabetic characters (
<small>AL</small> ). Default is &quot;NO&quot;.</p>

<p style="margin-left:11%;">LBClass =&gt; &quot;[&quot;
<small>ORD</small> &quot;=&gt;&quot; <small>CLASS</small>
&quot;]&quot; <br>
LBClass =&gt; &quot;undef&quot;</p>

<p style="margin-left:17%;">[<b>G</b>][<b>L</b>] Tailor
classification of line breaking property. <small>ORD</small>
is <small>UCS</small> scalar value of character or array
reference of them. <small>CLASS</small> is one of line
breaking classes (See &quot;Constants&quot;). This option
may be specified multiple times. If &quot;undef&quot; is
specified, all tailoring assigned before will be
canceled.</p>

<p style="margin-left:17%; margin-top: 1em">By default, no
tailorings are available. See also &quot;Tailoring Character
Properties&quot;.</p>

<p style="margin-left:11%;">LegacyCM =&gt; &quot;YES&quot;
| &quot;NO&quot;</p>

<p style="margin-left:17%;">[<b>G</b>][<b>L</b>] Treat
combining characters lead by a <small>SPACE</small> as an
isolated combining character ( <small>ID</small> ). As of
Unicode 5.0, such use of <small>SPACE</small> is not
recommended. Default is &quot;YES&quot;.</p>

<p style="margin-left:11%;">Newline =&gt;
<small>STRING</small></p>

<p style="margin-left:17%;">[<b>L</b>] Unicode string to be
used for newline sequence. Default is &quot;\n&quot;.</p>

<p style="margin-left:11%;">Prep =&gt;
<small>METHOD</small></p>

<p style="margin-left:17%;">[<b>L</b>] Add user-defined
line breaking behavior(s). This option may be specified
multiple times. Following methods are available. <br>
&quot;NONBREAKURI&quot;</p>

<p style="margin-left:23%;">Won&rsquo;t break URIs.</p>

<p style="margin-left:17%;">&quot;BREAKURI&quot;</p>

<p style="margin-left:23%;">Break URIs according to a rule
suitable for printed materials. For more details see [
<small>CMOS</small> ], sections 6.17 and 17.11.</p>

<p style="margin-left:17%;">&quot;[&quot; <small>REGEX,
SUBREF</small> &quot;]&quot;</p>

<p style="margin-left:23%;">The sequences matching regular
expression <small>REGEX</small> will be broken by subroutine
referred by <small>SUBREF.</small> For more details see
&quot;User-Defined Breaking Behaviors&quot;.</p>

<p style="margin-left:17%;">&quot;undef&quot;</p>

<p style="margin-left:23%;">Cancel all methods assigned
before.</p>

<p style="margin-left:11%;">Sizing =&gt;
<small>METHOD</small></p>

<p style="margin-left:17%;">[<b>L</b>] Specify method to
calculate size of string. Following options are available.
<br>
&quot;UAX11&quot;</p>

<p style="margin-left:23%;">Default method. Sizes are
computed by columns of each characters accoring to built-in
character database.</p>

<p style="margin-left:17%;">&quot;undef&quot;</p>

<p style="margin-left:23%;">Number of grapheme clusters
(see Unicode::GCString) contained in the string.</p>

<p style="margin-left:17%;">Subroutine reference</p>

<p style="margin-left:23%;">See &quot;Calculating String
Size&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">See also
&quot;ColMax&quot;, &quot;ColMin&quot; and
&quot;EAWidth&quot; options.</p>

<p style="margin-left:11%;">Urgent =&gt;
<small>METHOD</small></p>

<p style="margin-left:17%;">[<b>L</b>] Specify method to
handle excessing lines. Following options are available.
<br>
&quot;CROAK&quot;</p>

<p style="margin-left:23%;">Print error message and
die.</p>

<p style="margin-left:17%;">&quot;FORCE&quot;</p>

<p style="margin-left:23%;">Force breaking excessing
fragment.</p>

<p style="margin-left:17%;">&quot;undef&quot;</p>

<p style="margin-left:23%;">Default method. Won&rsquo;t
break excessing fragment.</p>

<p style="margin-left:17%;">Subroutine reference</p>

<p style="margin-left:23%;">See &quot;User-Defined Breaking
Behaviors&quot;.</p>

<p style="margin-left:11%;">ViramaAsJoiner =&gt;
&quot;YES&quot; | &quot;NO&quot;</p>

<p style="margin-left:17%;">[<b>G</b>] Virama sign
(&quot;halant&quot; in Hindi, &quot;coeng&quot; in Khmer)
and its succeeding letter are not broken. Default is
&quot;YES&quot;. <b>Note</b>: This option was introduced by
release 2012.001_29. On previous releases, it was fixed to
&quot;NO&quot;. &quot;Default&quot; grapheme cluster defined
by [ <small>UAX</small> #29] does not include this
feature.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Constants</b>
<br>
&quot;EA_Na&quot;, &quot;EA_N&quot;, &quot;EA_A&quot;,
&quot;EA_W&quot;, &quot;EA_H&quot;, &quot;EA_F&quot;</p>

<p style="margin-left:17%;">Index values to specify six
East_Asian_Width property values defined by [
<small>UAX</small> #11]: narrow (Na), neutral (N), ambiguous
(A), wide (W), halfwidth (H) and fullwidth (F).</p>

<p style="margin-left:11%;">&quot;EA_Z&quot;</p>

<p style="margin-left:17%;">Index value to specify
nonspacing characters.</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
This &quot;nonspacing&quot; value is extension by this
module, not a part of [ <small>UAX</small> #11].</p>

<p style="margin-left:11%;">&quot;LB_BK&quot;,
&quot;LB_CR&quot;, &quot;LB_LF&quot;, &quot;LB_NL&quot;,
&quot;LB_SP&quot;, &quot;LB_OP&quot;, &quot;LB_CL&quot;,
&quot;LB_CP&quot;, <br>
&quot;LB_QU&quot;, &quot;LB_GL&quot;, &quot;LB_NS&quot;,
&quot;LB_EX&quot;, &quot;LB_SY&quot;, &quot;LB_IS&quot;,
&quot;LB_PR&quot;, &quot;LB_PO&quot;, <br>
&quot;LB_NU&quot;, &quot;LB_AL&quot;, &quot;LB_HL&quot;,
&quot;LB_ID&quot;, &quot;LB_IN&quot;, &quot;LB_HY&quot;,
&quot;LB_BA&quot;, &quot;LB_BB&quot;, <br>
&quot;LB_B2&quot;, &quot;LB_CB&quot;, &quot;LB_ZW&quot;,
&quot;LB_CM&quot;, &quot;LB_WJ&quot;, &quot;LB_H2&quot;,
&quot;LB_H3&quot;, &quot;LB_JL&quot;, <br>
&quot;LB_JV&quot;, &quot;LB_JT&quot;, &quot;LB_SG&quot;,
&quot;LB_AI&quot;, &quot;LB_CJ&quot;, &quot;LB_SA&quot;,
&quot;LB_XX&quot;, &quot;LB_RI&quot;</p>

<p style="margin-left:17%;">Index values to specify 40 line
breaking property values (classes) defined by [
<small>UAX</small> #14].</p>

<p style="margin-left:17%; margin-top: 1em"><b>Note</b>:
Property value <small>CP</small> was introduced by Unicode
5.2.0. Property values <small>HL</small> and
<small>CJ</small> were introduced by Unicode 6.1.0. Property
value <small>RI</small> was introduced by Unicode 6.2.0.</p>

<p style="margin-left:11%;">&quot;MANDATORY&quot;,
&quot;DIRECT&quot;, &quot;INDIRECT&quot;,
&quot;PROHIBITED&quot;</p>

<p style="margin-left:17%;">Four values to specify line
breaking behaviors: Mandatory break; Both direct break and
indirect break are allowed; Indirect break is allowed but
direct break is prohibited; Prohibited break.</p>


<p style="margin-left:11%;">&quot;Unicode::LineBreak::SouthEastAsian::supported&quot;</p>

<p style="margin-left:17%;">Flag to determin if word
segmentation for South East Asian writing systems is
enabled. If this feature was enabled, a non-empty string is
set. Otherwise, &quot;undef&quot; is set.</p>

<p style="margin-left:17%; margin-top: 1em"><b>N.B.</b>:
Current release supports Thai script of modern Thai language
only.</p>


<p style="margin-left:11%;">&quot;UNICODE_VERSION&quot;</p>

<p style="margin-left:17%;">A string to specify version of
Unicode standard this module refers.</p>

<h2>CUSTOMIZATION
<a name="CUSTOMIZATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Formatting
Lines</b> <br>
If you specify subroutine reference as a value of
&quot;Format&quot; option, it should accept three
arguments:</p>

<p style="margin-left:11%; margin-top: 1em">$MODIFIED =
&amp;subroutine(SELF, EVENT, STR);</p>


<p style="margin-left:11%; margin-top: 1em"><small>SELF</small>
is a Unicode::LineBreak object, <small>EVENT</small> is a
string to determine the context that subroutine was called
in, and <small>STR</small> is a fragment of Unicode string
leading or trailing breaking position.</p>

<p style="margin-left:11%; margin-top: 1em">EVENT |When
Fired |Value of STR <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
<br>
&quot;sot&quot; |Beginning of text |Fragment of first line
<br>
&quot;sop&quot; |After mandatory break|Fragment of next line
<br>
&quot;sol&quot; |After arbitrary break|Fragment on sequel of
line <br>
&quot;&quot; |Just before any |Complete line without
trailing <br>
|breaks |SPACEs <br>
&quot;eol&quot; |Arbitrary break |SPACEs leading breaking
position <br>
&quot;eop&quot; |Mandatory break |Newline and its leading
SPACEs <br>
&quot;eot&quot; |End of text |SPACEs (and newline) at end of
<br>
| |text <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;</p>

<p style="margin-left:11%; margin-top: 1em">Subroutine
should return modified text fragment or may return
&quot;undef&quot; to express that no modification occurred.
Note that modification in the context of &quot;sot&quot;,
&quot;sop&quot; or &quot;sol&quot; may affect decision of
successive breaking positions while in the others
won&rsquo;t.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note</b>:
String arguments are actually sequences of grapheme
clusters. See Unicode::GCString.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
following code folds lines removing trailing spaces:</p>

<p style="margin-left:11%; margin-top: 1em">sub fmt { <br>
if ($_[1] =~ /^eo/) { <br>
return &quot;\n&quot;; <br>
} <br>
return undef; <br>
} <br>
my $lb = Unicode::LineBreak&minus;&gt;new(Format =&gt;
\&amp;fmt); <br>
$output = $lb&minus;&gt;break($text);</p>


<p style="margin-left:11%; margin-top: 1em"><b>User-Defined
Breaking Behaviors</b> <br>
When a line generated by arbitrary break is expected to be
beyond measure of either CharMax, ColMax or ColMin,
<b>urgent break</b> may be performed on successive string.
If you specify subroutine reference as a value of
&quot;Urgent&quot; option, it should accept two
arguments:</p>

<p style="margin-left:11%; margin-top: 1em">@BROKEN =
&amp;subroutine(SELF, STR);</p>


<p style="margin-left:11%; margin-top: 1em"><small>SELF</small>
is a Unicode::LineBreak object and <small>STR</small> is a
Unicode string to be broken.</p>

<p style="margin-left:11%; margin-top: 1em">Subroutine
should return an array of broken string
<small>STR.</small></p>

<p style="margin-left:11%; margin-top: 1em"><b>Note</b>:
String argument is actually a sequence of grapheme clusters.
See Unicode::GCString.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
following code inserts hyphen to the name of several
chemical substances (such as Titin) so that it may be
folded:</p>

<p style="margin-left:11%; margin-top: 1em">sub hyphenize {
<br>
return map {$_ =~ s/yl$/yl&minus;/; $_} split
/(\w+?yl(?=\w))/, $_[1]; <br>
} <br>
my $lb = Unicode::LineBreak&minus;&gt;new(Urgent =&gt;
\&amp;hyphenize); <br>
$output =
$lb&minus;&gt;break(&quot;Methionylthreonylthreonylglutaminylarginyl...&quot;);</p>

<p style="margin-left:11%; margin-top: 1em">If you specify
[ <small>REGEX, SUBREF</small> ] array reference as any of
&quot;Prep&quot; option, subroutine should accept two
arguments:</p>

<p style="margin-left:11%; margin-top: 1em">@BROKEN =
&amp;subroutine(SELF, STR);</p>


<p style="margin-left:11%; margin-top: 1em"><small>SELF</small>
is a Unicode::LineBreak object and <small>STR</small> is a
Unicode string matched with <small>REGEX.</small></p>

<p style="margin-left:11%; margin-top: 1em">Subroutine
should return an array of broken string
<small>STR.</small></p>

<p style="margin-left:11%; margin-top: 1em">For example,
following code will break <small>HTTP</small> URLs using [
<small>CMOS</small> ] rule.</p>

<p style="margin-left:11%; margin-top: 1em">my $url =
qr{http://[\x21&minus;\x7E]+}i; <br>
sub breakurl { <br>
my $self = shift; <br>
my $str = shift; <br>
return split m{(?&lt;=[/]) (?=[^/]) | <br>
(?&lt;=[^&minus;.]) (?=[&minus;~.,_?\#%=&amp;]) | <br>
(?&lt;=[=&amp;]) (?=.)}x, $str; <br>
} <br>
my $lb = Unicode::LineBreak&minus;&gt;new(Prep =&gt; [$url,
\&amp;breakurl]); <br>
$output = $lb&minus;&gt;break($string);</p>

<p style="margin-left:11%; margin-top: 1em"><i>Preserving
State</i></p>


<p style="margin-left:11%; margin-top: 1em">Unicode::LineBreak
object can behave as hash reference. Any items may be
preserved throughout its life.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
following code will separate paragraphs with empty
lines.</p>

<p style="margin-left:11%; margin-top: 1em">sub paraformat
{ <br>
my $self = shift; <br>
my $action = shift; <br>
my $str = shift; <br>
if ($action eq 'sot' or $action eq 'sop') { <br>
$self&minus;&gt;{'line'} = ''; <br>
} elsif ($action eq '') { <br>
$self&minus;&gt;{'line'} = $str; <br>
} elsif ($action eq 'eol') { <br>
return &quot;\n&quot;; <br>
} elsif ($action eq 'eop') { <br>
if (length $self&minus;&gt;{'line'}) { <br>
return &quot;\n\n&quot;; <br>
} else { <br>
return &quot;\n&quot;; <br>
} <br>
} elsif ($action eq 'eot') { <br>
return &quot;\n&quot;; <br>
} <br>
return undef; <br>
} <br>
my $lb = Unicode::LineBreak&minus;&gt;new(Format =&gt;
\&amp;paraformat); <br>
$output = $lb&minus;&gt;break($string);</p>

<p style="margin-left:11%; margin-top: 1em"><b>Calculating
String Size</b> <br>
If you specify subroutine reference as a value of
&quot;Sizing&quot; option, it will be called with five
arguments:</p>

<p style="margin-left:11%; margin-top: 1em">$COLS =
&amp;subroutine(SELF, LEN, PRE, SPC, STR);</p>


<p style="margin-left:11%; margin-top: 1em"><small>SELF</small>
is a Unicode::LineBreak object, <small>LEN</small> is size
of preceding string, <small>PRE</small> is preceding Unicode
string, <small>SPC</small> is additional SPACEs and
<small>STR</small> is a Unicode string to be processed.</p>

<p style="margin-left:11%; margin-top: 1em">Subroutine
should return calculated number of columns of
&quot;PRE.SPC.STR&quot;. The number of columns may not be an
integer: Unit of the number may be freely chosen, however,
it should be same as those of &quot;ColMin&quot; and
&quot;ColMax&quot; option.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Note</b>:
String arguments are actually sequences of grapheme
clusters. See Unicode::GCString.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
following code processes lines with tab stops by each eight
columns.</p>

<p style="margin-left:11%; margin-top: 1em">sub
tabbedsizing { <br>
my ($self, $cols, $pre, $spc, $str) = @_; <br>
my $spcstr = $spc.$str; <br>
while ($spcstr&minus;&gt;lbc == LB_SP) { <br>
my $c = $spcstr&minus;&gt;item(0); <br>
if ($c eq &quot;\t&quot;) { <br>
$cols += 8 &minus; $cols % 8; <br>
} else { <br>
$cols += $c&minus;&gt;columns; <br>
} <br>
$spcstr = $spcstr&minus;&gt;substr(1); <br>
} <br>
$cols += $spcstr&minus;&gt;columns; <br>
return $cols; <br>
}; <br>
my $lb = Unicode::LineBreak&minus;&gt;new(LBClass =&gt;
[ord(&quot;\t&quot;) =&gt; LB_SP], <br>
Sizing =&gt; \&amp;tabbedsizing); <br>
$output = $lb&minus;&gt;break($string);</p>

<p style="margin-left:11%; margin-top: 1em"><b>Tailoring
Character Properties</b> <br>
Character properties may be tailored by &quot;LBClass&quot;
and &quot;EAWidth&quot; options. Some constants are defined
for convenience of tailoring.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Line
Breaking Properties</i></p>

<p style="margin-left:11%; margin-top: 1em">Non-starters of
Kana-like Characters</p>

<p style="margin-left:11%; margin-top: 1em">By default,
several hiragana, katakana and characters corresponding to
kana are treated as non-starters ( <small>NS</small> or
<small>CJ</small> ). When the following pair(s) are
specified for value of &quot;LBClass&quot; option, these
characters are treated as normal ideographic characters (
<small>ID</small> ). <br>
&quot;KANA_NONSTARTERS() =&gt; LB_ID&quot;</p>

<p style="margin-left:17%;">All of characters below.</p>


<p style="margin-left:11%;">&quot;IDEOGRAPHIC_ITERATION_MARKS()
=&gt; LB_ID&quot;</p>

<p style="margin-left:17%;">Ideographic iteration marks.
U+3005 <small>IDEOGRAPHIC ITERATION MARK, U+303B VERTICAL
IDEOGRAPHIC ITERATION MARK, U+309D HIRAGANA ITERATION MARK,
U+309E HIRAGANA VOICED ITERATION MARK, U+30FD KATAKANA
ITERATION MARK</small> and U+30FE <small>KATAKANA VOICED
ITERATION MARK.</small></p>

<p style="margin-left:17%; margin-top: 1em">N.B. Some of
them are neither hiragana nor katakana.</p>

<p style="margin-left:11%;">&quot;KANA_SMALL_LETTERS()
=&gt; LB_ID&quot; <br>
&quot;KANA_PROLONGED_SOUND_MARKS() =&gt; LB_ID&quot;</p>

<p style="margin-left:17%;">Hiragana or katakana small
letters: Hiragana small letters U+3041 A, U+3043 I, U+3045
U, U+3047 E, U+3049 O, U+3063 <small>TU, U+3083 YA, U+3085
YU, U+3087 YO, U+308E WA, U+3095 KA, U+3096 KE.</small>
Katakana small letters U+30A1 A, U+30A3 I, U+30A5 U, U+30A7
E, U+30A9 O, U+30C3 <small>TU, U+30E3 YA, U+30E5 YU, U+30E7
YO, U+30EE WA, U+30F5 KA, U+30F6 KE.</small> Katakana
phonetic extensions U+31F0 <small>KU</small> &minus; U+31FF
<small>RO.</small> Halfwidth katakana small letters U+FF67 A
&minus; U+FF6F <small>TU.</small></p>

<p style="margin-left:17%; margin-top: 1em">Hiragana or
katakana prolonged sound marks: U+30FC KATAKANA-HIRAGANA
<small>PROLONGED SOUND MARK</small> and U+FF70
<small>HALFWIDTH</small> KATAKANA-HIRAGANA <small>PROLONGED
SOUND MARK.</small></p>

<p style="margin-left:17%; margin-top: 1em">N.B. These
letters are optionally treated either as non-starter or as
normal ideographic. See [ <small>JIS X 4051</small> ] 6.1.1,
[ <small>JLREQ</small> ] 3.1.7 or [ <small>UAX14</small>
].</p>

<p style="margin-left:17%; margin-top: 1em">N.B. U+3095,
U+3096, U+30F5, U+30F6 are considered to be neither hiragana
nor katakana.</p>

<p style="margin-left:11%;">&quot;MASU_MARK() =&gt;
LB_ID&quot;</p>

<p style="margin-left:17%;">U+303C <small>MASU
MARK.</small></p>

<p style="margin-left:17%; margin-top: 1em">N.B. Although
this character is not kana, it is usually regarded as
abbreviation to sequence of hiragana &atilde;&frac34;
&atilde; or katakana &atilde; &atilde;&sup1;,
<small>MA</small> and <small>SU.</small></p>

<p style="margin-left:17%; margin-top: 1em">N.B. This
character is classified as non-starter ( <small>NS</small> )
by [ <small>UAX</small> #14] and as the class corresponding
to <small>ID</small> by [ <small>JIS X 4051</small> ] and [
<small>JLREQ</small> ].</p>

<p style="margin-left:11%; margin-top: 1em">Ambiguous
Quotation Marks</p>

<p style="margin-left:11%; margin-top: 1em">By default,
some punctuations are ambiguous quotation marks (
<small>QU</small> ). <br>
&quot;BACKWARD_QUOTES() =&gt; LB_OP, FORWARD_QUOTES() =&gt;
LB_CL&quot;</p>

<p style="margin-left:17%;">Some languages (Dutch, English,
Italian, Portugese, Spanish, Turkish and most East Asian)
use rotated&minus;9&minus;style punctuations (&acirc;
&acirc;) as opening and 9&minus;style punctuations (&acirc;
&acirc;) as closing quotation marks.</p>

<p style="margin-left:11%;">&quot;FORWARD_QUOTES() =&gt;
LB_OP, BACKWARD_QUOTES() =&gt; LB_CL&quot;</p>

<p style="margin-left:17%;">Some others (Czech, German and
Slovak) use 9&minus;style punctuations (&acirc; &acirc;) as
opening and rotated&minus;9&minus;style punctuations
(&acirc; &acirc;) as closing quotation marks.</p>

<p style="margin-left:11%;">&quot;BACKWARD_GUILLEMETS()
=&gt; LB_OP, FORWARD_GUILLEMETS() =&gt; LB_CL&quot;</p>

<p style="margin-left:17%;">French, Greek, Russian etc. use
left-pointing guillemets (&Acirc;&laquo; &acirc;&sup1;) as
opening and right-pointing guillemets (&Acirc;&raquo;
&acirc;&ordm;) as closing quotation marks.</p>

<p style="margin-left:11%;">&quot;FORWARD_GUILLEMETS()
=&gt; LB_OP, BACKWARD_GUILLEMETS() =&gt; LB_CL&quot;</p>

<p style="margin-left:17%;">German and Slovak use
right-pointing guillemets (&Acirc;&raquo; &acirc;&ordm;) as
opening and left-pointing guillemets (&Acirc;&laquo;
&acirc;&sup1;) as closing quotation marks.</p>

<p style="margin-left:11%; margin-top: 1em">Danish,
Finnish, Norwegian and Swedish use 9&minus;style or
right-pointing punctuations (&acirc; &acirc; &Acirc;&raquo;
&acirc;&ordm;) as both opening and closing quotation
marks.</p>


<p style="margin-left:11%; margin-top: 1em"><small>IDEOGRAPHIC
SPACE</small> <br>
&quot;IDEOGRAPHIC_SPACE() =&gt; LB_BA&quot;</p>

<p style="margin-left:17%;">U+3000 <small>IDEOGRAPHIC
SPACE</small> won&rsquo;t be placed at beginning of line.
This is default behavior.</p>

<p style="margin-left:11%;">&quot;IDEOGRAPHIC_SPACE() =&gt;
LB_ID&quot;</p>

<p style="margin-left:17%;"><small>IDEOGRAPHIC
SPACE</small> can be placed at beginning of line. This was
default behavior by Unicode 6.2 and earlier.</p>

<p style="margin-left:11%;">&quot;IDEOGRAPHIC_SPACE() =&gt;
LB_SP&quot;</p>

<p style="margin-left:17%;"><small>IDEOGRAPHIC
SPACE</small> won&rsquo;t be placed at beginning of line,
and will protrude from end of line.</p>


<p style="margin-left:11%; margin-top: 1em"><i>East_Asian_Width
Properties</i></p>

<p style="margin-left:11%; margin-top: 1em">Some particular
letters of Latin, Greek and Cyrillic scripts have ambiguous
(A) East_Asian_Width property. Thus, these characters are
treated as wide in &quot;EASTASIAN&quot; context. Specifying
&quot;EAWidth =&gt; [ AMBIGUOUS_&quot;*&quot;() =&gt; EA_N
]&quot;, those characters are always treated as narrow. <br>
&quot;AMBIGUOUS_ALPHABETICS() =&gt; EA_N&quot;</p>

<p style="margin-left:17%;">Treat all of characters below
as East_Asian_Width neutral (N).</p>

<p style="margin-left:11%;">&quot;AMBIGUOUS_CYRILLIC()
=&gt; EA_N&quot; <br>
&quot;AMBIGUOUS_GREEK() =&gt; EA_N&quot; <br>
&quot;AMBIGUOUS_LATIN() =&gt; EA_N&quot;</p>

<p style="margin-left:17%;">Treate letters having ambiguous
(A) width of Cyrillic, Greek and Latin scripts as neutral
(N).</p>

<p style="margin-left:11%; margin-top: 1em">On the other
hand, despite several characters were occasionally rendered
as wide characters by number of implementations for East
Asian character sets, they are given narrow (Na)
East_Asian_Width property just because they have fullwidth
(F) compatibility characters. Specifying &quot;EAWidth&quot;
as below, those characters are treated as ambiguous
&minus;&minus;&minus; wide on &quot;EASTASIAN&quot; context.
<br>
&quot;QUESTIONABLE_NARROW_SIGNS() =&gt; EA_A&quot;</p>

<p style="margin-left:17%;">U+00A2 <small>CENT SIGN, U+00A3
POUND SIGN, U+00A5 YEN SIGN</small> (or yuan sign), U+00A6
<small>BROKEN BAR, U+00AC NOT SIGN, U+00AF
MACRON.</small></p>


<p style="margin-left:11%; margin-top: 1em"><b>Configuration
File</b> <br>
Built-in defaults of option parameters for &quot;new&quot;
and &quot;config&quot; method can be overridden by
configuration files: <i>Unicode/LineBreak/Defaults.pm</i>.
For more details read
<i>Unicode/LineBreak/Defaults.pm.sample</i>.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Please report
bugs or buggy behaviors to developer.</p>


<p style="margin-left:11%; margin-top: 1em"><small>CPAN</small>
Request Tracker:
&lt;http://rt.cpan.org/Public/Dist/Display.html?Name=Unicode&minus;LineBreak&gt;.</p>

<h2>VERSION
<a name="VERSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Consult
$VERSION variable.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Incompatible
Changes</b> <br>
Release 2012.06</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><b>eawidth()</b> method was deprecated.
&quot;columns&quot; in Unicode::GCString may be used
instead.</p> </td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><b>lbclass()</b> method was deprecated. Use
&quot;lbc&quot; in Unicode::GCString or &quot;lbcext&quot;
in Unicode::GCString.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Conformance
to Standards</b> <br>
Character properties this module is based on are defined by
Unicode Standard version 8.0.0.</p>

<p style="margin-left:11%; margin-top: 1em">This module is
intended to implement <small>UAX14&minus;C2.</small></p>

<h2>IMPLEMENTATION NOTES
<a name="IMPLEMENTATION NOTES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Some ideographic characters may
be treated either as <small>NS</small> or as
<small>ID</small> by choice.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Hangul syllables and conjoining jamos may be treated as
either <small>ID</small> or <small>AL</small> by choice.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Characters assigned to <small>AI</small> may be resolved
to either <small>AL</small> or <small>ID</small> by
choice.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Character(s) assigned to <small>CB</small> are not
resolved.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Characters assigned to <small>CJ</small> are always
resolved to <small>NS.</small> More flexible tailoring
mechanism is provided.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When word segmentation for South East Asian writing
systems is not supported, characters assigned to
<small>SA</small> are resolved to <small>AL,</small> except
that characters that have Grapheme_Cluster_Break property
value Extend or SpacingMark be resolved to
<small>CM.</small></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Characters assigned to <small>SG</small> or
<small>XX</small> are resolved to <small>AL.</small></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Code points of following <small>UCS</small> ranges are
given fixed property values even if they have not been
assigned any characers.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Ranges | UAX
#14 | UAX #11 | Description <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
<br>
U+20A0..U+20CF | PR [*1] | N [*2] | Currency symbols <br>
U+3400..U+4DBF | ID | W | CJK ideographs <br>
U+4E00..U+9FFF | ID | W | CJK ideographs <br>
U+D800..U+DFFF | AL (SG) | N | Surrogates <br>
U+E000..U+F8FF | AL (XX) | F or N (A) | Private use <br>
U+F900..U+FAFF | ID | W | CJK ideographs <br>
U+20000..U+2FFFD | ID | W | CJK ideographs <br>
U+30000..U+3FFFD | ID | W | Old hanzi <br>
U+F0000..U+FFFFD | AL (XX) | F or N (A) | Private use <br>
U+100000..U+10FFFD | AL (XX) | F or N (A) | Private use <br>
Other unassigned | AL (XX) | N | Unassigned, <br>
| | | reserved or <br>
| | | noncharacters <br>

&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
<br>
[*1] Except U+20A7 PESETA SIGN (PO), <br>
U+20B6 LIVRE TOURNOIS SIGN (PO), U+20BB NORDIC MARK SIGN
(PO) <br>
and U+20BE LARI SIGN (PO). <br>
[*2] Except U+20A9 WON SIGN (H) and U+20AC EURO SIGN <br>
(F or N (A)).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Characters belonging to General
Category Mn, Me, Cc, Cf, Zl or Zp are treated as nonspacing
by this module.</p></td></tr>
</table>

<h2>REFERENCES
<a name="REFERENCES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">[
<small>CMOS</small> ]</p>

<p style="margin-left:17%;"><i>The Chicago Manual of
Style</i>, 15th edition. University of Chicago Press,
2003.</p>

<p style="margin-left:11%;">[ <small>JIS X 4051</small>
]</p>

<p style="margin-left:17%;"><small>JIS X 4051:2004</small>
<i>&aelig;&yen;&aelig;&not;&egrave;&ordf;&aelig;&aelig;&cedil;&atilde;&reg;&ccedil;&micro;&ccedil;&aelig;&sup1;&aelig;&sup3;</i>
(<i>Formatting Rules for Japanese Documents</i>). Japanese
Standards Association, 2004.</p>

<p style="margin-left:11%;">[ <small>JLREQ</small> ]</p>

<p style="margin-left:17%;">Anan, Yasuhiro et al.
<i>Requirements for Japanese Text Layout</i>, W3C Working
Group Note 3 April 2012.
&lt;http://www.w3.org/TR/2012/NOTE&minus;jlreq&minus;20120403/&gt;.</p>

<p style="margin-left:11%;">[ <small>UAX</small> #11]</p>

<p style="margin-left:17%;">A. Freytag (ed.)
(2008&minus;2009). <i>Unicode Standard Annex #11: East Asian
Width</i>, Revisions 17&minus;19.
&lt;http://unicode.org/reports/tr11/&gt;.</p>

<p style="margin-left:11%;">[ <small>UAX</small> #14]</p>

<p style="margin-left:17%;">A. Freytag and A. Heninger
(eds.) (2008&minus;2015). <i>Unicode Standard Annex #14:
Unicode Line Breaking Algorithm</i>, Revisions 22&minus;35.
&lt;http://unicode.org/reports/tr14/&gt;.</p>

<p style="margin-left:11%;">[ <small>UAX</small> #29]</p>

<p style="margin-left:17%;">Mark Davis (ed.)
(2009&minus;2013). <i>Unicode Standard Annex #29: Unicode
Text Segmentation</i>, Revisions 15&minus;23.
&lt;http://www.unicode.org/reports/tr29/&gt;.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Text::LineFold,
Text::Wrap, Unicode::GCString.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2009&minus;2018 Hatuka*nezumi &minus; <small>IKEDA</small>
Soji &lt;hatuka(at)nezumi.nu&gt;.</p>

<p style="margin-left:11%; margin-top: 1em">This program is
free software; you can redistribute it and/or modify it
under the same terms as Perl itself.</p>
<hr>
</body>
</html>
