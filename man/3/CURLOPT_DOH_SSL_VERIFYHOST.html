<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:54:29 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CURLOPT_DOH_SSL_VERIFYHOST</title>

</head>
<body>
<h1>CURLOPT_DOH_SSL_VERIFYHOST</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">CURLOPT_DOH_SSL_VERIFYHOST
&minus; verify the host name in the DoH SSL certificate</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;curl/curl.h&gt;</p>

<p style="margin-left:11%; margin-top: 1em">CURLcode
curl_easy_setopt(CURL *handle, CURLOPT_DOH_SSL_VERIFYHOST,
<br>
long verify);</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Pass a long set
to 2L as asking curl to <i>verify</i> the DoH
(DNS-over-HTTPS) server&rsquo;s certificate name fields
against the host name.</p>

<p style="margin-left:11%; margin-top: 1em">This option is
the DoH equivalent of <i>CURLOPT_SSL_VERIFYHOST(3)</i> and
only affects requests to the DoH server.</p>

<p style="margin-left:11%; margin-top: 1em">When
<i>CURLOPT_DOH_SSL_VERIFYHOST(3)</i> is 2, the SSL
certificate provided by the DoH server must indicate that
the server name is the same as the server name to which you
meant to connect to, or the connection fails.</p>

<p style="margin-left:11%; margin-top: 1em">Curl considers
the DoH server the intended one when the Common Name field
or a Subject Alternate Name field in the certificate matches
the host name in the DoH URL to which you told Curl to
connect.</p>

<p style="margin-left:11%; margin-top: 1em">When the
<i>verify</i> value is set to 1L it is treated the same as
2L. However for consistency with the other <i>VERIFYHOST</i>
options we suggest use 2 and not 1.</p>

<p style="margin-left:11%; margin-top: 1em">When the
<i>verify</i> value is set to 0L, the connection succeeds
regardless of the names used in the certificate. Use that
ability with caution!</p>

<p style="margin-left:11%; margin-top: 1em">See also
<i>CURLOPT_DOH_SSL_VERIFYPEER(3)</i> to verify the digital
signature of the DoH server certificate. If libcurl is built
against NSS and <i>CURLOPT_DOH_SSL_VERIFYPEER(3)</i> is
zero, <i>CURLOPT_DOH_SSL_VERIFYHOST(3)</i> is also set to
zero and cannot be overridden.</p>

<h2>DEFAULT
<a name="DEFAULT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">2</p>

<h2>PROTOCOLS
<a name="PROTOCOLS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">DoH</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">CURL *curl =
curl_easy_init(); <br>
if(curl) { <br>
curl_easy_setopt(curl, CURLOPT_URL,
&quot;https://example.com&quot;);</p>


<p style="margin-left:11%; margin-top: 1em">curl_easy_setopt(curl,
CURLOPT_DOH_URL,
&quot;https://cloudflare-dns.com/dns-query&quot;);</p>

<p style="margin-left:11%; margin-top: 1em">/* Disable host
name verification of the DoH server */ <br>
curl_easy_setopt(curl, CURLOPT_DOH_SSL_VERIFYHOST, 0L);</p>


<p style="margin-left:11%; margin-top: 1em">curl_easy_perform(curl);
<br>
}</p>

<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Added in
7.76.0</p>

<p style="margin-left:11%; margin-top: 1em">If built TLS
enabled.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Returns
CURLE_OK if the option is supported, and
CURLE_UNKNOWN_OPTION if not.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>CURLOPT_DOH_SSL_VERIFYPEER</b>(3),
<b>CURLOPT_SSL_VERIFYHOST</b>(3),
<b>CURLOPT_SSL_VERIFYPEER</b>(3),
<b>CURLOPT_PROXY_SSL_VERIFYPEER</b>(3),
<b>CURLOPT_PROXY_SSL_VERIFYHOST</b>(3),</p>
<hr>
</body>
</html>
