<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:54:16 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>ARES_GET_SERVERS</title>

</head>
<body>
<h1>ares_get_servers</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">ares_get_servers,
ares_get_servers_ports &minus; Retrieve name servers from an
initialized ares_channel</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;ares.h&gt;</p>

<p style="margin-left:11%; margin-top: 1em">int
ares_get_servers(ares_channel <i>channel</i>, <br>
struct ares_addr_node **<i>servers</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int
ares_get_servers_ports(ares_channel <i>channel</i>, <br>
struct ares_addr_port_node **<i>servers</i>)</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>ares_get_servers(3)</b> function retrieves name servers
configuration from the channel data identified by
<i>channel</i>, as a linked list of ares_addr_node structs
storing a pointer to the first node at the address specified
by <i>servers</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>ares_get_servers_ports(3)</b> function also retrieves any
per-server port information that may have been previously
configured, returning a linked list of ares_addr_port
structures.</p>

<p style="margin-left:11%; margin-top: 1em">Function caller
may traverse the returned name server linked list, or may
use it directly as suitable input for the
<b>ares_set_servers(3)</b> /
<b>ares_set_servers_ports(3)</b> functions, but shall not
shrink or extend the list on its own.</p>

<p style="margin-left:11%; margin-top: 1em">Each node of
the name server linked list is stored in memory dynamically
allocated and managed by c-ares. It is the caller&rsquo;s
responsibility to free the resulting linked list, using
<b>ares_free_data(3)</b> , once the caller does not need it
any longer.</p>

<p style="margin-left:11%; margin-top: 1em">This function
is capable of handling IPv4 and IPv6 name server addresses
simultaneously, rendering <b>ares_save_options(3)</b> with
optmask <b>ARES_OPT_SERVERS</b> functionally obsolete except
for IPv4-only name server usage.</p>

<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This function
may return any of the following values:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>ARES_SUCCESS</b></p></td>
<td width="5%"></td>
<td width="66%">


<p>The name servers configuration was successfully
retrieved</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>ARES_ENOMEM</b></p></td>
<td width="5%"></td>
<td width="66%">


<p>The memory was exhausted</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="18%">


<p><b>ARES_ENODATA</b></p></td>
<td width="5%"></td>
<td width="66%">


<p>The channel data identified by <i>channel</i> was
invalid.</p> </td></tr>
</table>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ares_set_servers</b>(3),
<b>ares_init_options</b>(3), <b>ares_save_options(3)</b></p>

<h2>AVAILABILITY
<a name="AVAILABILITY"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ares_get_servers(3)</b>
was added in c-ares 1.7.1; <b>ares_get_servers_ports(3)</b>
was added in c-ares 1.11.0.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Implementation
of this function and associated library internals are based
on code, comments and feedback provided in November and
December of 2008 by Daniel Stenberg, Gregor Jasny, Phil
Blundell and Yang Tse, December 2009 by Cedric Bail,
February 2010 by Jakub Hrozek. On March 2010 Yang Tse
shuffled all the bits and this function popped out. <br>
Copyright 1998 by the Massachusetts Institute of Technology.
<br>
Copyright (C) 2008-2010 by Daniel Stenberg</p>
<hr>
</body>
</html>
