<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:55:39 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>O</title>

</head>
<body>
<h1>O</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">O &minus;
Generic interface to Perl Compiler backends</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perl
&minus;MO=[&minus;q,]Backend[,OPTIONS] foo.pl</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This is the
module that is used as a frontend to the Perl Compiler.</p>

<p style="margin-left:11%; margin-top: 1em">If you pass the
&quot;&minus;q&quot; option to the module, then the
<small>STDOUT</small> filehandle will be redirected into the
variable $O::BEGIN_output during compilation. This has the
effect that any output printed to <small>STDOUT</small> by
<small>BEGIN</small> blocks or use&rsquo;d modules will be
stored in this variable rather than printed. It&rsquo;s
useful with those backends which produce output themselves
(&quot;Deparse&quot;, &quot;Concise&quot; etc), so that
their output is not confused with that generated by the code
being compiled.</p>

<p style="margin-left:11%; margin-top: 1em">The
&quot;&minus;qq&quot; option behaves like
&quot;&minus;q&quot;, except that it also closes
<small>STDERR</small> after deparsing has finished. This
suppresses the &quot;Syntax <small>OK&quot;</small> message
normally produced by perl.</p>

<h2>CONVENTIONS
<a name="CONVENTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Most compiler
backends use the following conventions:
<small>OPTIONS</small> consists of a comma-separated list of
words (no white-space). The &quot;&minus;v&quot; option
usually puts the backend into verbose mode. The
&quot;&minus;ofile&quot; option generates output to
<b>file</b> instead of stdout. The &quot;&minus;D&quot;
option followed by various letters turns on various internal
debugging flags. See the documentation for the desired
backend (named &quot;B::Backend&quot; for the example above)
to find out about that backend.</p>

<h2>IMPLEMENTATION
<a name="IMPLEMENTATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section is
only necessary for those who want to write a compiler
backend module that can be used via this module.</p>

<p style="margin-left:11%; margin-top: 1em">The
command-line mentioned in the <small>SYNOPSIS</small>
section corresponds to the Perl code</p>

<p style="margin-left:11%; margin-top: 1em">use O
(&quot;Backend&quot;, OPTIONS);</p>

<p style="margin-left:11%; margin-top: 1em">The
&quot;O::import&quot; function loads the appropriate
&quot;B::Backend&quot; module and calls its
&quot;compile&quot; function, passing it
<small>OPTIONS.</small> That function is expected to return
a sub reference which we&rsquo;ll call
<small>CALLBACK.</small> Next, the &quot;compile-only&quot;
flag is switched on (equivalent to the command-line option
&quot;&minus;c&quot;) and a <small>CHECK</small> block is
registered which calls <small>CALLBACK.</small> Thus the
main Perl program mentioned on the command-line is read in,
parsed and compiled into internal syntax tree form. Since
the &quot;&minus;c&quot; flag is set, the program does not
start running (excepting <small>BEGIN</small> blocks of
course) but the <small>CALLBACK</small> function registered
by the compiler backend is called.</p>

<p style="margin-left:11%; margin-top: 1em">In summary, a
compiler backend module should be called &quot;B::Foo&quot;
for some foo and live in the appropriate directory for that
name. It should define a function called
&quot;compile&quot;. When the user types</p>

<p style="margin-left:11%; margin-top: 1em">perl
&minus;MO=Foo,OPTIONS foo.pl</p>

<p style="margin-left:11%; margin-top: 1em">that function
is called and is passed those <small>OPTIONS</small> (split
on commas). It should return a sub ref to the main
compilation function. After the user&rsquo;s program is
loaded and parsed, that returned sub ref is invoked which
can then go ahead and do the compilation, usually by making
use of the &quot;B&quot; module&rsquo;s functionality.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
&quot;&minus;q&quot; and &quot;&minus;qq&quot; options
don&rsquo;t work correctly if perl isn&rsquo;t compiled with
PerlIO support : <small>STDOUT</small> will be closed
instead of being redirected to $O::BEGIN_output.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Malcolm
Beattie, &quot;mbeattie@sable.ox.ac.uk&quot;</p>
<hr>
</body>
</html>
