<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:54:59 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Exception::Class::Base</title>

</head>
<body>
<h1>Exception::Class::Base</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Exception::Class::Base
&minus; A base class for exception objects</p>

<h2>VERSION
<a name="VERSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">version
1.45</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">use
Exception::Class 'MyException'; <br>
eval { MyException&minus;&gt;throw( error =&gt; 'I feel
funny.' ) }; <br>
print $@&minus;&gt;error;</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This class is
the base class for all exceptions created by
Exception::Class. It provides a number of methods for
getting information about the exception.</p>

<h2>METHODS
<a name="METHODS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>MyException&minus;&gt;Trace($boolean)</b>
<br>
Each &quot;Exception::Class::Base&quot; subclass can be set
individually to include a stacktrace when the
&quot;as_string&quot; method is called. The default is to
not include a stacktrace. Calling this method with a value
changes this behavior. It always returns the current value
(after any change is applied).</p>

<p style="margin-left:11%; margin-top: 1em">This value is
inherited by any subclasses. However, if this value is set
for a subclass, it will thereafter be independent of the
value in &quot;Exception::Class::Base&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Do not call
this on the &quot;Exception::Class::Base&quot; class
directly or you&rsquo;ll change it for all exception classes
that use Exception::Class, including ones created in modules
you don&rsquo;t control.</p>

<p style="margin-left:11%; margin-top: 1em">This is a class
method, not an object method.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MyException&minus;&gt;UnsafeRefCapture($boolean)</b>
<br>
When a &quot;Devel::StackTrace&quot; object is created, it
walks through the stack and stores the arguments which were
passed to each subroutine on the stack. If any of these
arguments are references, then that means that the
&quot;Devel::StackTrace&quot; ends up increasing the ref
count of these references, delaying their destruction.</p>

<p style="margin-left:11%; margin-top: 1em">Since
&quot;Exception::Class::Base&quot; uses
&quot;Devel::StackTrace&quot; internally, this method
provides a way to tell &quot;Devel::StackTrace&quot; not to
store these references. Instead,
&quot;Devel::StackTrace&quot; replaces references with their
stringified representation.</p>

<p style="margin-left:11%; margin-top: 1em">This method
defaults to false. As with &quot;Trace&quot;, it is
inherited by subclasses but setting it in a subclass makes
it independent thereafter.</p>

<p style="margin-left:11%; margin-top: 1em">Do not call
this on the &quot;Exception::Class::Base&quot; class
directly or you&rsquo;ll change it for all exception classes
that use Exception::Class, including ones created in modules
you don&rsquo;t control.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MyException&minus;&gt;RespectOverload($boolean)</b>
<br>
When a &quot;Devel::StackTrace&quot; object stringifies, by
default it ignores stringification overloading on any
objects being dealt with.</p>

<p style="margin-left:11%; margin-top: 1em">Since
&quot;Exception::Class::Base&quot; uses
&quot;Devel::StackTrace&quot; internally, this method
provides a way to tell &quot;Devel::StackTrace&quot; to
respect overloading.</p>

<p style="margin-left:11%; margin-top: 1em">This method
defaults to false. As with &quot;Trace&quot;, it is
inherited by subclasses but setting it in a subclass makes
it independent thereafter.</p>

<p style="margin-left:11%; margin-top: 1em">Do not call
this on the &quot;Exception::Class::Base&quot; class
directly or you&rsquo;ll change it for all exception classes
that use Exception::Class, including ones created in modules
you don&rsquo;t control.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MyException&minus;&gt;MaxArgLength($boolean)</b>
<br>
When a &quot;Devel::StackTrace&quot; object stringifies, by
default it displays the full argument for each function.
This parameter can be used to limit the maximum length of
each argument.</p>

<p style="margin-left:11%; margin-top: 1em">Since
&quot;Exception::Class::Base&quot; uses
&quot;Devel::StackTrace&quot; internally, this method
provides a way to tell &quot;Devel::StackTrace&quot; to
limit the length of arguments.</p>

<p style="margin-left:11%; margin-top: 1em">This method
defaults to 0. As with &quot;Trace&quot;, it is inherited by
subclasses but setting it in a subclass makes it independent
thereafter.</p>

<p style="margin-left:11%; margin-top: 1em">Do not call
this on the &quot;Exception::Class::Base&quot; class
directly or you&rsquo;ll change it for all exception classes
that use Exception::Class, including ones created in modules
you don&rsquo;t control.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MyException&minus;&gt;Fields</b>
<br>
This method returns the extra fields defined for the given
class, as a list.</p>

<p style="margin-left:11%; margin-top: 1em">Do not call
this on the &quot;Exception::Class::Base&quot; class
directly or you&rsquo;ll change it for all exception classes
that use Exception::Class, including ones created in modules
you don&rsquo;t control.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MyException&minus;&gt;throw(
$message ) <br>
MyException&minus;&gt;throw( message =&gt; $message ) <br>
MyException&minus;&gt;throw( error =&gt; $error )</b> <br>
This method creates a new object with the given error
message. If no error message is given, this will be an empty
string. It then dies with this object as its argument.</p>

<p style="margin-left:11%; margin-top: 1em">This method
also takes a &quot;show_trace&quot; parameter which
indicates whether or not the particular exception object
being created should show a stacktrace when its
&quot;as_string&quot; method is called. This overrides the
value of &quot;Trace&quot; for this class if it is
given.</p>

<p style="margin-left:11%; margin-top: 1em">The frames
included in the trace can be controlled by the
&quot;ignore_class&quot; and &quot;ignore_package&quot;
parameters. These are passed directly to
Devel::Stacktrace&rsquo;s constructor. See
&quot;Devel::Stacktrace&quot; for more details. This class
<b>always</b> passes &quot;__PACKAGE__&quot; for
&quot;ignore_class&quot; and 'Exception::Class' for
&quot;ignore_package&quot;, in addition to any arguments you
provide.</p>

<p style="margin-left:11%; margin-top: 1em">If only a
single value is given to the constructor it is assumed to be
the message parameter.</p>

<p style="margin-left:11%; margin-top: 1em">Additional keys
corresponding to the fields defined for the particular
exception subclass will also be accepted.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MyException&minus;&gt;new(...)</b>
<br>
This method takes the same parameters as &quot;throw&quot;,
but instead of dying simply returns a new exception
object.</p>

<p style="margin-left:11%; margin-top: 1em">This method is
always called when constructing a new exception object via
the &quot;throw&quot; method.</p>


<p style="margin-left:11%; margin-top: 1em"><b>MyException&minus;&gt;description</b>
<br>
Returns the description for the given
&quot;Exception::Class::Base&quot; subclass. The
&quot;Exception::Class::Base&quot; class&rsquo;s description
is &quot;Generic exception&quot; (this may change in the
future). This is also an object method.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;rethrow</b>
<br>
Simply dies with the object as its sole argument. It&rsquo;s
just syntactic sugar. This does not change any of the
object&rsquo;s attribute values. However, it will cause
&quot;caller&quot; to report the die as coming from within
the &quot;Exception::Class::Base&quot; class rather than
where rethrow was called.</p>

<p style="margin-left:11%; margin-top: 1em">Of course, you
always have access to the original stacktrace for the
exception object.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;message
<br>
$exception&minus;&gt;error</b> <br>
Returns the error/message associated with the exception.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;pid</b>
<br>
Returns the pid at the time the exception was thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;uid</b>
<br>
Returns the real user id at the time the exception was
thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;gid</b>
<br>
Returns the real group id at the time the exception was
thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;euid</b>
<br>
Returns the effective user id at the time the exception was
thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;egid</b>
<br>
Returns the effective group id at the time the exception was
thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;time</b>
<br>
Returns the time in seconds since the epoch at the time the
exception was thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;package</b>
<br>
Returns the package from which the exception was thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;file</b>
<br>
Returns the file within which the exception was thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;line</b>
<br>
Returns the line where the exception was thrown.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;context_hash</b>
<br>
Returns a hash reference with the following keys:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="6%">


<p>time</p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="6%">


<p>pid</p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="6%">


<p>uid</p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="6%">


<p>euid</p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="6%">


<p>gid</p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="6%">


<p>egid</p></td>
<td width="77%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;field_hash</b>
<br>
Returns a hash reference where the keys are any fields
defined for the exception class and the values are the
values associated with the field in the given object.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;trace</b>
<br>
Returns the trace object associated with the object.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;show_trace($boolean)</b>
<br>
This method can be used to set whether or not a stack trace
is included when the as_string method is called or the
object is stringified.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;as_string</b>
<br>
Returns a string form of the error message (something like
what you&rsquo;d expect from die). If the class or object is
set to show traces then then the full trace is also
included. The result looks like
&quot;Carp::confess&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>$exception&minus;&gt;full_message</b>
<br>
Called by the &quot;as_string&quot; method to get the
message. By default, this is the same as calling the
&quot;message&quot; method, but may be overridden by a
subclass. See below for details.</p>

<h2>LIGHTWEIGHT EXCEPTIONS
<a name="LIGHTWEIGHT EXCEPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A lightweight
exception is one which records no information about its
context when it is created. This can be achieved by setting
&quot;$class&minus;&gt;NoContextInfo&quot; to a true
value.</p>

<p style="margin-left:11%; margin-top: 1em">You can make
this the default for a class of exceptions by setting it
after creating the class:</p>

<p style="margin-left:11%; margin-top: 1em">use
Exception::Class ( <br>
'LightWeight', <br>
'HeavyWeight', <br>
); <br>
LightWeight&minus;&gt;NoContextInfo(1);</p>

<p style="margin-left:11%; margin-top: 1em">A lightweight
exception does have a stack trace object, nor does it record
the time, pid, uid, euid, gid, or egid. It only has a
message.</p>

<h2>OVERLOADING
<a name="OVERLOADING"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&quot;Exception::Class::Base&quot;
objects are overloaded so that stringification produces a
normal error message. This just calls the
&quot;$exception&minus;&gt;as_string&quot; method described
above. This means that you can just &quot;print $@&quot;
after an &quot;eval&quot; and not worry about whether or not
its an actual object. It also means an application or module
could do this:</p>

<p style="margin-left:11%; margin-top: 1em">$SIG{__DIE__} =
sub { Exception::Class::Base&minus;&gt;throw( error =&gt;
join '', @_ ); };</p>

<p style="margin-left:11%; margin-top: 1em">and this would
probably not break anything (unless someone was expecting a
different type of exception object from
&quot;die&quot;).</p>

<h2>OVERRIDING THE as_string METHOD
<a name="OVERRIDING THE as_string METHOD"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">By default, the
&quot;as_string&quot; method simply returns the value
&quot;message&quot; or &quot;error&quot; param plus a stack
trace, if the class&rsquo;s &quot;Trace&quot; method returns
a true value or &quot;show_trace&quot; was set when creating
the exception.</p>

<p style="margin-left:11%; margin-top: 1em">However, once
you add new fields to a subclass, you may want to include
those fields in the stringified error.</p>

<p style="margin-left:11%; margin-top: 1em">Inside the
&quot;as_string&quot; method, the message (non-stack trace)
portion of the error is generated by calling the
&quot;full_message&quot; method. This can be easily
overridden. For example:</p>

<p style="margin-left:11%; margin-top: 1em">sub
full_message { <br>
my $self = shift; <br>
my $msg = $self&minus;&gt;message; <br>
$msg .= &quot; and foo was &quot; . $self&minus;&gt;foo;
<br>
return $msg; <br>
}</p>

<h2>SUPPORT
<a name="SUPPORT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Bugs may be
submitted at
&lt;https://github.com/houseabsolute/Exception&minus;Class/issues&gt;.</p>

<p style="margin-left:11%; margin-top: 1em">I am also
usually active on <small>IRC</small> as
&rsquo;autarch&rsquo; on &quot;irc://irc.perl.org&quot;.</p>

<h2>SOURCE
<a name="SOURCE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The source code
repository for Exception-Class can be found at
&lt;https://github.com/houseabsolute/Exception&minus;Class&gt;.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Dave Rolsky
&lt;autarch@urth.org&gt;</p>

<h2>COPYRIGHT AND LICENSE
<a name="COPYRIGHT AND LICENSE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This software
is copyright (c) 2021 by Dave Rolsky.</p>

<p style="margin-left:11%; margin-top: 1em">This is free
software; you can redistribute it and/or modify it under the
same terms as the Perl 5 programming language system
itself.</p>

<p style="margin-left:11%; margin-top: 1em">The full text
of the license can be found in the
<i><small>LICENSE</small></i> file included with this
distribution.</p>
<hr>
</body>
</html>
