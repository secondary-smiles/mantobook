<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:56:01 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SD_PATH_LOOKUP</title>

</head>
<body>
<h1>sd_path_lookup_strv</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">sd_path_lookup,
sd_path_lookup_strv &minus; Query well&minus;known file
system paths</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;systemd/sd&minus;path.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>enum { <br>
SD_PATH_TEMPORARY</b>, <b><br>
SD_PATH_TEMPORARY_LARGE</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_SYSTEM_BINARIES</b>,
<b><br>
SD_PATH_SYSTEM_INCLUDE</b>, <b><br>
SD_PATH_SYSTEM_LIBRARY_PRIVATE</b>, <b><br>
SD_PATH_SYSTEM_LIBRARY_ARCH</b>, <b><br>
SD_PATH_SYSTEM_SHARED</b>, <b><br>
SD_PATH_SYSTEM_CONFIGURATION_FACTORY</b>, <b><br>
SD_PATH_SYSTEM_STATE_FACTORY</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_SYSTEM_CONFIGURATION</b>,
<b><br>
SD_PATH_SYSTEM_RUNTIME</b>, <b><br>
SD_PATH_SYSTEM_RUNTIME_LOGS</b>, <b><br>
SD_PATH_SYSTEM_STATE_PRIVATE</b>, <b><br>
SD_PATH_SYSTEM_STATE_LOGS</b>, <b><br>
SD_PATH_SYSTEM_STATE_CACHE</b>, <b><br>
SD_PATH_SYSTEM_STATE_SPOOL</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_USER_BINARIES</b>,
<b><br>
SD_PATH_USER_LIBRARY_PRIVATE</b>, <b><br>
SD_PATH_USER_LIBRARY_ARCH</b>, <b><br>
SD_PATH_USER_SHARED</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_USER_CONFIGURATION</b>,
<b><br>
SD_PATH_USER_RUNTIME</b>, <b><br>
SD_PATH_USER_STATE_CACHE</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_USER</b>,
<b><br>
SD_PATH_USER_DOCUMENTS</b>, <b><br>
SD_PATH_USER_MUSIC</b>, <b><br>
SD_PATH_USER_PICTURES</b>, <b><br>
SD_PATH_USER_VIDEOS</b>, <b><br>
SD_PATH_USER_DOWNLOAD</b>, <b><br>
SD_PATH_USER_PUBLIC</b>, <b><br>
SD_PATH_USER_TEMPLATES</b>, <b><br>
SD_PATH_USER_DESKTOP</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_SEARCH_BINARIES</b>,
<b><br>
SD_PATH_SEARCH_BINARIES_DEFAULT</b>, <b><br>
SD_PATH_SEARCH_LIBRARY_PRIVATE</b>, <b><br>
SD_PATH_SEARCH_LIBRARY_ARCH</b>, <b><br>
SD_PATH_SEARCH_SHARED</b>, <b><br>
SD_PATH_SEARCH_CONFIGURATION_FACTORY</b>, <b><br>
SD_PATH_SEARCH_STATE_FACTORY</b>, <b><br>
SD_PATH_SEARCH_CONFIGURATION</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_SYSTEMD_UTIL</b>,
<b><br>
SD_PATH_SYSTEMD_SYSTEM_UNIT</b>, <b><br>
SD_PATH_SYSTEMD_SYSTEM_PRESET</b>, <b><br>
SD_PATH_SYSTEMD_USER_UNIT</b>, <b><br>
SD_PATH_SYSTEMD_USER_PRESET</b>, <b><br>
SD_PATH_SYSTEMD_SYSTEM_CONF</b>, <b><br>
SD_PATH_SYSTEMD_USER_CONF</b>, <b><br>
SD_PATH_SYSTEMD_SEARCH_SYSTEM_UNIT</b>, <b><br>
SD_PATH_SYSTEMD_SEARCH_USER_UNIT</b>, <b><br>
SD_PATH_SYSTEMD_SYSTEM_GENERATOR</b>, <b><br>
SD_PATH_SYSTEMD_USER_GENERATOR</b>, <b><br>
SD_PATH_SYSTEMD_SEARCH_SYSTEM_GENERATOR</b>, <b><br>
SD_PATH_SYSTEMD_SEARCH_USER_GENERATOR</b>, <b><br>
SD_PATH_SYSTEMD_SLEEP</b>, <b><br>
SD_PATH_SYSTEMD_SHUTDOWN</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_TMPFILES</b>,
<b><br>
SD_PATH_SYSUSERS</b>, <b><br>
SD_PATH_SYSCTL</b>, <b><br>
SD_PATH_BINFMT</b>, <b><br>
SD_PATH_MODULES_LOAD</b>, <b><br>
SD_PATH_CATALOG</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_SYSTEMD_SEARCH_NETWORK</b>,</p>


<p style="margin-left:11%; margin-top: 1em"><b>SD_PATH_SYSTEMD_SYSTEM_ENVIRONMENT_GENERATOR</b>,
<b><br>
SD_PATH_SYSTEMD_USER_ENVIRONMENT_GENERATOR</b>, <b><br>
SD_PATH_SYSTEMD_SEARCH_SYSTEM_ENVIRONMENT_GENERATOR</b>,
<b><br>
SD_PATH_SYSTEMD_SEARCH_USER_ENVIRONMENT_GENERATOR</b>, <br>
};</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_path_lookup(uint64_t&nbsp;</b><i>type</i><b>,
const&nbsp;char&nbsp;*</b><i>suffix</i><b>,
char&nbsp;**</b><i>paths</i><b>);</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>int
sd_path_lookup_strv(uint64_t&nbsp;</b><i>type</i><b>,
const&nbsp;char&nbsp;*</b><i>suffix</i><b>,
char&nbsp;***</b><i>paths</i><b>);</b></p> </td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sd_path_lookup()</b>
and <b>sd_bus_path_lookup_strv()</b> return a single path or
set of file system paths specified by the argument
<i>type</i>. In case of <b>sd_path_lookup()</b> a single
<b>NUL</b>&minus;terminated string is returned. When
<i>type</i> specifies a set of paths, they are concatenated
using &quot;:&quot; as a separator (as is traditionally done
for e.g. <i>$PATH</i> or <i>$LD_LIBRARY_PATH</i>). In case
of <b>sd_path_lookup_strv()</b> a
<b>NULL</b>&minus;terminated array of strings is returned
(strv). If suffix <i>suffix</i> is given, it is concatenated
to each of the paths after a slash (&quot;/&quot;). All
returned paths are absolute.</p>

<p style="margin-left:11%; margin-top: 1em">For paths which
refer to user directories, the relevant XDG standard is
followed, with support for environment variables like
<i>$XDG_DOCUMENTS_DIR</i>, <i>$XDG_DESKTOP_DIR</i>, ..., and
explicit configuration in /etc/xdg/user&minus;dirs.conf or
${XDG_CONFIG_HOME}/user&minus;dirs.dirs. See
<b><font color="#0000FF">XDG Base Directory
Specification</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">for details.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>systemd-path</b>(1)
is a wrapper around <b>sd_path_lookup()</b> and allows the
same set of paths to be queried.</font></p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">On
success, <b>sd_path_lookup()</b> and
<b>sd_path_lookup_strv()</b> return a non&minus;negative
integer. On failure, a negative errno&minus;style error
number is returned by either function.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
returned string or string array (strv) must be
<b>free</b>(3)'d by the caller.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Errors</b>
<br>
Returned errors may indicate the following
problems:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;EOPNOTSUPP</b></font></p>

<p style="margin-left:17%;"><font color="#000000">Unknown
identifier <i>type</i>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;EINVAL</b></font></p>

<p style="margin-left:17%;"><font color="#000000">Output
argument is <b>NULL</b>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;ENXIO</b></font></p>

<p style="margin-left:17%;"><font color="#000000">Query
failed because of an undefined environment variable (e.g.
for <b>SD_PATH_USER_RUNTIME</b> when <i>$XDG_RUNTIME_DIR</i>
is not defined).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>&minus;ENOMEM</b></font></p>

<p style="margin-left:17%;"><font color="#000000">Memory
allocation failed.</font></p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Look
up the location of ~/Documents</b></font></p>

<p style="margin-left:17%;"><font color="#000000">/*
SPDX&minus;License&minus;Identifier: MIT&minus;0
*/</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#include
&lt;stdio.h&gt; <br>
#include &lt;stdlib.h&gt; <br>
#include &lt;sd&minus;path.h&gt;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">int
main(void) { <br>
int r; <br>
char *t;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">r
= sd_path_lookup(SD_PATH_USER_DOCUMENTS, NULL, &amp;t); <br>
if (r &lt; 0) <br>
return EXIT_FAILURE;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">printf(&quot;~/Documents:
%s\n&quot;, t); <br>
free(t);</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">return
EXIT_SUCCESS; <br>
}</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Note
that the default answer of $HOME/Documents may be overridden
by user&minus;dirs.conf or
<i>$XDG_DOCUMENTS_DIR</i>.</font></p>

<h2>NOTES
<a name="NOTES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">These
APIs are implemented as a shared library, which can be
compiled and linked to with the
<b>libsystemd&nbsp;pkg-config</b>(1) file.</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>systemd-path</b>(1)</font></p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">1.</font></p> </td>
<td width="2%"></td>
<td width="49%">


<p style="margin-top: 1em"><font color="#000000">XDG Base
Directory Specification</font></p></td>
<td width="34%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html</font></p>
<hr>
</body>
</html>
