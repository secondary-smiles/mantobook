<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:54:57 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>EVP_PKEY_SET1_RSA</title>

</head>
<body>
<h1>EVP_PKEY_get1_DH</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">EVP_PKEY_set1_RSA,
EVP_PKEY_set1_DSA, EVP_PKEY_set1_DH, EVP_PKEY_set1_EC_KEY,
EVP_PKEY_get1_RSA, EVP_PKEY_get1_DSA, EVP_PKEY_get1_DH,
EVP_PKEY_get1_EC_KEY, EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA,
EVP_PKEY_get0_DH, EVP_PKEY_get0_EC_KEY, EVP_PKEY_assign_RSA,
EVP_PKEY_assign_DSA, EVP_PKEY_assign_DH,
EVP_PKEY_assign_EC_KEY, EVP_PKEY_assign_POLY1305,
EVP_PKEY_assign_SIPHASH, EVP_PKEY_get0_hmac,
EVP_PKEY_get0_poly1305, EVP_PKEY_get0_siphash,
EVP_PKEY_get0, EVP_PKEY_type, EVP_PKEY_get_id,
EVP_PKEY_get_base_id, EVP_PKEY_set1_engine,
EVP_PKEY_get0_engine, EVP_PKEY_id, EVP_PKEY_base_id &minus;
EVP_PKEY assignment functions</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;openssl/evp.h&gt; <br>
int EVP_PKEY_get_id(const EVP_PKEY *pkey); <br>
int EVP_PKEY_get_base_id(const EVP_PKEY *pkey); <br>
int EVP_PKEY_type(int type); <br>
#define EVP_PKEY_id EVP_PKEY_get_id <br>
#define EVP_PKEY_base_id EVP_PKEY_get_base_id</p>

<p style="margin-left:11%; margin-top: 1em">The following
functions have been deprecated since OpenSSL 3.0, and can be
hidden entirely by defining
<b><small>OPENSSL_API_COMPAT</small></b> with a suitable
version value, see <b>openssl_user_macros</b>(7):</p>

<p style="margin-left:11%; margin-top: 1em">int
EVP_PKEY_set1_RSA(EVP_PKEY *pkey, RSA *key); <br>
int EVP_PKEY_set1_DSA(EVP_PKEY *pkey, DSA *key); <br>
int EVP_PKEY_set1_DH(EVP_PKEY *pkey, DH *key); <br>
int EVP_PKEY_set1_EC_KEY(EVP_PKEY *pkey, EC_KEY *key); <br>
RSA *EVP_PKEY_get1_RSA(EVP_PKEY *pkey); <br>
DSA *EVP_PKEY_get1_DSA(EVP_PKEY *pkey); <br>
DH *EVP_PKEY_get1_DH(EVP_PKEY *pkey); <br>
EC_KEY *EVP_PKEY_get1_EC_KEY(EVP_PKEY *pkey); <br>
const unsigned char *EVP_PKEY_get0_hmac(const EVP_PKEY
*pkey, size_t *len); <br>
const unsigned char *EVP_PKEY_get0_poly1305(const EVP_PKEY
*pkey, size_t *len); <br>
const unsigned char *EVP_PKEY_get0_siphash(const EVP_PKEY
*pkey, size_t *len); <br>
const RSA *EVP_PKEY_get0_RSA(const EVP_PKEY *pkey); <br>
const DSA *EVP_PKEY_get0_DSA(const EVP_PKEY *pkey); <br>
const DH *EVP_PKEY_get0_DH(const EVP_PKEY *pkey); <br>
const EC_KEY *EVP_PKEY_get0_EC_KEY(const EVP_PKEY *pkey);
<br>
void *EVP_PKEY_get0(const EVP_PKEY *pkey); <br>
int EVP_PKEY_assign_RSA(EVP_PKEY *pkey, RSA *key); <br>
int EVP_PKEY_assign_DSA(EVP_PKEY *pkey, DSA *key); <br>
int EVP_PKEY_assign_DH(EVP_PKEY *pkey, DH *key); <br>
int EVP_PKEY_assign_EC_KEY(EVP_PKEY *pkey, EC_KEY *key);
<br>
int EVP_PKEY_assign_POLY1305(EVP_PKEY *pkey,
ASN1_OCTET_STRING *key); <br>
int EVP_PKEY_assign_SIPHASH(EVP_PKEY *pkey,
ASN1_OCTET_STRING *key); <br>
ENGINE *EVP_PKEY_get0_engine(const EVP_PKEY *pkey); <br>
int EVP_PKEY_set1_engine(EVP_PKEY *pkey, ENGINE
*engine);</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_get_base_id()</b>
returns the type of <i>pkey</i>. For example an
<small>RSA</small> key will return
<b><small>EVP_PKEY_RSA</small></b> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_get_id()</b>
returns the actual <small>OID</small> associated with
<i>pkey</i>. Historically keys using the same algorithm
could use different OIDs. For example an <small>RSA</small>
key could use the OIDs corresponding to the NIDs
<b>NID_rsaEncryption</b> (equivalent to
<b><small>EVP_PKEY_RSA</small></b> ) or <b>NID_rsa</b>
(equivalent to <b><small>EVP_PKEY_RSA2</small></b> ). The
use of alternative non-standard OIDs is now rare so
<b><small>EVP_PKEY_RSA2</small></b> et al are not often seen
in practice.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_type()</b>
returns the underlying type of the <small>NID</small>
<i>type</i>. For example EVP_PKEY_type(
<small>EVP_PKEY_RSA2</small> ) will return
<b><small>EVP_PKEY_RSA</small></b> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_set1_RSA()</b>,
<b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> and
<b>EVP_PKEY_set1_EC_KEY()</b> set the key referenced by
<i>pkey</i> to <i>key</i>. These functions are deprecated.
Applications should instead use
<b>EVP_PKEY_fromdata</b>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_assign_RSA()</b>,
<b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>,
<b>EVP_PKEY_assign_EC_KEY()</b>,
<b>EVP_PKEY_assign_POLY1305()</b> and
<b>EVP_PKEY_assign_SIPHASH()</b> set the referenced key to
<i>key</i> however these use the supplied <i>key</i>
internally and so <i>key</i> will be freed when the parent
<i>pkey</i> is freed. These macros are deprecated.
Applications should instead read an <small>EVP_PKEY</small>
directly using the <small>OSSL_DECODER</small> APIs (see
<b>OSSL_DECODER_CTX_new_for_pkey</b>(3)), or construct an
<small>EVP_PKEY</small> from data using
<b>EVP_PKEY_fromdata</b>(3).</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_get1_RSA()</b>,
<b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and
<b>EVP_PKEY_get1_EC_KEY()</b> return the referenced key in
<i>pkey</i> or <small>NULL</small> if the key is not of the
correct type. The returned key must be freed after use.
These functions are deprecated. Applications should instead
use the <small>EVP_PKEY</small> directly where possible. If
access to the low level key parameters is required then
applications should use <b>EVP_PKEY_get_params</b>(3) and
other similar functions. To write an <small>EVP_PKEY</small>
out use the <small>OSSL_ENCODER</small> APIs (see
<b>OSSL_ENCODER_CTX_new_for_pkey</b>(3)).</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_get0_hmac()</b>,
<b>EVP_PKEY_get0_poly1305()</b>,
<b>EVP_PKEY_get0_siphash()</b>, <b>EVP_PKEY_get0_RSA()</b>,
<b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> and
<b>EVP_PKEY_get0_EC_KEY()</b> return the referenced key in
<i>pkey</i> or <small>NULL</small> if the key is not of the
correct type. The reference count of the returned key is
<b>not</b> incremented and so the key must not be freed
after use. These functions are deprecated. Applications
should instead use the <small>EVP_PKEY</small> directly
where possible. If access to the low level key parameters is
required then applications should use
<b>EVP_PKEY_get_params</b>(3) and other similar functions.
To write an <small>EVP_PKEY</small> out use the
<small>OSSL_ENCODER</small> APIs (see
<b>OSSL_ENCODER_CTX_new_for_pkey</b>(3)).
<b>EVP_PKEY_get0()</b> returns a pointer to the legacy key
or <small>NULL</small> if the key is not legacy.</p>

<p style="margin-left:11%; margin-top: 1em">Note that if an
<small>EVP_PKEY</small> was not constructed using one of the
deprecated functions such as <b>EVP_PKEY_set1_RSA()</b>,
<b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> or
<b>EVP_PKEY_set1_EC_KEY()</b>, or via the similarly named
<b>EVP_PKEY_assign</b> macros described above then the
internal key will be managed by a provider (see
<b>provider</b>(7)). In that case the key returned by
<b>EVP_PKEY_get1_RSA()</b>, <b>EVP_PKEY_get1_DSA()</b>,
<b>EVP_PKEY_get1_DH()</b>, <b>EVP_PKEY_get1_EC_KEY()</b>,
<b>EVP_PKEY_get0_hmac()</b>,
<b>EVP_PKEY_get0_poly1305()</b>,
<b>EVP_PKEY_get0_siphash()</b>, <b>EVP_PKEY_get0_RSA()</b>,
<b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> or
<b>EVP_PKEY_get0_EC_KEY()</b> will be a cached copy of the
provider&rsquo;s key. Subsequent updates to the
provider&rsquo;s key will not be reflected back in the
cached copy, and updates made by an application to the
returned key will not be reflected back in the
provider&rsquo;s key. Subsequent calls to
<b>EVP_PKEY_get1_RSA()</b>, <b>EVP_PKEY_get1_DSA()</b>,
<b>EVP_PKEY_get1_DH()</b> and <b>EVP_PKEY_get1_EC_KEY()</b>
will always return the cached copy returned by the first
call.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_get0_engine()</b>
returns a reference to the <small>ENGINE</small> handling
<i>pkey</i>. This function is deprecated. Applications
should use providers instead of engines (see
<b>provider</b>(7) for details).</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_set1_engine()</b>
sets the <small>ENGINE</small> handling <i>pkey</i> to
<i>engine</i>. It must be called after the key algorithm and
components are set up. If <i>engine</i> does not include an
<b><small>EVP_PKEY_METHOD</small></b> for <i>pkey</i> an
error occurs. This function is deprecated. Applications
should use providers instead of engines (see
<b>provider</b>(7) for details).</p>

<h2>WARNINGS
<a name="WARNINGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
functions are only reliable with
<b><small>EVP_PKEY</small></b> s that have been assigned an
internal key with EVP_PKEY_assign_*():</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_get_id()</b>,
<b>EVP_PKEY_get_base_id()</b>, <b>EVP_PKEY_type()</b></p>

<p style="margin-left:11%; margin-top: 1em">For
<small>EVP_PKEY</small> key type checking purposes,
<b>EVP_PKEY_is_a</b>(3) is more generic.</p>

<p style="margin-left:11%; margin-top: 1em">The keys
returned from the functions <b>EVP_PKEY_get0_RSA()</b>,
<b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> and
<b>EVP_PKEY_get0_EC_KEY()</b> were changed to have a
&quot;const&quot; return type in OpenSSL 3.0. As described
above the keys returned may be cached copies of the key held
in a provider. Due to this, and unlike in earlier versions
of OpenSSL, they should be considered read-only copies of
the key. Updates to these keys will not be reflected back in
the provider side key. The <b>EVP_PKEY_get1_RSA()</b>,
<b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and
<b>EVP_PKEY_get1_EC_KEY()</b> functions were not changed to
have a &quot;const&quot; return type in order that
applications can &quot;free&quot; the return value. However
applications should still consider them as read-only
copies.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In accordance
with the OpenSSL naming convention the key obtained from or
assigned to the <i>pkey</i> using the <b>1</b> functions
must be freed as well as <i>pkey</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_assign_RSA()</b>,
<b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>,
<b>EVP_PKEY_assign_EC_KEY()</b>,
<b>EVP_PKEY_assign_POLY1305()</b> and
<b>EVP_PKEY_assign_SIPHASH()</b> are implemented as
macros.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_assign_EC_KEY()</b>
looks at the curve name id to determine if the passed
<b><small>EC_KEY</small></b> is an <b><small>SM2</small></b>
(7) key, and will set the <b><small>EVP_PKEY</small></b>
type to <b><small>EVP_PKEY_SM2</small></b> in that case,
instead of <b><small>EVP_PKEY_EC</small></b> .</p>

<p style="margin-left:11%; margin-top: 1em">Most
applications wishing to know a key type will simply call
<b>EVP_PKEY_get_base_id()</b> and will not care about the
actual type: which will be identical in almost all
cases.</p>

<p style="margin-left:11%; margin-top: 1em">Previous
versions of this document suggested using
EVP_PKEY_type(pkey&minus;&gt;type) to determine the type of
a key. Since <b><small>EVP_PKEY</small></b> is now opaque
this is no longer possible: the equivalent is
EVP_PKEY_get_base_id(pkey).</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_set1_engine()</b>
is typically used by an <small>ENGINE</small> returning an
<small>HSM</small> key as part of its routine to load a
private key.</p>

<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_set1_RSA()</b>,
<b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> and
<b>EVP_PKEY_set1_EC_KEY()</b> return 1 for success or 0 for
failure.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_get1_RSA()</b>,
<b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and
<b>EVP_PKEY_get1_EC_KEY()</b> return the referenced key or
<small>NULL</small> if an error occurred.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_assign_RSA()</b>,
<b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>,
<b>EVP_PKEY_assign_EC_KEY()</b>,
<b>EVP_PKEY_assign_POLY1305()</b> and
<b>EVP_PKEY_assign_SIPHASH()</b> return 1 for success and 0
for failure.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_get_base_id()</b>,
<b>EVP_PKEY_get_id()</b> and <b>EVP_PKEY_type()</b> return a
key type or <b>NID_undef</b> (equivalently
<b><small>EVP_PKEY_NONE</small></b> ) on error.</p>


<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_set1_engine()</b>
returns 1 for success and 0 for failure.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>EVP_PKEY_new</b>(3),
<b><small>SM2</small></b> (7)</p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>EVP_PKEY_id()</b> and <b>EVP_PKEY_base_id()</b> functions
were renamed to include &quot;get&quot; in their names in
OpenSSL 3.0, respectively. The old names are kept as
non-deprecated alias macros.</p>


<p style="margin-left:11%; margin-top: 1em">EVP_PKEY_set1_RSA,
EVP_PKEY_set1_DSA, EVP_PKEY_set1_DH, EVP_PKEY_set1_EC_KEY,
EVP_PKEY_get1_RSA, EVP_PKEY_get1_DSA, EVP_PKEY_get1_DH,
EVP_PKEY_get1_EC_KEY, EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA,
EVP_PKEY_get0_DH, EVP_PKEY_get0_EC_KEY, EVP_PKEY_assign_RSA,
EVP_PKEY_assign_DSA, EVP_PKEY_assign_DH,
EVP_PKEY_assign_EC_KEY, EVP_PKEY_assign_POLY1305,
EVP_PKEY_assign_SIPHASH, EVP_PKEY_get0_hmac,
EVP_PKEY_get0_poly1305, EVP_PKEY_get0_siphash,
EVP_PKEY_set1_engine and EVP_PKEY_get0_engine were
deprecated in OpenSSL 3.0.</p>

<p style="margin-left:11%; margin-top: 1em">The return
value from EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA,
EVP_PKEY_get0_DH, EVP_PKEY_get0_EC_KEY were made const in
OpenSSL 3.0.</p>

<p style="margin-left:11%; margin-top: 1em">The function
<b>EVP_PKEY_set_alias_type()</b> was previously documented
on this page. It was removed in OpenSSL 3.0.</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
2002&minus;2021 The OpenSSL Project Authors. All Rights
Reserved.</p>

<p style="margin-left:11%; margin-top: 1em">Licensed under
the Apache License 2.0 (the &quot;License&quot;). You may
not use this file except in compliance with the License. You
can obtain a copy in the file <small>LICENSE</small> in the
source distribution or at
&lt;https://www.openssl.org/source/license.html&gt;.</p>
<hr>
</body>
</html>
