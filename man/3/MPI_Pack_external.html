<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:55:35 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MPI_Pack_external</title>

</head>
<body>
<h1>MPI_Pack_external</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>MPI_Pack_external</b>
&minus; Writes data to a portable format</p>

<h2>SYNTAX
<a name="SYNTAX"></a>
</h2>


<h2>C Syntax
<a name="C Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;mpi.h&gt; <br>
int MPI_Pack_external(const char *<i>datarep</i>, const void
*<i>inbuf</i>,</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>int <i>incount</i>, MPI_Datatype <i>datatype</i>,</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>void *<i>outbuf</i>, MPI_Aint <i>outsize</i>,</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="85%">


<p>MPI_Aint *<i>position</i>)</p></td></tr>
</table>

<h2>Fortran Syntax
<a name="Fortran Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">USE MPI <br>
! or the older form: INCLUDE &rsquo;mpif.h&rsquo; <br>
MPI_PACK_EXTERNAL(<i>DATAREP, INBUF, INCOUNT,
DATATYPE,</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">


<p><i>OUTBUF, OUTSIZE, POSITION, IERROR</i>)</p></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">


<p>INTEGER</p></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="7%">
</td>
<td width="62%">


<p><i>INCOUNT, DATATYPE, IERROR</i></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">


<p>INTEGER(KIND=MPI_ADDRESS_KIND) <i>OUTSIZE,
POSITION</i></p> </td>
<td width="8%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">


<p>CHARACTER*(*)</p></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="62%">


<p><i>DATAREP</i></p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%"></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">


<p>&lt;type&gt;</p></td>
<td width="8%"></td>
<td width="8%"></td>
<td width="7%">
</td>
<td width="62%">


<p><i>INBUF(*), OUTBUF(*)</i></p></td></tr>
</table>

<h2>Fortran 2008 Syntax
<a name="Fortran 2008 Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">USE mpi_f08
<br>
MPI_Pack_external(<i>datarep</i>, <i>inbuf</i>,
<i>incount</i>, <i>datatype</i>, <i>outbuf</i>,
<i>outsize</i>,</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="77%">


<p><i>position</i>, <i>ierror</i>)</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>CHARACTER(LEN=*), INTENT(IN) :: <i>datarep</i></p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>TYPE(*), DIMENSION(..), INTENT(IN) :: <i>inbuf</i></p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>TYPE(*), DIMENSION(..) :: <i>outbuf</i></p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>INTEGER, INTENT(IN) :: <i>incount</i></p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>TYPE(MPI_Datatype), INTENT(IN) :: <i>datatype</i></p></td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>INTEGER(KIND=MPI_ADDRESS_KIND), INTENT(IN) ::
<i>outsize</i></p> </td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>INTEGER(KIND=MPI_ADDRESS_KIND), INTENT(INOUT) ::
<i>position</i></p> </td>
<td width="77%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>INTEGER, OPTIONAL, INTENT(OUT) :: <i>ierror</i></p></td>
<td width="77%">
</td></tr>
</table>

<h2>C++ Syntax
<a name="C++ Syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">#include
&lt;mpi.h&gt; <br>
void MPI::Datatype::Pack_external(const char*
<i>datarep</i>,</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>const void* <i>inbuf</i>, int <i>incount</i>,</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>void* <i>outbuf</i>, MPI::Aint <i>outsize</i>,</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="92%">


<p>MPI::Aint&amp; <i>position</i>) const</p></td></tr>
</table>

<h2>INPUT PARAMETERS
<a name="INPUT PARAMETERS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p style="margin-top: 1em">datarep</p></td>
<td width="3%"></td>
<td width="65%">


<p style="margin-top: 1em">Data representation
(string).</p> </td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>inbuf</p></td>
<td width="3%"></td>
<td width="65%">


<p>Input buffer start (choice).</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>incount</p></td>
<td width="3%"></td>
<td width="65%">


<p>Number of input data items (integer).</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>datatype</p></td>
<td width="3%"></td>
<td width="65%">


<p>Datatype of each input data item (handle).</p></td>
<td width="9%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p>outsize</p></td>
<td width="3%"></td>
<td width="65%">


<p>Output buffer size, in bytes (integer).</p></td>
<td width="9%">
</td></tr>
</table>

<h2>INPUT/OUTPUT PARAMETER
<a name="INPUT/OUTPUT PARAMETER"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p style="margin-top: 1em">position</p></td>
<td width="3%"></td>
<td width="72%">


<p style="margin-top: 1em">Current position in buffer, in
bytes (integer).</p></td>
<td width="2%">
</td></tr>
</table>

<h2>OUTPUT PARAMETERS
<a name="OUTPUT PARAMETERS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em">outbuf</p></td>
<td width="6%"></td>
<td width="57%">


<p style="margin-top: 1em">Output buffer start
(choice).</p> </td>
<td width="17%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>IERROR</p></td>
<td width="6%"></td>
<td width="57%">


<p>Fortran only: Error status (integer).</p></td>
<td width="17%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">MPI_Pack_external
packs data into the external32 format, a universal data
representation defined by the MPI Forum. This format is
useful for exchanging data between MPI implementations, or
when writing data to a file.</p>

<p style="margin-left:11%; margin-top: 1em">The input
buffer is specified by <i>inbuf</i>, <i>incount</i> and
<i>datatype</i>, and may be any communication buffer allowed
in MPI_Send. The output buffer <i>outbuf</i> must be a
contiguous storage area containing <i>outsize</i> bytes.</p>

<p style="margin-left:11%; margin-top: 1em">The input value
of <i>position</i> is the first position in <i>outbuf</i> to
be used for packing (measured in bytes, not elements,
relative to the start of the buffer). When the function
returns, <i>position</i> is incremented by the size of the
packed message, so that it points to the first location in
<i>outbuf</i> following the packed message. This way it may
be used as input to a subsequent call to
MPI_Pack_external.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Example:</b>
An example using MPI_Pack_external:</p>

<p style="margin-left:11%; margin-top: 1em">int position,
i;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>double msg[5];</p></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>char buf[1000];</p></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>...</p></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>MPI_Comm_rank(MPI_COMM_WORLD, &amp;myrank);</p></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">


<p>if (myrank == 0) {</p></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">


<p>/* SENDER CODE */</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>position = 0;</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>i = 5; /* number of doubles in msg[] */</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_Pack_external(&quot;external32&quot;, &amp;i, 1,
MPI_INT,</p> </td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>buf, 1000, &amp;position);</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_Pack_external(&quot;external32&quot;, &amp;msg, i,
MPI_DOUBLE,</p> </td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>buf, 1000, &amp;position);</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_Send(buf, position, MPI_BYTE, 1, 0,</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_COMM_WORLD);</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">


<p>} else {</p></td>
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">


<p>/* RECEIVER CODE */</p></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_Recv(buf, 1, MPI_BYTE, 0, 0, MPI_COMM_WORLD,</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_STATUS_IGNORE);</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_Unpack_external(&quot;external32&quot;, buf,
1000,</p> </td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_INT, &amp;i, 1, &amp;position);</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_Unpack_external(&quot;external32&quot;, buf,
1000,</p> </td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>MPI_DOUBLE, &amp;msg, i, &amp;position);</p></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>}</p></td>
<td width="8%"></td>
<td width="7%"></td>
<td width="8%"></td>
<td width="54%">
</td></tr>
</table>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>datarep</i> argument specifies the data format. The only
valid value in the current version of MPI is
&quot;external32&quot;. The argument is provided for future
extensibility.</p>

<p style="margin-left:11%; margin-top: 1em">To understand
the behavior of pack and unpack, it is convenient to think
of the data part of a message as being the sequence obtained
by concatenating the successive values sent in that message.
The pack operation stores this sequence in the buffer space,
as if sending the message to that buffer. The unpack
operation retrieves this sequence from buffer space, as if
receiving a message from that buffer. (It is helpful to
think of internal Fortran files or sscanf in C for a similar
function.)</p>

<p style="margin-left:11%; margin-top: 1em">Several
messages can be successively packed into one packing unit.
This is effected by several successive related calls to
MPI_Pack_external, where the first call provides
<i>position</i>=0, and each successive call inputs the value
of <i>position</i> that was output by the previous call,
along with the same values for <i>outbuf</i> and
<i>outcount</i>. This packing unit now contains the
equivalent information that would have been stored in a
message by one send call with a send buffer that is the
&quot;concatenation&quot; of the individual send
buffers.</p>

<p style="margin-left:11%; margin-top: 1em">A packing unit
can be sent using type MPI_BYTE. Any point-to-point or
collective communication function can be used to move the
sequence of bytes that forms the packing unit from one
process to another. This packing unit can now be received
using any receive operation, with any datatype. (The
type-matching rules are relaxed for messages sent with type
MPI_BYTE.)</p>

<p style="margin-left:11%; margin-top: 1em">A packing unit
can be unpacked into several successive messages. This is
effected by several successive related calls to
MPI_Unpack_external, where the first call provides
<i>position</i>=0, and each successive call inputs the value
of position that was output by the previous call, and the
same values for <i>inbuf</i> and <i>insize</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
concatenation of two packing units is not necessarily a
packing unit; nor is a substring of a packing unit
necessarily a packing unit. Thus, one cannot concatenate two
packing units and then unpack the result as one packing
unit; nor can one unpack a substring of a packing unit as a
separate packing unit. Each packing unit that was created by
a related sequence of pack calls must be unpacked as a unit
by a sequence of related unpack calls.</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Almost all MPI
routines return an error value; C routines as the value of
the function and Fortran routines in the last argument. C++
functions do not return errors. If the default error handler
is set to MPI::ERRORS_THROW_EXCEPTIONS, then on error the
C++ exception mechanism will be used to throw an
MPI::Exception object.</p>

<p style="margin-left:11%; margin-top: 1em">Before the
error value is returned, the current MPI error handler is
called. By default, this error handler aborts the MPI job,
except for I/O function errors. The error handler may be
changed with MPI_Comm_set_errhandler; the predefined error
handler MPI_ERRORS_RETURN may be used to cause error values
to be returned. Note that MPI does not guarantee that an MPI
program can continue past an error.</p>

<p style="margin-left:11%; margin-top: 1em">See the MPI man
page for a full list of MPI error codes.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">MPI_Pack_external_size
<br>
MPI_Send <br>
MPI_Unpack_external <br>
 sscanf(3C)</p>
<hr>
</body>
</html>
