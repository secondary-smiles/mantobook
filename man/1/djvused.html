<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:53:44 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>DJVUSED</title>

</head>
<body>
<h1>djvused</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">djvused &minus;
Multi-purpose DjVu document editor.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>djvused
[</b><i>options</i><b>]</b> <i>djvufile</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Program
<b>djvused</b> is a powerful command line tool for
manipulating multi-page documents, creating or editing
annotation chunks, creating or editing hidden text layers,
pre-computing thumbnail images, and more. The program first
reads the DjVu document <i>djvufile</i> and executes a
number of djvused commands.</p>

<p style="margin-left:11%; margin-top: 1em">Djvused
commands can be read from a specific file (when option
<b>-f</b> is specified), read from the command line (when
option <b>-e</b> is specified), or read from the standard
input (the default).</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>-v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Cause <b>djvused</b> to print a
command line prompt before reading commands and a brief
message describing how each command was executed. This
option is very useful for debugging djvused scripts and also
for interactively entering djvused commands on the standard
input.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>-f</b> <i>scriptfile</i></p>

<p style="margin-left:22%;">Cause <b>djvused</b> to read
commands from file <i>scriptfile</i>.</p>

<p style="margin-left:11%;"><b>-e</b> <i>command</i></p>

<p style="margin-left:22%;">Cause <b>djvused</b> to execute
the commands specified by the option argument
<i>commands</i>. It is advisable to surround the djvused
commands by single quotes in order to prevent unwanted shell
expansion.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Cause <b>djvused</b> to save the file <i>djvufile</i>
after executing the specified commands. This is similar to
executing command <b>save</b> immediately before terminating
the program.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Cause <b>djvused</b> to print hidden text and
annotations as UTF-8 instead of encoding non-ASCII
characters with octal escape sequences for maximal
portability. This option is convenient for manually editing
or viewing the djvused output. This option also causes the
emission of an UTF-8 BOM under Windows.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>-n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Cause <b>djvused</b> to disregard save commands. This is
useful for debugging djvused scripts without overwriting
files on your disk.</p></td></tr>
</table>

<h2>DJVUSED EXAMPLES
<a name="DJVUSED EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There are many
ways to use program <b>djvused</b>. The following examples
illustrate some common uses of this program.</p>

<h2>Obtaining the size of a page
<a name="Obtaining the size of a page"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Command
<b>size</b> outputs the width and height of the selected
pages using a <small>HTML</small> friendly syntax. For
instance, the following command prints the size of page
<i>3</i> of document <i>myfile.djvu</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="60%">


<p style="margin-top: 1em"><b>djvused</b>
<i>myfile.djvu</i> <b>-e &rsquo;select 3;
size&rsquo;</b></p> </td>
<td width="25%">
</td></tr>
</table>

<h2>Extracting the hidden text
<a name="Extracting the hidden text"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Command
<b>print-pure-txt</b> outputs the text associated with a
page or a document. For instance, the following shell
command outputs the text for the entire document. Lines and
pages are delimited by the usual control characters.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="60%">


<p style="margin-top: 1em"><b>djvused</b>
<i>myfile.djvu</i> <b>-e
&rsquo;print-pure-txt&rsquo;</b></p> </td>
<td width="25%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Command
<b>print-txt</b> produces a more extensive output describing
the structure and the location of the text components. The
syntax of this output is described later in this man page.
For instance, the following shell command outputs extended
text information for page <i>3</i> of document
<i>myfile.djvu</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="68%">


<p style="margin-top: 1em"><b>djvused</b>
<i>myfile.djvu</i> <b>-e &rsquo;select 3;
print-txt&rsquo;</b></p> </td>
<td width="17%">
</td></tr>
</table>

<h2>Extracting the annotations
<a name="Extracting the annotations"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Annotation data
can be extracted using command <b>print-ant</b>. The syntax
of the annotation data is described later in this man page.
For instance, the following shell command outputs the
annotation data for the first page of document
<b>myfile.djvu</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="68%">


<p style="margin-top: 1em"><b>djvused</b>
<i>myfile.djvu</i> <b>-e &rsquo;select 1;
print-ant&rsquo;</b></p> </td>
<td width="17%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Command
<b>print-ant</b> only prints the annotations stored in the
selected component file. Command <b>print-merged-ant</b>
also retrieves annotations from all the component files
referenced by the current page (using <small>INCL</small>
chunks) and prints the merged information.</p>

<h2>Dumping/restoring annotations and text
<a name="Dumping/restoring annotations and text"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Three commands,
<b>output-txt</b>, <b>output-ant</b>, and <b>output-all</b>,
produce djvused scripts. For instance, the following shell
command produces a djvused script, <i>myfile.dsed</i>, that
recreates all the text and annotation data in document
<i>myfile.djvu</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="76%">


<p style="margin-top: 1em"><b>djvused</b>
<i>myfile.djvu</i> <b>-e &rsquo;output-all&rsquo; &gt;</b>
<i>myfile.dsed</i></p> </td>
<td width="9%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Script
<i>myfile.dsed</i> is a text file that can be easily edited.
The following shell command then recreates the text and
annotation information in file <i>myfile.djvu</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="57%">


<p style="margin-top: 1em"><b>djvused</b>
<i>myfile.djvu</i> <b>-f</b> <i>myfile.dsed</i>
<b>-s</b></p> </td>
<td width="28%">
</td></tr>
</table>

<h2>Extracting a page
<a name="Extracting a page"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Both commands
<b>save-page</b> and <b>save-page-with</b> create a DjVu
file representing the selected component file of a document.
The following shell command, for instance, creates a file
<i>p05.djvu</i> containing page <i>5</i> of document
<i>myfile.djvu</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="82%">


<p style="margin-top: 1em"><b>djvused</b>
<i>myfile.djvu</i> <b>-e &rsquo;select 5; save-page</b>
<i>p05.djvu</i><b>&rsquo;</b></p> </td>
<td width="3%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Each page of a
document might import data from another component file using
the so-called inclusion ( <small>INCL</small> ) chunks.
Command <b>save-page</b> then produces a file with
unresolved references to imported data. Such a file should
then be made part of a multi-page document containing the
required data in other component files. On the other hand,
command <b>save-page-with</b> copies all the imported data
into the output file. This file is directly usable. Yet
collecting several such files into a multi-page document
might lead to useless data replication.</p>

<h2>Pre-computing thumbnails
<a name="Pre-computing thumbnails"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Commands
<b>set-thumbnails</b> constructs thumbnails that can be
later displayed by DjVu viewers. The following shell
command, for instance, computes thumbnails of size
<i>64</i>x<i>64</i> pixels for all pages of file
<i>myfile.djvu</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="70%">


<p style="margin-top: 1em"><b>djvused</b>
<i>myfile.djvu</i> <b>-e &rsquo;set-thumbnails 64&rsquo;
-s</b></p> </td>
<td width="15%">
</td></tr>
</table>

<h2>DJVUSED COMMANDS
<a name="DJVUSED COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Command lines
might contain zero, one, or more djvused commands and an
optional comment. Multiple djvused commands must be
separated by a semicolon character &rsquo;;&rsquo;. Comments
are introduced by the &rsquo;#&rsquo; character and extend
until the end of the command line.</p>

<h2>Selection commands
<a name="Selection commands"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Multi-page DjVu
documents are composed of a number of component files. Most
component files describe a specific page of a document. Some
component files contain information shared by several pages
such as shared image data, shared annotations or thumbnails.
Many djvused commands operate on selected component files.
All component files are initially selected. The following
commands are useful for changing the selection.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>n</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Print the total number of pages
in the document.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>ls</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>List all component files in the document. Each line
contains an optional page number, a letter describing the
component file type, the size of the component file, and
identifier of the component file. Component file type
letters <b>P</b>, <b>I</b>, <b>A</b>, and <b>T</b>
respectively stand for page data, shared image data, shared
annotation data, and thumbnail data. Page numbers are only
listed for component files containing page data. When it is
set, the optional page title (see command
<b>set-page-title</b> below) is displayed after the
component file identifier.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>select
[</b><i>fileid</i><b>]</b></p>

<p style="margin-left:22%;">Select the component file
identified by argument <i>fileid</i>. Argument <i>fileid</i>
must be either a page number or a component file identifier.
The <b>select</b> command selects all component files when
the argument <i>fileid</i> is omitted.</p>

<p style="margin-left:11%;"><b>select-shared-ant</b></p>

<p style="margin-left:22%;">Select a component file
containing shared annotations. Only one such component file
is supported by the current DjVu software. This component
file usually contains annotations pertaining to the whole
document as opposed to specific pages. An error message is
displayed if there is no such component file.</p>

<p style="margin-left:11%;"><b>create-shared-ant</b></p>

<p style="margin-left:22%;">Create and select a component
file containing shared annotations. This command only
selects the shared annotation component file if such a
component file already exists. Otherwise it creates a new
shared annotation component file and makes sure that it is
imported by all pages in the document.</p>

<p style="margin-left:11%;"><b>showsel</b></p>

<p style="margin-left:22%;">Shows the currently selected
component files with the same format as command
<b>ls</b>.</p>

<h2>Text and annotation commands
<a name="Text and annotation commands"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>print-pure-txt</b></p>

<p style="margin-left:22%;">Print the text stored in the
hidden text layer of the selected pages. A similar
capability is offered by program <b>djvutxt</b>. Structural
information is sometimes represented by control characters.
Text from different pages is delimited by form feed
characters (&quot;\f&quot;). Lines are delimited by newline
characters (&quot;\n&quot;). Columns, regions, and
paragraphs are sometimes delimited by vertical tab
(&quot;\013&quot;), group separators (&quot;\035&quot;) and
unit separators (&quot;\037&quot;) respectively.</p>

<p style="margin-left:11%;"><b>print-txt</b></p>

<p style="margin-left:22%;">Prints extensive hidden text
information for the selected pages. This information
describes the structure of the text on the document page and
locates the structural elements in the page image. The
syntax of this output is described later in this man
page.</p>

<p style="margin-left:11%;"><b>remove-txt</b></p>

<p style="margin-left:22%;">Remove the hidden text
information from the selected component files. For instance,
executing commands <b>select</b> and <b>remove-txt</b>
removes all hidden text information from the DjVu
document.</p>

<p style="margin-left:11%;"><b>set-txt
[</b><i>djvusedtxtfile</i><b>]</b></p>

<p style="margin-left:22%;">Insert hidden text information
into the selected pages. The optional argument
<i>djvusedtxtfile</i> names a file containing the hidden
text information. This file must contain data similar to
what is produced by command <b>print-txt</b>. When the
optional argument is omitted, the program reads the hidden
text information from the djvused script until reaching an
end-of-file or a line containing a single period.</p>

<p style="margin-left:11%;"><b>output-txt</b></p>

<p style="margin-left:22%;">Prints a djvused script that
reconstructs the hidden text information for the selected
pages. This script can later be edited and executed by
invoking program <b>djvused</b> with option <b>-f</b>.</p>

<p style="margin-left:11%;"><b>print-ant</b></p>

<p style="margin-left:22%;">Prints the annotations of the
selected component file. The annotation data is represented
using a simple syntax described later in this document.</p>

<p style="margin-left:11%;"><b>print-merged-ant</b></p>

<p style="margin-left:22%;">Merge the annotations stored in
the selected component files with the annotations imported
from other component files such as the shared annotation
component file.. The annotation data is represented using a
simple syntax described later in this document.</p>

<p style="margin-left:11%;"><b>remove-ant</b></p>

<p style="margin-left:22%;">Remove the annotation
information from the selected component files. For instance,
executing commands <b>select</b> and <b>remove-ant</b>
removes all annotation information from the DjVu
document.</p>

<p style="margin-left:11%;"><b>set-ant
[</b><i>djvusedantfile</i><b>]</b></p>

<p style="margin-left:22%;">Insert annotations into the
selected component file. The optional argument
<i>djvusedantfile</i> names a file containing the annotation
data. This file must contain data similar to what is
produced by command <b>print-ant</b>. When the optional
argument is omitted, the program reads the annotation data
from the djvused script itself until reaching an end-of-file
or a line containing a single period.</p>

<p style="margin-left:11%;"><b>output-ant</b></p>

<p style="margin-left:22%;">Print a djvused script that
reconstructs the annotation information for the selected
pages. This script can later be edited and executed by
invoking program <b>djvused</b> with option <b>-f</b>.</p>

<p style="margin-left:11%;"><b>print-meta</b></p>

<p style="margin-left:22%;">Print the metadata part of the
annotations for the selected component file. This command
displays a subset of the information printed by command
<b>print-ant</b> using a different syntax. metadata are
organized as key&minus;value pairs. Each printed line
contains the key name such as <b>author</b>,
<b>title</b>,etc., followed by a tab character
(&quot;\t&quot;) and a double-quoted string representing the
<small>UTF-8</small> encoded metadata value.</p>

<p style="margin-left:11%;"><b>remove-meta</b></p>

<p style="margin-left:22%;">Remove the metadata part of the
annotations of the selected component files.</p>

<p style="margin-left:11%;"><b>set-meta
[</b><i>djvusedmetafile</i><b>]</b></p>

<p style="margin-left:22%;">Set the metadata part of the
annotations of the selected component file. The remaining
part of the annotations is left unchanged. The optional
argument <i>djvusedmetafile</i> names a file containing the
metadata. This file must contain data similar to what is
produced by command <b>print-meta</b>. When the optional
argument is omitted, the program reads the annotation data
from the djvused script itself until reaching an end-of-file
or a line containing a single period.</p>

<p style="margin-left:11%;"><b>print-xmp</b></p>

<p style="margin-left:22%;">Print the XMP metadata string
contained in the annotation chunk of the selected component
file. This command displays in fact a subset of the
information printed by command <b>print-ant</b>.</p>

<p style="margin-left:11%;"><b>remove-xmp</b></p>

<p style="margin-left:22%;">Removes the XMP tag from the
annotation chunk of the selected component file.</p>

<p style="margin-left:11%;"><b>set-xmp
[</b><i>xmpfile</i><b>]</b></p>

<p style="margin-left:22%;">Set the XMP metadata part of
the annotations of the selected component file. The
remaining part of the annotations is left unchanged. The
optional argument <i>xmpfile</i> names a file containing the
XMP metadata in a format similar to that produced by command
<b>print-xmp</b>. When the optional argument is omitted, the
program reads the XMP annotation data from the djvused
script itself until reaching an end-of-file or a line
containing a single period.</p>

<p style="margin-left:11%;"><b>output-all</b></p>

<p style="margin-left:22%;">Print a djvused script that
reconstructs both the hidden text and the annotation
information for the selected pages. This script can later be
edited and executed by invoking program <b>djvused</b> with
option <b>-f</b>.</p>

<h2>Outline/bookmarks commands
<a name="Outline/bookmarks commands"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>print-outline</b></p>

<p style="margin-left:22%;">Print the outline of the
document. Nothing is printed if the document contains no
outline.</p>

<p style="margin-left:11%;"><b>remove-outline</b></p>

<p style="margin-left:22%;">Removes the outline from the
document.</p>

<p style="margin-left:11%;"><b>set-outline
[</b><i>djvusedoutlinefile</i><b>]</b></p>

<p style="margin-left:22%;">Insert outline information into
the document. The optional argument
<i>djvusedoutlinefile</i> names a file containing the
outline information. This file must contain data similar to
what is produced by command <b>print-outline</b>. When the
optional argument is omitted, the program reads the hidden
text information from the djvused script until reaching an
end-of-file or a line containing a single period.</p>

<h2>Thumbnail commands
<a name="Thumbnail commands"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>set-thumbnails</b>
<i>sz</i></p>

<p style="margin-left:22%;">Compute thumbnails of size
<i>sz</i>x<i>sz</i> pixels and insert them into the
document. DjVu viewers can later display these thumbnails
very efficiently without need to download the data for each
page. Typical thumbnail size range from 48 to 128
pixels.</p>

<p style="margin-left:11%;"><b>remove-thumbnails</b></p>

<p style="margin-left:22%;">Remove the pre-computed
thumbnails from the DjVu document. New thumbnails can then
be computed using command <b>set-thumbnails</b>.</p>

<h2>Save commands
<a name="Save commands"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The above
commands only modify the memory image of the DjVu document.
The following commands provide means to save the modified
data into the file system.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>save</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Save the modified DjVu document back into the input file
<i>djvufile</i> specified by the arguments of the program
<b>djvused</b>. Nothing is done if the DjVu file was not
modified. Passing option <b>-s</b> program <b>djvused</b> is
equivalent to executing command <b>save</b> before exiting
the program.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>save-bundled</b>
<i>filename</i></p>

<p style="margin-left:22%;">Save the current DjVu document
as a bundled multi-page DjVu document named <i>filename</i>.
A similar capability is offered by program
<b>djvmcvt</b>.</p>

<p style="margin-left:11%;"><b>save-indirect</b>
<i>filename</i></p>

<p style="margin-left:22%;">Save the current DjVu document
as an indirect multi-page DjVu document. The index file of
the indirect document will be named <b>filename</b>. All
other files composing the indirect document will be saved
into the same directory as the index file. A similar
capability is offered by program <b>djvmcvt</b>.</p>

<p style="margin-left:11%;"><b>save-page</b>
<i>filename</i></p>

<p style="margin-left:22%;">Save the selected component
file into DjVu file <i>filename</i>. The selected component
file might import data from another component file using the
so-called inclusion ( <small>INCL</small> ) chunks. This
command then produces a file with unresolved references to
imported data. Such a file should then be made part of a
multi-page document containing the required data in other
component files.</p>

<p style="margin-left:11%;"><b>save-page-with</b>
<i>filename</i></p>

<p style="margin-left:22%;">Save the selected component
file into DjVu file <i>filename</i>. All data imported from
other component files is copied into the output file as
well. This command always produces a usable DjVu file. On
the other hand, collecting several such files into a
multi-page document might lead to useless data
replication.</p>

<h2>Miscellaneous commands
<a name="Miscellaneous commands"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><b>help</b></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">Display a help message listing
all commands supported by <b>djvused</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>dump</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Display the <small>EA IFF 85</small> structure of the
document or of the selected component file. A similar
capability is offered by program <b>djvudump</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>size</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>Display the width and the height of the selected pages.
The dimensions of each page are displayed using a syntax
suitable for direct insertion into the
<small>&lt;EMBED...&gt;&lt;/EMBED&gt;</small> tags. This
command also displays the default page orientation when it
is different from zero.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>set-rotation
[+-]</b><i>rot</i></p>

<p style="margin-left:22%;">Changes the default orientation
of the selected pages. The orientation is expressed as an
integer in range 0..3 representing a number of 90 degree
counter-clockwise rotations. When the argument is preceded
by a sign <b>+</b> or <b>-</b>, argument <i>rot</i> counts
how many additional 90 degree counter-clockwise rotations
should be applied to the page. Otherwise, argument
<i>rot</i> represents the desired absolute page orientation.
Only DjVu pages can be rotated. Pages represented as a raw
IW44 image cannot be rotated.</p>

<p style="margin-left:11%;"><b>set-dpi</b> <i>dpi</i></p>

<p style="margin-left:22%;">Sets the resolution of the page
image in dots per inche. Argument <i>dpi</i> should be in
range 25..6000.</p>

<p style="margin-left:11%;"><b>set-page-title</b>
<i>title</i></p>

<p style="margin-left:22%;">Sets a page title for the
selected page. When page titles are available, recent
versions of the DjVuLibre viewers display these page titles
instead of page numbers and also accept them in page
selection options. Command <b>ls</b> can be used to see both
the page titles and page identifiers. To unset a page title,
simply make it equal to the page identifier.</p>

<h2>DJVUSED FILE FORMATS
<a name="DJVUSED FILE FORMATS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Djvused uses a
simple parenthesized syntax to represent both annotations
and hidden text.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="3%"></td>
<td width="85%">


<p>This syntax is the native syntax used by DjVu for
storing annotations. Program <b>djvused</b> simply
compresses the annotation data using the <b>bzz</b>(1)
algorithm.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>*</p></td>
<td width="3%"></td>
<td width="85%">


<p>This syntax differs from the native syntax used by DjVu
for storing the hidden text. Program <b>djvused</b> performs
the translations between the compact binary representation
used by DjVu and the easily modifiable parenthesized
syntax.</p> </td></tr>
</table>

<h2>General syntax
<a name="General syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Djvused files
are <small>ASCII</small> text files. The legal characters in
djvused files are the printable <small>ASCII</small>
characters and the space, tab, cr, and nl characters. Using
other characters has undefined results.</p>

<p style="margin-left:11%; margin-top: 1em">Djvused files
are composed of a sequence of expressions separated by blank
characters (space, tab, cr, or nl). There are four kind of
expressions, namely integers, symbols, strings and lists.
<br>
Integers:</p>

<p style="margin-left:22%;">Integer numbers are represented
by one or more digits, with the usual interpretation.</p>

<p style="margin-left:11%;">Symbols:</p>

<p style="margin-left:22%;">Symbols, or identifiers, are
sequences of printable ascii characters representing a name
or a keyword. Acceptable characters are the alpha-numeric
characters, the underscore &quot;_&quot;, the minus
character &quot;-&quot;, and the hash character
&quot;#&quot;. Names should not begin with a digit or a
minus character.</p>

<p style="margin-left:11%;">Strings:</p>

<p style="margin-left:22%;">Strings denote an arbitrary
sequence of bytes, usually interpreted as a sequence of
<small>UTF-8</small> encoded characters. Strings in djvused
files are similar to strings in the C language. They are
surrounded by double quote characters. Certain sequences of
characters starting with a backslash (&quot;\&quot;) have a
special meaning. A backslash followed by letter
&quot;a&quot;, &quot;b&quot;, &quot;t&quot;, &quot;n&quot;,
&quot;v&quot;, &quot;f&quot;, &quot;r&quot;, &quot;\&quot;,
and stands for the ascii character BEL(007), BS(008),
HT(009), LF(010), VT(011), FF(012), CR(013), BACKSLASH(134)
and DOUBLEQUOTE(042) respectively. A backslash followed by
one to three digits stands for the byte whose octal code is
expressed by the digits. All other backslash sequences are
illegal. All non printable ascii characters must be
escaped.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>Lists:</p></td>
<td width="2%"></td>
<td width="78%">


<p>Lists are sequence of expressions separated by blanks
and surrounded by parentheses. All expressions types are
acceptable within a list, including sub-lists.</p></td></tr>
</table>

<h2>Hidden text syntax
<a name="Hidden text syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The building
blocks of the hidden text syntax are lists representing each
structural component of the hidden text. Structural
components have the following form:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="48%">


<p style="margin-top: 1em"><b>(</b><i>type xmin ymin xmax
ymax</i> <b>... )</b></p></td>
<td width="37%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The symbol
<i>type</i> must be one of <b>page</b>, <b>column</b>,
<b>region</b>, <b>para</b>, <b>line</b>, <b>word</b>, or
<b>char</b>, listed here by decreasing order of importance.
The integers <i>xmin</i>, <i>ymin</i>, <i>xmax</i>, and
<i>ymax</i> represent the coordinates of a rectangle
indicating the position of the structural component in the
page. Coordinates are measured in pixels and have their
origin at the bottom left corner of the page. The remaining
expressions in the list either is a single string
representing the encoded text associated with this
structural component, or is a sequence of structural
components with a lesser type.</p>

<p style="margin-left:11%; margin-top: 1em">The hidden text
for each page is simply represented by a single structural
element of type <b>page</b>. Various level of structural
information are acceptable. For instance, the page level
component might only specify a page level string, or might
only provide a list of lines, or might provide a full
hierarchy down to the individual characters.</p>

<h2>Outline/Bookmark syntax
<a name="Outline/Bookmark syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The outline
syntax is a single list of the form</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="23%">


<p style="margin-top: 1em"><b>(bookmarks ...)</b></p></td>
<td width="62%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The first
element of the list is symbol <b>bookmarks</b>. The
subsequent elements are lists representing the toplevel
outline entries. Each outline entry is represented by a list
with the following form:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="25%">


<p style="margin-top: 1em"><b>(</b><i>title url</i> <b>...
)</b></p> </td>
<td width="60%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The string
<i>title</i> is the title of the outline entry. The
destination string <i>url</i> can be either an arbitrary
percent encoded <small>URL,</small> or composed of the hash
character (&quot;#&quot;) followed by a page name or number,
or composed of the question mark character (&quot;?&quot;)
followed by cgi-style arguments interpreted by the djvu
viewer. The remaining expressions in the list describe
subentries of this outline entry.</p>

<h2>Annotation syntax
<a name="Annotation syntax"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Annotations are
represented by a sequence of annotation expressions. The
following annotation expressions are recognized: <b><br>
(background</b> <i>color</i><b>)</b></p>

<p style="margin-left:22%;">Specify the color of the viewer
area surrounding the DjVu image. Colors are represented with
the X11 hexadecimal syntax <b>#RRGGBB</b>. For instance,
<b>#000000</b> is black and <b>#FFFFFF</b> is white.</p>

<p style="margin-left:11%;"><b>(zoom</b>
<i>zoomvalue</i><b>)</b></p>

<p style="margin-left:22%;">Specify the initial zoom factor
of the image. Argument <i>zoomvalue</i> can be one of
<b>stretch</b>, <b>one2one</b>, <b>width</b>, <b>page</b>,
or composed of the letter <b>d</b> followed by a number in
range 1 to 999 representing a zoom factor (such as in
<b>d300</b> or <b>d150</b> for instance.)</p>

<p style="margin-left:11%;"><b>(mode</b>
<i>modevalue</i><b>)</b></p>

<p style="margin-left:22%;">Specify the initial display
mode of the image. Argument <i>modevalue</i> is one of
<b>color</b>, <b>bw</b>, <b>fore</b>, or <b>back</b>.</p>

<p style="margin-left:11%;"><b>(align</b> <i>horzalign
vertalign</i><b>)</b></p>

<p style="margin-left:22%;">Specify how the image should be
aligned on the viewer surface. By default the image is
located in the center. Argument <i>horzalign</i> can be one
of <b>left</b>, <b>center</b>, or <b>right</b>. Argument
<i>vertalign</i> can be one of <b>top</b>, <b>center</b>, or
<b>bottom</b>.</p>

<p style="margin-left:11%;"><b>(maparea</b> <i>url comment
area</i> <b>...)</b></p>

<p style="margin-left:22%;">Define an hyper-link for the
specified destination.</p>

<p style="margin-left:22%; margin-top: 1em">Argument
<i>url</i> can have one of the following forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="6%">


<p><i>href</i></p></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:26%;"><b>(url</b> <i>href
target</i><b>)</b></p>

<p style="margin-left:22%; margin-top: 1em">where
<i>href</i> is a string representing the destination and
<i>target</i> is a string representing the target frame for
the hyper-link, as defined by the <small>HTML</small> anchor
tag <small>&lt;A&gt;.</small> The destination string
<i>href</i> can be either an arbitrary percent encoded
<small>URL,</small> or composed of the hash character
(&quot;#&quot;) followed by a page name or number, or
composed of the question mark character (&quot;?&quot;)
followed by cgi-style arguments interpreted by the djvu
viewer. Page numbers may be prefixed with an optional sign
to represent a page displacement. For instance the strings
<b>&quot;#-1&quot;</b> and <b>&quot;#+1&quot;</b> can be
used to access the previous page and the next page.</p>

<p style="margin-left:22%; margin-top: 1em">Argument
<i>comment</i> is a string that might be displayed by the
viewer when the user moves the mouse over the
hyper-link.</p>

<p style="margin-left:22%; margin-top: 1em">Argument
<i>area</i> defines the shape and the location of the
hyperlink. The following forms are recognized:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="45%">


<p style="margin-top: 1em"><b>(rect</b> <i>xmin ymin width
height</i><b>)</b></p> </td>
<td width="29%">
</td></tr>
</table>

<p style="margin-left:26%;"><b>(oval</b> <i>xmin ymin width
height</i><b>) <br>
(poly</b> <i>x0 y0 x1 y1</i> <b>... ) <br>
(text</b> <i>xmin ymin width height</i><b>) <br>
(line</b> <i>x0 y0 x1 y1</i><b>)</b></p>

<p style="margin-left:22%; margin-top: 1em">All parameters
are numbers representing coordinates. Coordinates are
measured in pixels and have their origin at the bottom left
corner of the page.</p>

<p style="margin-left:22%; margin-top: 1em">The remaining
expressions in the <b>maparea</b> list represent the visual
effect associated with the hyper-link.</p>

<p style="margin-left:22%; margin-top: 1em">A first set of
options defines how borders are drawn for <b>rect</b>,
<b>oval</b>, <b>polygon</b>, or <b>text</b> hyperlink
areas.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>(none)</b></p></td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:26%;"><b>(xor) <br>
(border</b> <i>color</i><b>) <br>
(shadow_in [</b><i>thickness</i><b>]) <br>
(shadow_out [</b><i>thickness</i><b>]) <br>
(shadow_ein [</b><i>thickness</i><b>]) <br>
(shadow_eout [</b><i>thickness</i><b>])</b></p>

<p style="margin-left:22%; margin-top: 1em">where parameter
<i>color</i> has syntax <b>#RRGGBB</b> as described above,
and parameter thickness is an integer in range 1 to 32. The
last four border options are only supported for <b>rect</b>
hyperlink areas. Although the border mode defaults to
<b>(xor)</b>, it is wise to always specify the border mode.
Border options do not apply to <b>line</b> areas.</p>

<p style="margin-left:22%; margin-top: 1em">When a border
option is specified, the border becomes visible when the
user moves the mouse over the hyperlink. The border may be
made always visible by using the following option:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="20%">


<p style="margin-top: 1em"><b>(border_avis)</b></p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The following
two options may be used with <b>rect</b> hyperlink areas.
The complete area will be highlighted using the specified
color at the specified opacity (0-100, default 50). Some
viewers (e.g., <b>djview4</b>) support opacities in range
0-200 with 200 representing a fully opaque color.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="22%">


<p style="margin-top: 1em"><b>(hilite</b>
<i>color</i><b>)</b></p> </td>
<td width="52%">
</td></tr>
</table>

<p style="margin-left:26%;"><b>(opacity</b>
<i>op</i><b>)</b></p>

<p style="margin-left:22%; margin-top: 1em">This is often
used with an empty <small>URL</small> for simply emphasizing
a specific segment of an image.</p>

<p style="margin-left:22%; margin-top: 1em">The following
three options may be used with line areas to specify an
optional ending arrow, the line width and color. The default
is a black line with width 1 and without arrow.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="11%">


<p style="margin-top: 1em"><b>(arrow)</b></p></td>
<td width="63%">
</td></tr>
</table>

<p style="margin-left:26%;"><b>(width</b> <i>w</i><b>) <br>
(lineclr</b> <i>color</i><b>)</b></p>

<p style="margin-left:22%; margin-top: 1em">Finally the
following three options can be used with text areas. The
default background color is transparent. The default text
color is black. The <b>pushpin</b> option indicates that the
text is symbolized by a small pushpin icon. Clicking the
icon reveals the text.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="26%"></td>
<td width="26%">


<p style="margin-top: 1em"><b>(backclr</b>
<i>bkcolor</i><b>)</b></p> </td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:26%;"><b>(textclr</b>
<i>txtcolor</i><b>) <br>
(pushpin)</b></p>

<p style="margin-left:11%;"><b>(metadata ... (</b><i>key
value</i><b>) ... )</b></p>

<p style="margin-left:22%;">Define metadata entries. Each
entry is identified by a symbol <i>key</i> representing the
nature of the meta data entry. The string <i>value</i>
represents the value associated with the corresponding key.
Two sets of keys are noteworthy: keys borrowed from the
BibTex bibliography system, and keys borrowed from the PDF
DocInfo metadata. BibTex keys are always expressed in
lowercase, such as <b>year</b>, <b>booktitle</b>,
<b>editor</b>, <b>author</b>, etc.. DocInfo keys start with
an uppercase letter, such as <b>Title</b>, <b>Author</b>,
<b>Subject</b>, <b>Creator</b>, <b>Produced</b>,
<b>Trapped</b>, <b>CreationDate</b>, and <b>ModDate</b>. The
values associated with the last two keys should be dates
expressed according to RFC 3339.</p>

<h2>LIMITATIONS
<a name="LIMITATIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The current
version of program <b>djvused</b> only supports selecting
one component file or all component files. There is no way
to select only a few component files.</p>

<h2>CREDITS
<a name="CREDITS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This program
was initially written by L&eacute;on Bottou
&lt;leonb@users.sourceforge.net&gt; and was improved by Yann
Le Cun &lt;profshadoko@users.sourceforge.net&gt;, Florin
Nicsa, Bill Riemers &lt;docbill@sourceforge.net&gt; and many
others.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>djvu</b>(1),
<b>djvutxt</b>(1), <b>djvmcvt</b>(1), <b>djvudump</b>(1),
<b>bzz</b>(1), Emacs djvused front end <b>djvu.el</b> on
<small>GNU Elpa</small> repository.</p>
<hr>
</body>
</html>
