<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:53:58 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERLHACK</title>

</head>
<body>
<h1>perlhack</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perlhack
&minus; How to hack on Perl</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
explains how Perl development works. It includes details
about the Perl 5 Porters email list, the Perl repository,
the Perl bug tracker, patch guidelines, and commentary on
Perl development philosophy.</p>

<h2>SUPER QUICK PATCH GUIDE
<a name="SUPER QUICK PATCH GUIDE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you just
want to submit a single small patch like a pod fix, a test
for a bug, comment fixes, etc., it&rsquo;s easy!
Here&rsquo;s how:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="48%">


<p>Check out the source repository</p></td>
<td width="35%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The perl source
is in a git repository. You can clone the repository with
the following command:</p>

<p style="margin-left:17%; margin-top: 1em">% git clone
https://github.com/Perl/perl5.git perl</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="63%">


<p style="margin-top: 1em">Ensure you&rsquo;re following
the latest advice</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">In case the
advice in this guide has been updated recently, read the
latest version directly from the perl source:</p>

<p style="margin-left:17%; margin-top: 1em">% perldoc
pod/perlhack.pod</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="48%">


<p style="margin-top: 1em">Create a branch for your
change</p> </td>
<td width="35%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Create a branch
based on blead to commit your change to, which will later be
used to send it to the Perl issue tracker.</p>

<p style="margin-left:17%; margin-top: 1em">% git checkout
&minus;b mychange</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="25%">


<p style="margin-top: 1em">Make your change</p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Hack, hack,
hack. Keep in mind that Perl runs on many different
platforms, with different operating systems that have
different capabilities, different filesystem organizations,
and even different character sets. perlhacktips gives advice
on this.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="25%">


<p style="margin-top: 1em">Test your change</p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">You can run all
the tests with the following commands:</p>

<p style="margin-left:17%; margin-top: 1em">% ./Configure
&minus;des &minus;Dusedevel <br>
% make test</p>

<p style="margin-left:17%; margin-top: 1em">Keep hacking
until the tests pass.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="28%">


<p style="margin-top: 1em">Commit your change</p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Committing your
work will save the change <i>on your local system</i>:</p>

<p style="margin-left:17%; margin-top: 1em">% git commit
&minus;a &minus;m 'Commit message goes here'</p>

<p style="margin-left:17%; margin-top: 1em">Make sure the
commit message describes your change in a single sentence.
For example, &quot;Fixed spelling errors in
perlhack.pod&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="65%">


<p style="margin-top: 1em">Send your change to the Perl
issue tracker</p></td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The next step
is to submit your patch to the Perl core ticket system.</p>

<p style="margin-left:17%; margin-top: 1em">Create a GitHub
fork of the perl5 repository and add it as a remote, if you
haven&rsquo;t already, as described in the GitHub
documentation at
&lt;https://help.github.com/en/articles/working&minus;with&minus;forks&gt;.</p>

<p style="margin-left:17%; margin-top: 1em">% git remote
add fork git@github.com:MyUser/perl5.git</p>

<p style="margin-left:17%; margin-top: 1em">For more
information, see &quot;Connecting to GitHub with
<small>SSH&quot;</small>
&lt;https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/connecting-to-github-with-ssh&gt;.</p>

<p style="margin-left:17%; margin-top: 1em">If you&rsquo;d
rather use an <small>HTTPS URL</small> for your &quot;git
push&quot; see &quot;Cloning with <small>HTTPS</small>
URLs&quot;
&lt;https://docs.github.com/en/free-pro-team@latest/github/using-git/which-remote-url-should-i-use#cloning-with-https-urls&gt;.</p>

<p style="margin-left:17%; margin-top: 1em">% git remote
add fork https://github.com/MyUser/perl5.git</p>

<p style="margin-left:17%; margin-top: 1em">Then, push your
new branch to your fork.</p>

<p style="margin-left:17%; margin-top: 1em">% git push
&minus;u fork mychange</p>

<p style="margin-left:17%; margin-top: 1em">Finally, create
a Pull Request on GitHub from your branch to blead as
described in the GitHub documentation at
&lt;https://help.github.com/en/articles/creating&minus;a&minus;pull&minus;request&minus;from&minus;a&minus;fork&gt;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="14%">


<p style="margin-top: 1em">Thank you</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The porters
appreciate the time you spent helping to make Perl better.
Thank you!</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="23%">


<p style="margin-top: 1em">Acknowledgement</p></td>
<td width="60%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">All
contributors are credited (by name and email address) in the
<small>AUTHORS</small> file, which is part of the perl
distribution, as well as the Git commit history.</p>

<p style="margin-left:17%; margin-top: 1em">If you donXt
want to be included in the <small>AUTHORS</small> file, just
let us know. Otherwise we will take your submission of a
patch as permission to credit you in the
<small>AUTHORS</small> file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="14%">


<p style="margin-top: 1em">Next time</p></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The next time
you wish to make a patch, you need to start from the latest
perl in a pristine state. Check you don&rsquo;t have any
local changes or added files in your perl check-out which
you wish to keep, then run these commands:</p>

<p style="margin-left:17%; margin-top: 1em">% git checkout
blead <br>
% git pull <br>
% git reset &minus;&minus;hard origin/blead <br>
% git clean &minus;dxf</p>

<h2>BUG REPORTING
<a name="BUG REPORTING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you want to
report a bug in Perl, or browse existing Perl bugs and
patches, use the GitHub issue tracker at
&lt;https://github.com/perl/perl5/issues&gt;.</p>

<p style="margin-left:11%; margin-top: 1em">Please check
the archive of the perl5&minus;porters list (see below)
and/or the bug tracking system before submitting a bug
report. Often, you&rsquo;ll find that the bug has been
reported already.</p>

<p style="margin-left:11%; margin-top: 1em">You can log in
to the bug tracking system and comment on existing bug
reports. If you have additional information regarding an
existing bug, please add it. This will help the porters fix
the bug.</p>

<h2>PERL 5 PORTERS
<a name="PERL 5 PORTERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
perl5&minus;porters (p5p) mailing list is where the Perl
standard distribution is maintained and developed. The
people who maintain Perl are also referred to as the
&quot;Perl 5 Porters&quot;, &quot;p5p&quot; or just the
&quot;porters&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">A searchable
archive of the list is available at
&lt;https://markmail.org/search/?q=perl5&minus;porters&gt;.
There is also an archive at
&lt;https://archive.develooper.com/perl5&minus;porters@perl.org/&gt;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>perl-changes
mailing list</b> <br>
The perl5&minus;changes mailing list receives a copy of each
patch that gets submitted to the maintenance and development
branches of the perl repository. See
&lt;https://lists.perl.org/list/perl5&minus;changes.html&gt;
for subscription and archive information.</p>

<p style="margin-left:11%; margin-top: 1em"><b>#p5p on
<small>IRC</small></b> <br>
Many porters are also active on the
&lt;irc://irc.perl.org/#p5p&gt; channel. Feel free to join
the channel and ask questions about hacking on the Perl
core.</p>

<h2>GETTING THE PERL SOURCE
<a name="GETTING THE PERL SOURCE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All of
Perl&rsquo;s source code is kept centrally in a Git
repository at <i>github.com</i>. The repository contains
many Perl revisions from Perl 1 onwards and all the
revisions from Perforce, the previous version control
system.</p>

<p style="margin-left:11%; margin-top: 1em">For much more
detail on using git with the Perl repository, please see
perlgit.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Read access
via Git</b> <br>
You will need a copy of Git for your computer. You can fetch
a copy of the repository using the git protocol:</p>

<p style="margin-left:11%; margin-top: 1em">% git clone
git@github.com:Perl/perl5.git perl</p>

<p style="margin-left:11%; margin-top: 1em">This clones the
repository and makes a local copy in the <i>perl</i>
directory.</p>

<p style="margin-left:11%; margin-top: 1em">If you cannot
use the git protocol for firewall reasons, you can also
clone via http:</p>

<p style="margin-left:11%; margin-top: 1em">% git clone
https://github.com/Perl/perl5.git perl</p>

<p style="margin-left:11%; margin-top: 1em"><b>Read access
via the web</b> <br>
You may access the repository over the web. This allows you
to browse the tree, see recent commits, subscribe to
repository notifications, search for particular commits and
more. You may access it at
&lt;https://github.com/Perl/perl5&gt;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Write access
via git</b> <br>
If you have a commit bit, please see perlgit for more
details on using git.</p>

<h2>PATCHING PERL
<a name="PATCHING PERL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
planning to do more extensive work than a single small fix,
we encourage you to read the documentation below. This will
help you focus your work and make your patches easier to
incorporate into the Perl source.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Submitting
patches</b> <br>
If you have a small patch to submit, please submit it via
the GitHub Pull Request workflow. You may also send patches
to the p5p list.</p>

<p style="margin-left:11%; margin-top: 1em">Patches are
reviewed and discussed on GitHub or the p5p list. Simple,
uncontroversial patches will usually be applied without any
discussion. When the patch is applied, the ticket will be
updated and you will receive email.</p>

<p style="margin-left:11%; margin-top: 1em">In other cases,
the patch will need more work or discussion. You are
encouraged to participate in the discussion and advocate for
your patch. Sometimes your patch may get lost in the
shuffle. It&rsquo;s appropriate to send a reminder email to
p5p if no action has been taken in a month. Please remember
that the Perl 5 developers are all volunteers, and be
polite.</p>

<p style="margin-left:11%; margin-top: 1em">Changes are
always applied directly to the main development branch,
called &quot;blead&quot;. Some patches may be backported to
a maintenance branch. If you think your patch is appropriate
for the maintenance branch (see &quot; <small>MAINTENANCE
BRANCHES&quot;</small> in perlpolicy), please explain why
when you submit it.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Getting your
patch accepted</b> <br>
If you are submitting a code patch there are several things
that you can do to help the Perl 5 Porters accept your
patch.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Patch
style</i></p>

<p style="margin-left:11%; margin-top: 1em">Using the
GitHub Pull Request workflow, your patch will automatically
be available in a suitable format. If you wish to submit a
patch to the p5p list for review, make sure to create it
appropriately.</p>

<p style="margin-left:11%; margin-top: 1em">If you used git
to check out the Perl source, then using &quot;git
format&minus;patch&quot; will produce a patch in a style
suitable for Perl. The &quot;format&minus;patch&quot;
command produces one patch file for each commit you made. If
you prefer to send a single patch for all commits, you can
use &quot;git diff&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">% git checkout
blead <br>
% git pull <br>
% git diff blead my&minus;branch&minus;name</p>

<p style="margin-left:11%; margin-top: 1em">This produces a
patch based on the difference between blead and your current
branch. It&rsquo;s important to make sure that blead is up
to date before producing the diff, that&rsquo;s why we call
&quot;git pull&quot; first.</p>

<p style="margin-left:11%; margin-top: 1em">We strongly
recommend that you use git if possible. It will make your
life easier, and ours as well.</p>

<p style="margin-left:11%; margin-top: 1em">However, if
you&rsquo;re not using git, you can still produce a suitable
patch. You&rsquo;ll need a pristine copy of the Perl source
to diff against. The porters prefer unified diffs. Using
<small>GNU</small> &quot;diff&quot;, you can produce a diff
like this:</p>

<p style="margin-left:11%; margin-top: 1em">% diff
&minus;Npurd perl.pristine perl.mine</p>

<p style="margin-left:11%; margin-top: 1em">Make sure that
you &quot;make realclean&quot; in your copy of Perl to
remove any build artifacts, or you may get a confusing
result.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Commit
message</i></p>

<p style="margin-left:11%; margin-top: 1em">As you craft
each patch you intend to submit to the Perl core, it&rsquo;s
important to write a good commit message. This is especially
important if your submission will consist of a series of
commits.</p>

<p style="margin-left:11%; margin-top: 1em">The first line
of the commit message should be a short description without
a period. It should be no longer than the subject line of an
email, 50 characters being a good rule of thumb.</p>

<p style="margin-left:11%; margin-top: 1em">A lot of Git
tools (Gitweb, GitHub, git log &minus;&minus;pretty=oneline,
...) will only display the first line (cut off at 50
characters) when presenting commit summaries.</p>

<p style="margin-left:11%; margin-top: 1em">The commit
message should include a description of the problem that the
patch corrects or new functionality that the patch adds.</p>

<p style="margin-left:11%; margin-top: 1em">As a general
rule of thumb, your commit message should help a programmer
who knows the Perl core quickly understand what you were
trying to do, how you were trying to do it, and why the
change matters to Perl.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="5%">


<p style="margin-top: 1em">Why</p></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Your commit
message should describe why the change you are making is
important. When someone looks at your change in six months
or six years, your intent should be clear.</p>

<p style="margin-left:17%; margin-top: 1em">If you&rsquo;re
deprecating a feature with the intent of later simplifying
another bit of code, say so. If you&rsquo;re fixing a
performance problem or adding a new feature to support some
other bit of the core, mention that.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="6%">


<p style="margin-top: 1em">What</p></td>
<td width="77%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Your commit
message should describe what part of the Perl core
you&rsquo;re changing and what you expect your patch to
do.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="5%">


<p style="margin-top: 1em">How</p></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">While
it&rsquo;s not necessary for documentation changes, new
tests or trivial patches, it&rsquo;s often worth explaining
how your change works. Even if it&rsquo;s clear to you
today, it may not be clear to a porter next month or next
year.</p>

<p style="margin-left:11%; margin-top: 1em">A commit
message isn&rsquo;t intended to take the place of comments
in your code. Commit messages should describe the change you
made, while code comments should describe the current state
of the code.</p>

<p style="margin-left:11%; margin-top: 1em">If you&rsquo;ve
just implemented a new feature, complete with doc, tests and
well-commented code, a brief commit message will often
suffice. If, however, you&rsquo;ve just changed a single
character deep in the parser or lexer, you might need to
write a small novel to ensure that future readers understand
what you did and why you did it.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Comments,
Comments, Comments</i></p>

<p style="margin-left:11%; margin-top: 1em">Be sure to
adequately comment your code. While commenting every line is
unnecessary, anything that takes advantage of side effects
of operators, that creates changes that will be felt outside
of the function being patched, or that others may find
confusing should be documented. If you are going to err, it
is better to err on the side of adding too many comments
than too few.</p>

<p style="margin-left:11%; margin-top: 1em">The best
comments explain <i>why</i> the code does what it does, not
<i>what it does</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><i>Style</i></p>

<p style="margin-left:11%; margin-top: 1em">In general,
please follow the particular style of the code you are
patching.</p>

<p style="margin-left:11%; margin-top: 1em">In particular,
follow these general guidelines for patching Perl
sources:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">4&minus;wide indents for code,
2&minus;wide indents for nested <small>CPP</small>
&quot;#define&quot;s, with 8&minus;wide tabstops.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Use spaces for indentation, not tab characters.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The codebase is
a mixture of tabs and spaces for indentation, and we are
moving to spaces only. Converting lines you&rsquo;re
patching from 8&minus;wide tabs to spaces will help this
migration.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="43%">


<p style="margin-top: 1em">Try not to exceed 79 columns</p></td>
<td width="40%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">In general, we
target 80 column lines. When sticking to 80 columns would
lead to torturous code or rework, it&rsquo;s fine to go
longer. Try to keep your excess past 80 to a minimum.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><small>ANSI C</small>
prototypes</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Uncuddled elses and &quot;K&amp;R&quot; style for
indenting control constructs</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>No C <small>++</small> style (//) comments</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Mark places that need to be revisited with
<small>XXX</small> (and revisit often!)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Opening brace lines up with &quot;if&quot; when
conditional spans multiple lines; should be at end-of-line
otherwise</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>In function definitions, name starts in column 0 (return
value-type is on previous line)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Single space after keywords that are followed by parens,
no space between function name and following paren</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Avoid assignments in conditionals, but if they&rsquo;re
unavoidable, use extra paren, e.g. &quot;if (a &amp;&amp; (b
= c)) ...&quot;</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>&quot;return foo;&quot; rather than
&quot;return(foo);&quot;</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>&quot;if (!foo) ...&quot; rather than &quot;if (foo ==
<small>FALSE</small> ) ...&quot; etc.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Do not declare variables using &quot;register&quot;. It
may be counterproductive with modern compilers, and is
deprecated in C <small>++</small> , under which the Perl
source is regularly compiled.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>In-line functions that are in headers that are
accessible to <small>XS</small> code need to be able to
compile without warnings with commonly used extra
compilation flags, such as gcc&rsquo;s
&quot;&minus;Wswitch&minus;default&quot; which warns
whenever a switch statement does not have a
&quot;default&quot; case. The use of these extra flags is to
catch potential problems in legal C code, and is often used
by Perl aggregators, such as Linux distributors.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><i>Test
suite</i></p>

<p style="margin-left:11%; margin-top: 1em">If your patch
changes code (rather than just changing documentation), you
should also include one or more test cases which illustrate
the bug you&rsquo;re fixing or validate the new
functionality you&rsquo;re adding. In general, you should
update an existing test file rather than create a new
one.</p>

<p style="margin-left:11%; margin-top: 1em">Your test suite
additions should generally follow these guidelines (courtesy
of Gurusamy Sarathy &lt;gsar@activestate.com&gt;):</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Know what you&rsquo;re testing.
Read the docs, and the source.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Tend to fail, not succeed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Interpret results strictly.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Use unrelated features (this will flush out bizarre
interactions).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Use non-standard idioms (otherwise you are not testing
<small>TIMTOWTDI</small> ).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Avoid using hardcoded test numbers whenever possible
(the <small>EXPECTED/GOT</small> found in t/op/tie.t is much
more maintainable, and gives better failure reports).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Give meaningful error messages when a test fails.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Avoid using qx// and <b>system()</b> unless you are
testing for them. If you do use them, make sure that you
cover _all_ perl platforms.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Unlink any temporary files you create.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Promote unforeseen warnings to errors with
$SIG{__WARN__}.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Be sure to use the libraries and modules shipped with
the version being tested, not those that were already
installed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Add comments to the code explaining what you are testing
for.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Make updating the &rsquo;1..42&rsquo; string
unnecessary. Or make sure that you update it.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Test _all_ behaviors of a given operator, library, or
function.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Test all
optional arguments.</p>

<p style="margin-left:17%; margin-top: 1em">Test return
values in various contexts (boolean, scalar, list,
lvalue).</p>

<p style="margin-left:17%; margin-top: 1em">Use both global
and lexical variables.</p>

<p style="margin-left:17%; margin-top: 1em">Don&rsquo;t
forget the exceptional, pathological cases.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Patching a
core module</b> <br>
This works just like patching anything else, with one extra
consideration.</p>

<p style="margin-left:11%; margin-top: 1em">Modules in the
<i>cpan/</i> directory of the source tree are maintained
outside of the Perl core. When the author updates the
module, the updates are simply copied into the core. See
that module&rsquo;s documentation or its listing on
&lt;https://metacpan.org/&gt; for more information on
reporting bugs and submitting patches.</p>

<p style="margin-left:11%; margin-top: 1em">In most cases,
patches to modules in <i>cpan/</i> should be sent upstream
and should not be applied to the Perl core individually. If
a patch to a file in <i>cpan/</i> absolutely cannot wait for
the fix to be made upstream, released to <small>CPAN</small>
and copied to blead, you must add (or update) a
&quot;CUSTOMIZED&quot; entry in the
<i>Porting/Maintainers.pl</i> file to flag that a local
modification has been made. See
<i>Porting/Maintainers.pl</i> for more details.</p>

<p style="margin-left:11%; margin-top: 1em">In contrast,
modules in the <i>dist/</i> directory are maintained in the
core.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Updating
perldelta</b> <br>
For changes significant enough to warrant a
<i>pod/perldelta.pod</i> entry, the porters will greatly
appreciate it if you submit a delta entry along with your
actual change. Significant changes include, but are not
limited to:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Adding, deprecating, or removing
core features</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Adding, deprecating, removing, or upgrading core or
dual-life modules</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Adding new core tests</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Fixing security issues and user-visible bugs in the
core</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Changes that might break existing code, either on the
perl or C level</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Significant performance improvements</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Adding, removing, or significantly changing
documentation in the <i>pod/</i> directory</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Important platform-specific changes</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Please make
sure you add the perldelta entry to the right section within
<i>pod/perldelta.pod</i>. More information on how to write
good perldelta entries is available in the &quot;Style&quot;
section of <i>Porting/how_to_write_a_perldelta.pod</i>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>What makes
for a good patch?</b> <br>
New features and extensions to the language can be
contentious. There is no specific set of criteria which
determine what features get added, but here are some
questions to consider when developing a patch:</p>

<p style="margin-left:11%; margin-top: 1em"><i>Does the
concept match the general goals of Perl?</i></p>

<p style="margin-left:11%; margin-top: 1em">Our goals
include, but are not limited to:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="3%"></td>
<td width="83%">


<p style="margin-top: 1em">Keep it fast, simple, and
useful.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>2.</p></td>
<td width="3%"></td>
<td width="83%">


<p>Keep features/concepts as orthogonal as possible.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>3.</p></td>
<td width="3%"></td>
<td width="83%">


<p>No arbitrary limits (platforms, data sizes,
cultures).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>4.</p></td>
<td width="3%"></td>
<td width="83%">


<p>Keep it open and exciting to use/patch/advocate Perl
everywhere.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>5.</p></td>
<td width="3%"></td>
<td width="83%">


<p>Either assimilate new technologies, or build bridges to
them.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><i>Where is the
implementation?</i></p>

<p style="margin-left:11%; margin-top: 1em">All the talk in
the world is useless without an implementation. In almost
every case, the person or people who argue for a new feature
will be expected to be the ones who implement it. Porters
capable of coding new features have their own agendas, and
are not available to implement your (possibly good)
idea.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Backwards
compatibility</i></p>

<p style="margin-left:11%; margin-top: 1em">It&rsquo;s a
cardinal sin to break existing Perl programs. New warnings
can be contentious--some say that a program that emits
warnings is not broken, while others say it is. Adding
keywords has the potential to break programs, changing the
meaning of existing token sequences or functions might break
programs.</p>

<p style="margin-left:11%; margin-top: 1em">The Perl 5 core
includes mechanisms to help porters make backwards
incompatible changes more compatible such as the feature and
deprecate modules. Please use them when appropriate.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Could it be
a module instead?</i></p>

<p style="margin-left:11%; margin-top: 1em">Perl 5 has
extension mechanisms, modules and <small>XS,</small>
specifically to avoid the need to keep changing the Perl
interpreter. You can write modules that export functions,
you can give those functions prototypes so they can be
called like built-in functions, you can even write
<small>XS</small> code to mess with the runtime data
structures of the Perl interpreter if you want to implement
really complicated things.</p>

<p style="margin-left:11%; margin-top: 1em">Whenever
possible, new features should be prototyped in a
<small>CPAN</small> module before they will be considered
for the core.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Is the
feature generic enough?</i></p>

<p style="margin-left:11%; margin-top: 1em">Is this
something that only the submitter wants added to the
language, or is it broadly useful? Sometimes, instead of
adding a feature with a tight focus, the porters might
decide to wait until someone implements the more generalized
feature.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Does it
potentially introduce new bugs?</i></p>

<p style="margin-left:11%; margin-top: 1em">Radical
rewrites of large chunks of the Perl interpreter have the
potential to introduce new bugs.</p>

<p style="margin-left:11%; margin-top: 1em"><i>How big is
it?</i></p>

<p style="margin-left:11%; margin-top: 1em">The smaller and
more localized the change, the better. Similarly, a series
of small patches is greatly preferred over a single large
patch.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Does it
preclude other desirable features?</i></p>

<p style="margin-left:11%; margin-top: 1em">A patch is
likely to be rejected if it closes off future avenues of
development. For instance, a patch that placed a true and
final interpretation on prototypes is likely to be rejected
because there are still options for the future of prototypes
that haven&rsquo;t been addressed.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Is the
implementation robust?</i></p>

<p style="margin-left:11%; margin-top: 1em">Good patches
(tight code, complete, correct) stand more chance of going
in. Sloppy or incorrect patches might be placed on the back
burner until fixes can be made, or they might be discarded
altogether without further notice.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Is the
implementation generic enough to be portable?</i></p>

<p style="margin-left:11%; margin-top: 1em">The worst
patches make use of system-specific features. It&rsquo;s
highly unlikely that non-portable additions to the Perl
language will be accepted.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Is the
implementation tested?</i></p>

<p style="margin-left:11%; margin-top: 1em">Patches which
change behaviour (fixing bugs or introducing new features)
must include regression tests to verify that everything
works as expected.</p>

<p style="margin-left:11%; margin-top: 1em">Without tests
provided by the original author, how can anyone else
changing perl in the future be sure that they haven&rsquo;t
unwittingly broken the behaviour the patch implements? And
without tests, how can the patch&rsquo;s author be confident
that his/her hard work put into the patch won&rsquo;t be
accidentally thrown away by someone in the future?</p>

<p style="margin-left:11%; margin-top: 1em"><i>Is there
enough documentation?</i></p>

<p style="margin-left:11%; margin-top: 1em">Patches without
documentation are probably ill-thought out or incomplete. No
features can be added or changed without documentation, so
submitting a patch for the appropriate pod docs as well as
the source code is important.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Is there
another way to do it?</i></p>

<p style="margin-left:11%; margin-top: 1em">Larry said
&quot;Although the Perl Slogan is <i>There&rsquo;s More Than
One Way to Do It</i>, I hesitate to make 10 ways to do
something&quot;. This is a tricky heuristic to navigate,
though--one man&rsquo;s essential addition is another
man&rsquo;s pointless cruft.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Does it
create too much work?</i></p>

<p style="margin-left:11%; margin-top: 1em">Work for the
committers, work for Perl programmers, work for module
authors, ... Perl is supposed to be easy.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Patches
speak louder than words</i></p>

<p style="margin-left:11%; margin-top: 1em">Working code is
always preferred to pie-in-the-sky ideas. A patch to add a
feature stands a much higher chance of making it to the
language than does a random feature request, no matter how
fervently argued the request might be. This ties into
&quot;Will it be useful?&quot;, as the fact that someone
took the time to make the patch demonstrates a strong desire
for the feature.</p>

<h2>TESTING
<a name="TESTING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The core uses
the same testing style as the rest of Perl, a simple
&quot;ok/not ok&quot; run through Test::Harness, but there
are a few special considerations.</p>

<p style="margin-left:11%; margin-top: 1em">There are three
ways to write a test in the core: Test::More,
<i>t/test.pl</i> and ad hoc &quot;print $test ? &quot;ok
42\n&quot; : &quot;not ok 42\n&quot;&quot;. The decision of
which to use depends on what part of the test suite
you&rsquo;re working on. This is a measure to prevent a
high-level failure (such as Config.pm breaking) from causing
basic functionality tests to fail.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>t/test.pl</i> library provides some of the features of
Test::More, but avoids loading most modules and uses as few
core features as possible.</p>

<p style="margin-left:11%; margin-top: 1em">If you write
your own test, use the Test Anything Protocol
&lt;https://testanything.org&gt;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="43%">


<p style="margin-top: 1em"><i>t/base</i>, <i>t/comp</i> and
<i>t/opbasic</i></p> </td>
<td width="40%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Since we
don&rsquo;t know if &quot;require&quot; works, or even
subroutines, use ad hoc tests for these three. Step
carefully to avoid using the feature being tested. Tests in
<i>t/opbasic</i>, for instance, have been placed there
rather than in <i>t/op</i> because they test functionality
which <i>t/test.pl</i> presumes has already been
demonstrated to work.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="46%">


<p style="margin-top: 1em">All other subdirectories of
<i>t/</i></p> </td>
<td width="37%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Now that basic
<b>require()</b> and subroutines are tested, you can use the
<i>t/test.pl</i> library.</p>

<p style="margin-left:17%; margin-top: 1em">You can also
use certain libraries like Config conditionally, but be sure
to skip the test gracefully if it&rsquo;s not there.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="45%">


<p style="margin-top: 1em">Test files not found under
<i>t/</i></p> </td>
<td width="38%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This category
includes <i>.t</i> files underneath directories such as
<i>dist</i>, <i>ext</i> and <i>lib</i>. Since the core of
Perl has now been tested, Test::More can and now should be
used. You can also use the full suite of core modules in the
tests. (As noted in &quot;Patching a core module&quot;
above, changes to <i>.t</i> files found under <i>cpan/</i>
should be submitted to the upstream maintainers of those
modules.)</p>

<p style="margin-left:11%; margin-top: 1em">When you say
&quot;make test&quot;, Perl uses the <i>t/TEST</i> program
to run the test suite (except under Win32 where it uses
<i>t/harness</i> instead). All tests are run from the
<i>t/</i> directory, <b>not</b> the directory which contains
the test. This causes some problems with the tests in
<i>lib/</i>, so here&rsquo;s some opportunity for some
patching.</p>

<p style="margin-left:11%; margin-top: 1em">You must be
triply conscious of cross-platform concerns. This usually
boils down to using File::Spec, avoiding things like
&quot;fork()&quot; and &quot;system()&quot; unless
absolutely necessary, and not assuming that a given
character has a particular ordinal value (code point) or
that its <small>UTF&minus;8</small> representation is
composed of particular bytes.</p>

<p style="margin-left:11%; margin-top: 1em">There are
several functions available to specify characters and code
points portably in tests. The always-preloaded functions
&quot;utf8::unicode_to_native()&quot; and its inverse
&quot;utf8::native_to_unicode()&quot; take code points and
translate appropriately. The file <i>t/charset_tools.pl</i>
has several functions that can be useful. It has versions of
the previous two functions that take strings as inputs --
not single numeric code points: &quot;uni_to_native()&quot;
and &quot;native_to_uni()&quot;. If you must look at the
individual bytes comprising a <small>UTF&minus;8</small>
encoded string, &quot;byte_utf8a_to_utf8n()&quot; takes as
input a string of those bytes encoded for an
<small>ASCII</small> platform, and returns the equivalent
string in the native platform. For example,
&quot;byte_utf8a_to_utf8n(&quot;\xC2\xA0&quot;)&quot;
returns the byte sequence on the current platform that form
the <small>UTF&minus;8</small> for &quot;U+00A0&quot;, since
&quot;\xC2\xA0&quot; are the <small>UTF&minus;8</small>
bytes on an <small>ASCII</small> platform for that code
point. This function returns &quot;\xC2\xA0&quot; on an
<small>ASCII</small> platform, and &quot;\x80\x41&quot; on
an <small>EBCDIC 1047</small> one.</p>

<p style="margin-left:11%; margin-top: 1em">But easiest is,
if the character is specifiable as a literal, like
&quot;A&quot; or &quot;%&quot;, to use that; if not so
specificable, you can use &quot;\N{}&quot; , if the side
effects aren&rsquo;t troublesome. Simply specify all your
characters in hex, using &quot;\N{U+ZZ}&quot; instead of
&quot;\xZZ&quot;. &quot;\N{}&quot; is the Unicode name, and
so it always gives you the Unicode character.
&quot;\N{U+41}&quot; is the character whose Unicode code
point is 0x41, hence is 'A' on all platforms. The side
effects are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">These select Unicode rules. That
means that in double-quotish strings, the string is always
converted to <small>UTF&minus;8</small> to force a Unicode
interpretation (you can &quot;utf8::downgrade()&quot;
afterwards to convert back to non&minus;UTF8, if possible).
In regular expression patterns, the conversion isn&rsquo;t
done, but if the character set modifier would otherwise be
&quot;/d&quot;, it is changed to &quot;/u&quot;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>If you use the form &quot;\N{<i>character
name</i>}&quot;, the charnames module gets automatically
loaded. This may not be suitable for the test level you are
doing.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If you are
testing locales (see perllocale), there are helper functions
in <i>t/loc_tools.pl</i> to enable you to see what locales
there are on the current platform.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Special
&quot;make test&quot; targets</b> <br>
There are various special make targets that can be used to
test Perl slightly differently than the standard
&quot;test&quot; target. Not all them are expected to give a
100% success rate. Many of them have several aliases, and
many of them are not available on certain operating
systems.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="18%">


<p style="margin-top: 1em">test_porting</p></td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This runs some
basic sanity tests on the source tree and helps catch basic
errors before you submit a patch.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p style="margin-top: 1em">minitest</p></td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Run
<i>miniperl</i> on <i>t/base</i>, <i>t/comp</i>,
<i>t/cmd</i>, <i>t/run</i>, <i>t/io</i>, <i>t/op</i>,
<i>t/uni</i> and <i>t/mro</i> tests.</p>


<p style="margin-left:17%; margin-top: 1em"><i>miniperl</i>
is a minimalistic perl built to bootstrap building
extensions, utilties, documentation etc. It doesn&rsquo;t
support dynamic loading and depending on the point in the
build process will only have access to a limited set of core
modules. <i>miniperl</i> is not intended for day to day
use.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="43%">


<p style="margin-top: 1em">test.valgrind check.valgrind</p></td>
<td width="40%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">(Only in Linux)
Run all the tests using the memory leak + naughty memory
access tool &quot;valgrind&quot;. The log files will be
named <i>testname.valgrind</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="18%">


<p style="margin-top: 1em">test_harness</p></td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Run the test
suite with the <i>t/harness</i> controlling program, instead
of <i>t/TEST</i>. <i>t/harness</i> is more sophisticated,
and uses the Test::Harness module, thus using this test
target supposes that perl mostly works. The main advantage
for our purposes is that it prints a detailed summary of
failed tests at the end. Also, unlike <i>t/TEST</i>, it
doesn&rsquo;t redirect stderr to stdout.</p>

<p style="margin-left:17%; margin-top: 1em">Note that under
Win32 <i>t/harness</i> is always used instead of
<i>t/TEST</i>, so there is no special
&quot;test_harness&quot; target.</p>

<p style="margin-left:17%; margin-top: 1em">Under
Win32&rsquo;s &quot;test&quot; target you may use the
<small>TEST_SWITCHES</small> and <small>TEST_FILES</small>
environment variables to control the behaviour of
<i>t/harness</i>. This means you can say</p>

<p style="margin-left:17%; margin-top: 1em">nmake test
TEST_FILES=&quot;op/*.t&quot; <br>
nmake test TEST_SWITCHES=&quot;&minus;torture&quot;
TEST_FILES=&quot;op/*.t&quot;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="32%">


<p style="margin-top: 1em">test-notty test_notty</p></td>
<td width="51%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Sets
<small>PERL_SKIP_TTY_TEST</small> to true before running
normal test.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Parallel
tests</b> <br>
The core distribution can now run its regression tests in
parallel on Unix-like and Windows platforms. On Unix,
instead of running &quot;make test&quot;, set
&quot;TEST_JOBS&quot; in your environment to the number of
tests to run in parallel, and run &quot;make
test_harness&quot;. On a Bourne-like shell, this can be done
as</p>

<p style="margin-left:11%; margin-top: 1em">TEST_JOBS=3
make test_harness # Run 3 tests in parallel</p>

<p style="margin-left:11%; margin-top: 1em">An environment
variable is used, rather than parallel make itself, because
TAP::Harness needs to be able to schedule individual
non-conflicting test scripts itself, and there is no
standard interface to &quot;make&quot; utilities to interact
with their job schedulers.</p>

<p style="margin-left:11%; margin-top: 1em">Tests are
normally run in a logical order, with the sanity tests
first, then the main tests of the Perl core functionality,
then the tests for the non-core modules. On many-core
systems, this may not use the hardware as effectively as
possible. By also specifying</p>

<p style="margin-left:11%; margin-top: 1em">TEST_JOBS=19
PERL_TEST_HARNESS_ASAP=1 make &minus;j19 test_harness</p>

<p style="margin-left:11%; margin-top: 1em">you signal that
you want the tests to finish in wall-clock time as short as
possible. After the sanity tests are completed, this causes
the remaining ones to be packed into the available cores as
tightly as we know how. This has its greatest effect on
slower, many-core systems. Throughput was sped up by 20% on
an outmoded 24&minus;core system; less on more recent faster
ones with fewer cores.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
command line above added a &quot;&minus;j&quot; parameter to
make, so as to cause parallel compilation. This may or may
not work on your platform.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Running
tests by hand</b> <br>
You can run part of the test suite by hand by using one of
the following commands from the <i>t/</i> directory:</p>

<p style="margin-left:11%; margin-top: 1em">./perl
&minus;I../lib TEST list&minus;of&minus;.t&minus;files</p>

<p style="margin-left:11%; margin-top: 1em">or</p>

<p style="margin-left:11%; margin-top: 1em">./perl
&minus;I../lib harness
list&minus;of&minus;.t&minus;files</p>

<p style="margin-left:11%; margin-top: 1em">(If you
don&rsquo;t specify test scripts, the whole test suite will
be run.)</p>

<p style="margin-left:11%; margin-top: 1em"><b>Using</b>
<i>t/harness</i> <b>for testing</b> <br>
If you use &quot;harness&quot; for testing, you have several
command line options available to you. The arguments are as
follows, and are in the order that they must appear if used
together.</p>

<p style="margin-left:11%; margin-top: 1em">harness
&minus;v &minus;torture &minus;re=pattern LIST OF FILES TO
TEST <br>
harness &minus;v &minus;torture &minus;re LIST OF PATTERNS
TO MATCH</p>

<p style="margin-left:11%; margin-top: 1em">If &quot;LIST
OF FILES TO TEST&quot; is omitted, the file list is obtained
from the manifest. The file list may include shell wildcards
which will be expanded out.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="3%">


<p style="margin-top: 1em">&minus;v</p></td>
<td width="80%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Run the tests
under verbose mode so you can see what tests were run, and
debug output.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p style="margin-top: 1em">&minus;torture</p></td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Run the torture
tests as well as the normal set.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="17%">


<p style="margin-top: 1em">&minus;re=PATTERN</p></td>
<td width="66%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Filter the file
list so that all the test files run match
<small>PATTERN.</small> Note that this form is distinct from
the <b>&minus;re <small>LIST OF PATTERNS</small></b> form
below in that it allows the file list to be provided as
well.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="31%">


<p style="margin-top: 1em">&minus;re <small>LIST OF
PATTERNS</small></p> </td>
<td width="52%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Filter the file
list so that all the test files run match
/(LIST|OF|PATTERNS)/. Note that with this form the patterns
are joined by &rsquo;|&rsquo; and you cannot supply a list
of files, instead the test files are obtained from the
<small>MANIFEST.</small></p>

<p style="margin-left:11%; margin-top: 1em">You can run an
individual test by a command similar to</p>

<p style="margin-left:11%; margin-top: 1em">./perl
&minus;I../lib path/to/foo.t</p>

<p style="margin-left:11%; margin-top: 1em">except that the
harnesses set up some environment variables that may affect
the execution of the test:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="17%">


<p style="margin-top: 1em">PERL_CORE=1</p></td>
<td width="66%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">indicates that
we&rsquo;re running this test as part of the perl core test
suite. This is useful for modules that have a dual life on
<small>CPAN.</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="32%">


<p style="margin-top: 1em">PERL_DESTRUCT_LEVEL=2</p></td>
<td width="51%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">is set to 2 if
it isn&rsquo;t set already (see &quot;
<small>PERL_DESTRUCT_LEVEL&quot;</small> in
perlhacktips).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="6%">


<p style="margin-top: 1em"><small>PERL</small></p></td>
<td width="77%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">(used only by
<i>t/TEST</i>) if set, overrides the path to the perl
executable that should be used to run the tests (the default
being <i>./perl</i>).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="28%">



<p style="margin-top: 1em"><small>PERL_SKIP_TTY_TEST</small></p> </td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">if set, tells
to skip the tests that need a terminal. It&rsquo;s actually
set automatically by the Makefile, but can also be forced
artificially by running &rsquo;make test_notty&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Other
environment variables that may influence tests</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="28%">


<p style="margin-top: 1em">PERL_TEST_Net_Ping</p></td>
<td width="55%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Setting this
variable runs all the Net::Ping modules tests, otherwise
some tests that interact with the outside world are skipped.
See perl58delta.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="26%">



<p style="margin-top: 1em"><small>PERL_TEST_NOVREXX</small></p> </td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Setting this
variable skips the vrexx.t tests for
<small>OS2::REXX.</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="32%">



<p style="margin-top: 1em"><small>PERL_TEST_NUMCONVERTS</small></p> </td>
<td width="51%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This sets a
variable in op/numconvert.t.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="25%">



<p style="margin-top: 1em"><small>PERL_TEST_MEMORY</small></p> </td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Setting this
variable includes the tests in <i>t/bigmem/</i>. This should
be set to the number of gigabytes of memory available for
testing, eg. &quot;PERL_TEST_MEMORY=4&quot; indicates that
tests that require 4GiB of available memory can be run
safely.</p>

<p style="margin-left:11%; margin-top: 1em">See also the
documentation for the Test and Test::Harness modules, for
more environment variables that affect testing.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Performance
testing</b> <br>
The file <i>t/perf/benchmarks</i> contains snippets of perl
code which are intended to be benchmarked across a range of
perls by the <i>Porting/bench.pl</i> tool. If you fix or
enhance a performance issue, you may want to add a
representative code sample to the file, then run
<i>bench.pl</i> against the previous and current perls to
see what difference it has made, and whether anything else
has slowed down as a consequence.</p>

<p style="margin-left:11%; margin-top: 1em">The file
<i>t/perf/opcount.t</i> is designed to test whether a
particular code snippet has been compiled into an optree
containing specified numbers of particular op types. This is
good for testing whether optimisations which alter ops, such
as converting an &quot;aelem&quot; op into an
&quot;aelemfast&quot; op, are really doing that.</p>

<p style="margin-left:11%; margin-top: 1em">The files
<i>t/perf/speed.t</i> and <i>t/re/speed.t</i> are designed
to test things that run thousands of times slower if a
particular optimisation is broken (for example, the utf8
length cache on long utf8 strings). Add a test that will
take a fraction of a second normally, and minutes otherwise,
causing the test file to time out on failure.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Building
perl at older commits</b> <br>
In the course of hacking on the Perl core distribution, you
may have occasion to configure, build and test perl at an
old commit. Sometimes &quot;make&quot; will fail during this
process. If that happens, you may be able to salvage the
situation by using the Devel::PatchPerl library from
<small>CPAN</small> (not included in the core) to bring the
source code at that commit to a buildable state.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s a
real world example, taken from work done to resolve perl
#10118 &lt;https://github.com/Perl/perl5/issues/10118&gt;.
Use of <i>Porting/bisect.pl</i> had identified commit
&quot;ba77e4cc9d1ceebf472c9c5c18b2377ee47062e6&quot; as the
commit in which a bug was corrected. To confirm, a P5P
developer wanted to configure and build perl at commit
&quot;ba77e4c^&quot; (presumably &quot;bad&quot;) and then
at &quot;ba77e4c&quot; (presumably &quot;good&quot;). Normal
configuration and build was attempted:</p>

<p style="margin-left:11%; margin-top: 1em">$ sh
./Configure &minus;des &minus;Dusedevel <br>
$ make test_prep</p>


<p style="margin-left:11%; margin-top: 1em">&quot;make&quot;,
however, failed with output (excerpted) like this:</p>

<p style="margin-left:11%; margin-top: 1em">cc
&minus;fstack&minus;protector &minus;L/usr/local/lib
&minus;o miniperl \ <br>
gv.o toke.o perly.o pad.o regcomp.o dump.o util.o \ <br>
mg.o reentr.o mro.o hv.o av.o run.o pp_hot.o sv.o \ <br>
pp.o scope.o pp_ctl.o pp_sys.o doop.o doio.o regexec.o \
<br>
utf8.o taint.o deb.o universal.o globals.o perlio.o \ <br>
numeric.o mathoms.o locale.o pp_pack.o pp_sort.o \ <br>
miniperlmain.o opmini.o perlmini.o <br>
pp.o: In function `Perl_pp_pow': <br>
pp.c:(.text+0x2db9): undefined reference to `pow' <br>
... <br>
collect2: error: ld returned 1 exit status <br>
makefile:348: recipe for target 'miniperl' failed <br>
make: *** [miniperl] Error 1</p>

<p style="margin-left:11%; margin-top: 1em">Another P5P
contributor recommended installation and use of
Devel::PatchPerl for this situation, first to determine the
version of perl at the commit in question, then to patch the
source code at that point to facilitate a build.</p>

<p style="margin-left:11%; margin-top: 1em">$ perl
&minus;MDevel::PatchPerl &minus;e \ <br>
'print
Devel::PatchPerl&minus;&gt;determine_version(&quot;/path/to/sourcecode&quot;),
<br>
&quot;\n&quot;;' <br>
5.11.1 <br>
$ perl &minus;MDevel::PatchPerl &minus;e \ <br>

'Devel::PatchPerl&minus;&gt;patch_source(&quot;5.11.1&quot;,
&quot;/path/to/sourcecode&quot;);'</p>

<p style="margin-left:11%; margin-top: 1em">Once the source
was patched, &quot;./Configure&quot; and &quot;make
test_prep&quot; were called and completed successfully,
enabling confirmation of the findings in <small>RT</small>
#72414.</p>

<h2>MORE READING FOR GUTS HACKERS
<a name="MORE READING FOR GUTS HACKERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To hack on the
Perl guts, you&rsquo;ll need to read the following
things:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="15%">


<p style="margin-top: 1em">perlsource</p></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">An overview of
the Perl source tree. This will help you find the files
you&rsquo;re looking for.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="15%">


<p style="margin-top: 1em">perlinterp</p></td>
<td width="68%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">An overview of
the Perl interpreter source code and some details on how
Perl does what it does.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="17%">


<p style="margin-top: 1em">perlhacktut</p></td>
<td width="66%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This document
walks through the creation of a small patch to Perl&rsquo;s
C code. If you&rsquo;re just getting started with Perl core
hacking, this will help you understand how it works.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="18%">


<p style="margin-top: 1em">perlhacktips</p></td>
<td width="65%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">More details on
hacking the Perl core. This document focuses on lower level
details such as how to write tests, compilation issues,
portability, debugging, etc.</p>

<p style="margin-left:17%; margin-top: 1em">If you plan on
doing serious C hacking, make sure to read this.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p style="margin-top: 1em">perlguts</p></td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This is of
paramount importance, since it&rsquo;s the documentation of
what goes where in the Perl source. Read it over a couple of
times and it might start to make sense &minus; don&rsquo;t
worry if it doesn&rsquo;t yet, because the best way to study
it is to read it in conjunction with poking at Perl source,
and we&rsquo;ll do that later on.</p>

<p style="margin-left:17%; margin-top: 1em">Gisle
Aas&rsquo;s &quot;illustrated perlguts&quot;, also known as
<i>illguts</i>, has very helpful pictures:</p>


<p style="margin-left:17%; margin-top: 1em">&lt;https://metacpan.org/release/RURBAN/illguts&minus;0.49&gt;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="31%">


<p style="margin-top: 1em">perlxstut and perlxs</p></td>
<td width="52%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">A working
knowledge of <small>XSUB</small> programming is incredibly
useful for core hacking; XSUBs use techniques drawn from the
<small>PP</small> code, the portion of the guts that
actually executes a Perl program. It&rsquo;s a lot gentler
to learn those techniques from simple examples and
explanation than from the core itself.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="11%">


<p style="margin-top: 1em">perlapi</p></td>
<td width="72%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The
documentation for the Perl <small>API</small> explains what
some of the internal functions do, as well as the many
macros used in the source.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="29%">


<p style="margin-top: 1em"><i>Porting/pumpkin.pod</i></p></td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This is a
collection of words of wisdom for a Perl porter; some of it
is only useful to the pumpkin holders, but most of it
applies to anyone wanting to go about Perl development.</p>

<h2>CPAN TESTERS AND PERL SMOKERS
<a name="CPAN TESTERS AND PERL SMOKERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<small>CPAN</small> testers (
&lt;http://cpantesters.org/&gt; ) are a group of volunteers
who test <small>CPAN</small> modules on a variety of
platforms.</p>

<p style="margin-left:11%; margin-top: 1em">Perl Smokers (
&lt;https://www.nntp.perl.org/group/perl.daily&minus;build/&gt;
and
&lt;https://www.nntp.perl.org/group/perl.daily&minus;build.reports/&gt;
) automatically test Perl source releases on platforms with
various configurations.</p>

<p style="margin-left:11%; margin-top: 1em">Both efforts
welcome volunteers. In order to get involved in smoke
testing of the perl itself visit
&lt;https://metacpan.org/release/Test&minus;Smoke&gt;. In
order to start smoke testing <small>CPAN</small> modules
visit
&lt;https://metacpan.org/release/CPANPLUS&minus;YACSmoke&gt;
or &lt;https://metacpan.org/release/minismokebox&gt; or
&lt;https://metacpan.org/release/CPAN&minus;Reporter&gt;.</p>

<h2>WHAT NEXT?
<a name="WHAT NEXT?"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you&rsquo;ve
read all the documentation in the document and the ones
listed above, you&rsquo;re more than ready to hack on
Perl.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s
some more recommendations</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Subscribe to
perl5&minus;porters, follow the patches and try and
understand them; don&rsquo;t be afraid to ask if
there&rsquo;s a portion you&rsquo;re not clear on &minus;
who knows, you may unearth a bug in the patch...</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Do read the <small>README</small> associated with your
operating system, e.g. <small>README</small> .aix on the
<small>IBM AIX OS.</small> Don&rsquo;t hesitate to supply
patches to that <small>README</small> if you find anything
missing or changed over a new <small>OS</small> release.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Find an area of Perl that seems interesting to you, and
see if you can work out how it works. Scan through the
source, and step over it in the debugger. Play, poke,
investigate, fiddle! You&rsquo;ll probably get to understand
not just your chosen area but a much wider range of
<i>perl</i>&rsquo;s activity as well, and probably sooner
than you&rsquo;d think.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>&quot;The
Road goes ever on and on, down from the door where it
began.&quot;</b> <br>
If you can do these things, you&rsquo;ve started on the long
road to Perl porting. Thanks for wanting to help make Perl
better &minus; and happy hacking!</p>

<p style="margin-left:11%; margin-top: 1em"><b>Metaphoric
Quotations</b> <br>
If you recognized the quote about the Road above,
you&rsquo;re in luck.</p>

<p style="margin-left:11%; margin-top: 1em">Most software
projects begin each file with a literal description of each
file&rsquo;s purpose. Perl instead begins each with a
literary allusion to that file&rsquo;s purpose.</p>

<p style="margin-left:11%; margin-top: 1em">Like chapters
in many books, all top-level Perl source files (along with a
few others here and there) begin with an epigrammatic
inscription that alludes, indirectly and metaphorically, to
the material you&rsquo;re about to read.</p>

<p style="margin-left:11%; margin-top: 1em">Quotations are
taken from writings of J.R.R. Tolkien pertaining to his
Legendarium, almost always from <i>The Lord of the
Rings</i>. Chapters and page numbers are given using the
following editions:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><i>The Hobbit</i>, by J.R.R.
Tolkien. The hardcover, 70th&minus;anniversary edition of
2007 was used, published in the <small>UK</small> by Harper
Collins Publishers and in the <small>US</small> by the
Houghton Mifflin Company.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><i>The Lord of the Rings</i>, by J.R.R. Tolkien. The
hardcover, 50th&minus;anniversary edition of 2004 was used,
published in the <small>UK</small> by Harper Collins
Publishers and in the <small>US</small> by the Houghton
Mifflin Company.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><i>The Lays of Beleriand</i>, by J.R.R. Tolkien and
published posthumously by his son and literary executor,
C.J.R. Tolkien, being the 3rd of the 12 volumes in
Christopher&rsquo;s mammoth <i>History of Middle Earth</i>.
Page numbers derive from the hardcover edition, first
published in 1983 by George Allen &amp; Unwin; no page
numbers changed for the special 3&minus;volume omnibus
edition of 2002 or the various trade-paper editions, all
again now by Harper Collins or Houghton Mifflin.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Other
<small>JRRT</small> books fair game for quotes would thus
include <i>The Adventures of Tom Bombadil</i>, <i>The
Silmarillion</i>, <i>Unfinished Tales</i>, and <i>The Tale
of the Children of Hurin</i>, all but the first posthumously
assembled by <small>CJRT.</small> But <i>The Lord of the
Rings</i> itself is perfectly fine and probably best to
quote from, provided you can find a suitable quote
there.</p>

<p style="margin-left:11%; margin-top: 1em">So if you were
to supply a new, complete, top-level source file to add to
Perl, you should conform to this peculiar practice by
yourself selecting an appropriate quotation from Tolkien,
retaining the original spelling and punctuation and using
the same format the rest of the quotes are in. Indirect and
oblique is just fine; remember, it&rsquo;s a metaphor, so
being meta is, after all, what it&rsquo;s for.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
was originally written by Nathan Torkington, and is
maintained by the perl5&minus;porters mailing list.</p>
<hr>
</body>
</html>
