<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:53:54 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>NDCTL&minus;LIST</title>

</head>
<body>
<h1>ndctl-list</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ndctl-list
&minus; dump the platform nvdimm device topology and
attributes in json</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>ndctl
list</i> [&lt;options&gt;]</p>

<p style="margin-left:11%; margin-top: 1em">Walk all the
nvdimm buses in the system and list all attached devices
along with some of their major attributes.</p>

<p style="margin-left:11%; margin-top: 1em">Options can be
specified to limit the output to devices of a certain class.
Where the classes are buses, dimms, regions, and namespaces.
By default, <i>ndctl list</i> with no options is equivalent
to:</p>

<p style="margin-left:11%; margin-top: 1em">ndctl list
&minus;&minus;namespaces &minus;&minus;bus=all
&minus;&minus;region=all</p>

<h2>EXAMPLE
<a name="EXAMPLE"></a>
</h2>


<p style="margin-left:17%; margin-top: 1em"># ndctl list
&minus;&minus;buses &minus;&minus;namespaces</p>

<p style="margin-left:17%; margin-top: 1em">{ <br>
&quot;provider&quot;:&quot;nfit_test.1&quot;, <br>
&quot;dev&quot;:&quot;ndbus2&quot;, <br>
&quot;namespaces&quot;:[ <br>
{ <br>
&quot;dev&quot;:&quot;namespace9.0&quot;, <br>
&quot;mode&quot;:&quot;raw&quot;, <br>
&quot;size&quot;:33554432, <br>
&quot;blockdev&quot;:&quot;pmem9&quot; <br>
} <br>
] <br>
} <br>
{ <br>
&quot;provider&quot;:&quot;nfit_test.0&quot;, <br>
&quot;dev&quot;:&quot;ndbus1&quot; <br>
} <br>
{ <br>
&quot;provider&quot;:&quot;e820&quot;, <br>
&quot;dev&quot;:&quot;ndbus0&quot;, <br>
&quot;namespaces&quot;:[ <br>
{ <br>
&quot;dev&quot;:&quot;namespace0.0&quot;, <br>
&quot;mode&quot;:&quot;fsdax&quot;, <br>
&quot;size&quot;:8589934592, <br>
&quot;blockdev&quot;:&quot;pmem0&quot; <br>
} <br>
] <br>
}</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">&minus;r,
&minus;&minus;region=</p>

<p style="margin-left:17%;">A <i>regionX</i> device name,
or a region id number. Restrict the operation to the
specified region(s). The keyword <i>all</i> can be specified
to indicate the lack of any restriction, however this is the
same as not supplying a &minus;&minus;region option at
all.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;b,
&minus;&minus;bus=</p>

<p style="margin-left:17%;">A bus id number, or a provider
string (e.g. &quot;ACPI.NFIT&quot;). Restrict the operation
to the specified bus(es). The keyword <i>all</i> can be
specified to indicate the lack of any restriction, however
this is the same as not supplying a &minus;&minus;bus option
at all.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;d,
&minus;&minus;dimm=</p>

<p style="margin-left:17%;">An <i>nmemX</i> device name, or
dimm id number. The dimm id number here is X in
<i>nmemX</i>. Filter listing by devices that reference the
given dimm. For example to see all namespaces comprised of
storage capacity on nmem0:</p>

<p style="margin-left:17%; margin-top: 1em"># ndctl list
&minus;&minus;dimm=nmem0 &minus;&minus;namespaces</p>

<p style="margin-left:11%; margin-top: 1em">&minus;n,
&minus;&minus;namespace=</p>

<p style="margin-left:17%;">An <i>namespaceX.Y</i> device
name, or namespace region plus id tuple <i>X.Y</i>. Limit
the namespace list to the single identified device if
present.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;m,
&minus;&minus;mode=</p>

<p style="margin-left:17%;">Filter listing by the mode
(<i>raw</i>, <i>fsdax</i>, <i>sector</i> or <i>devdax</i>)
of the namespace(s).</p>

<p style="margin-left:11%; margin-top: 1em">&minus;U,
&minus;&minus;numa&minus;node=</p>

<p style="margin-left:17%;">Filter listing by numa node</p>

<p style="margin-left:11%; margin-top: 1em">&minus;B,
&minus;&minus;buses</p>

<p style="margin-left:17%;">Include bus info in the
listing</p>

<p style="margin-left:11%; margin-top: 1em">&minus;D,
&minus;&minus;dimms</p>

<p style="margin-left:17%;">Include dimm info in the
listing</p>

<p style="margin-left:11%; margin-top: 1em">{ <br>
&quot;dev&quot;:&quot;nmem0&quot;, <br>

&quot;id&quot;:&quot;cdab&minus;0a&minus;07e0&minus;ffffffff&quot;,
<br>
&quot;handle&quot;:0, <br>
&quot;phys_id&quot;:0, <br>
&quot;security:&quot;:&quot;disabled&quot; <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">&minus;H,
&minus;&minus;health</p>

<p style="margin-left:17%;">Include dimm health info in the
listing. For example:</p>

<p style="margin-left:11%; margin-top: 1em">{ <br>
&quot;dev&quot;:&quot;nmem0&quot;, <br>
&quot;health&quot;:{ <br>
&quot;health_state&quot;:&quot;non&minus;critical&quot;,
<br>
&quot;temperature_celsius&quot;:23, <br>
&quot;spares_percentage&quot;:75, <br>
&quot;alarm_temperature&quot;:true, <br>
&quot;alarm_spares&quot;:true, <br>
&quot;temperature_threshold&quot;:40, <br>
&quot;spares_threshold&quot;:5, <br>
&quot;life_used_percentage&quot;:5, <br>
&quot;shutdown_state&quot;:&quot;clean&quot; <br>
} <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">&minus;F,
&minus;&minus;firmware</p>

<p style="margin-left:17%;">Include firmware info in the
listing, including the state and capability of runtime
firmware activation:</p>

<p style="margin-left:17%; margin-top: 1em"># ndctl list
&minus;BDF <br>
[ <br>
{ <br>
&quot;provider&quot;:&quot;nfit_test.0&quot;, <br>
&quot;dev&quot;:&quot;ndbus2&quot;, <br>
&quot;scrub_state&quot;:&quot;idle&quot;, <br>
&quot;firmware&quot;:{ <br>
&quot;activate_method&quot;:&quot;suspend&quot;, <br>
&quot;activate_state&quot;:&quot;idle&quot; <br>
}, <br>
&quot;dimms&quot;:[ <br>
{ <br>
&quot;dev&quot;:&quot;nmem1&quot;, <br>

&quot;id&quot;:&quot;cdab&minus;0a&minus;07e0&minus;ffffffff&quot;,
<br>
&quot;handle&quot;:0, <br>
&quot;phys_id&quot;:0, <br>
&quot;security&quot;:&quot;disabled&quot;, <br>
&quot;firmware&quot;:{ <br>
&quot;current_version&quot;:0, <br>
&quot;can_update&quot;:true <br>
} <br>
}, <br>
... <br>
]</p>

<p style="margin-left:11%; margin-top: 1em">&minus;X,
&minus;&minus;device&minus;dax</p>

<p style="margin-left:17%;">Include device&minus;dax
(&quot;daxregion&quot;) details when a namespace is in
&quot;devdax&quot; mode.</p>

<p style="margin-left:11%; margin-top: 1em">{ <br>
&quot;dev&quot;:&quot;namespace0.0&quot;, <br>
&quot;mode&quot;:&quot;devdax&quot;, <br>
&quot;size&quot;:4225761280, <br>

&quot;uuid&quot;:&quot;18ae1bbb&minus;bb62&minus;4efc&minus;86df&minus;4a5caacb5dcc&quot;,
<br>
&quot;daxregion&quot;:{ <br>
&quot;id&quot;:0, <br>
&quot;size&quot;:4225761280, <br>
&quot;align&quot;:2097152, <br>
&quot;devices&quot;:[ <br>
{ <br>
&quot;chardev&quot;:&quot;dax0.0&quot;, <br>
&quot;size&quot;:4225761280 <br>
} <br>
] <br>
} <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">&minus;R,
&minus;&minus;regions</p>

<p style="margin-left:17%;">Include region info in the
listing</p>

<p style="margin-left:11%; margin-top: 1em">&minus;N,
&minus;&minus;namespaces</p>

<p style="margin-left:17%;">Include namespace info in the
listing. Namespace info is listed by default if no other
options are specified to the command.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;i,
&minus;&minus;idle</p>

<p style="margin-left:17%;">Include idle (not enabled)
devices in the listing</p>

<p style="margin-left:11%; margin-top: 1em">&minus;c,
&minus;&minus;configured</p>

<p style="margin-left:17%;">Include configured devices
(non&minus;zero sized namespaces) regardless of whether they
are enabled, or not. Other devices besides namespaces are
always considered &quot;configured&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;C,
&minus;&minus;capabilities</p>

<p style="margin-left:17%;">Include region capabilities in
the listing, i.e. supported namespace modes and variable
properties like sector sizes and alignments.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;M,
&minus;&minus;media&minus;errors</p>

<p style="margin-left:17%;">Include media errors
(badblocks) in the listing. Note that the
<i>badblock_count</i> property is included in the listing by
default when the count is non&minus;zero, otherwise it is
hidden. Also, if the namespace is in <i>sector</i> mode the
<i>badblocks</i> listing is not included and
<i>badblock_count</i> property may include blocks that are
located in metadata, or unused capacity in the namespace.
Convert a <i>sector</i> namespace into <i>raw</i> mode to
list precise <i>badblocks</i> offsets.</p>

<p style="margin-left:11%; margin-top: 1em">{ <br>
&quot;dev&quot;:&quot;namespace7.0&quot;, <br>
&quot;mode&quot;:&quot;raw&quot;, <br>
&quot;size&quot;:33554432, <br>
&quot;blockdev&quot;:&quot;pmem7&quot;, <br>
&quot;badblock_count&quot;:17, <br>
&quot;badblocks&quot;:[ <br>
{ <br>
&quot;offset&quot;:4, <br>
&quot;length&quot;:1 <br>
}, <br>
{ <br>
&quot;offset&quot;:32768, <br>
&quot;length&quot;:8 <br>
}, <br>
{ <br>
&quot;offset&quot;:65528, <br>
&quot;length&quot;:8 <br>
} <br>
] <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">&minus;v,
&minus;&minus;verbose</p>

<p style="margin-left:17%;">Increase verbosity of the
output. This can be specified multiple times to be even more
verbose on the informational and miscellaneous output, and
can be used to override omitted flags for showing specific
information.</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
<b>&minus;v</b> In addition to the enabled namespaces
default output, show the numa_node, raw_uuid, and bad block
media errors.</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
<b>&minus;vv</b> Everything <i>&minus;v</i> provides, plus
automatically enable &minus;&minus;dimms,
&minus;&minus;buses, and &minus;&minus;regions.</p>

<p style="margin-left:23%; margin-top: 1em">&bull;
<b>&minus;vvv</b> Everything <i>&minus;vv</i> provides, plus
&minus;&minus;health, &minus;&minus;capabilities,
&minus;&minus;idle, and &minus;&minus;firmware. :: The
verbosity can also be scoped by the object type. For example
to just list regions with capabilities and media error
info.</p>

<p style="margin-left:17%; margin-top: 1em"># ndctl list
&minus;Ru &minus;vvv &minus;r 0 <br>
{ <br>
&quot;dev&quot;:&quot;region0&quot;, <br>
&quot;size&quot;:&quot;4.00 GiB (4.29 GB)&quot;, <br>
&quot;available_size&quot;:0, <br>
&quot;max_available_extent&quot;:0, <br>
&quot;type&quot;:&quot;pmem&quot;, <br>
&quot;numa_node&quot;:0, <br>
&quot;target_node&quot;:2, <br>
&quot;capabilities&quot;:[ <br>
{ <br>
&quot;mode&quot;:&quot;sector&quot;, <br>
&quot;sector_sizes&quot;:[ <br>
512, <br>
520, <br>
528, <br>
4096, <br>
4104, <br>
4160, <br>
4224 <br>
] <br>
}, <br>
{ <br>
&quot;mode&quot;:&quot;fsdax&quot;, <br>
&quot;alignments&quot;:[ <br>
4096, <br>
2097152, <br>
1073741824 <br>
] <br>
}, <br>
{ <br>
&quot;mode&quot;:&quot;devdax&quot;, <br>
&quot;alignments&quot;:[ <br>
4096, <br>
2097152, <br>
1073741824 <br>
] <br>
} <br>
], <br>
&quot;persistence_domain&quot;:&quot;unknown&quot; <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">&minus;u,
&minus;&minus;human</p>

<p style="margin-left:17%;">Format numbers representing
storage sizes, or offsets as human readable strings with
units instead of the default machine&minus;friendly
raw&minus;integer data. Convert other numeric fields into
hexadecimal strings.</p>

<p style="margin-left:17%; margin-top: 1em"># ndctl list
&minus;&minus;region=7 <br>
{ <br>
&quot;dev&quot;:&quot;region7&quot;, <br>
&quot;size&quot;:67108864, <br>
&quot;available_size&quot;:67108864, <br>
&quot;type&quot;:&quot;pmem&quot;, <br>
&quot;iset_id&quot;:&minus;6382611090938810793, <br>
&quot;badblock_count&quot;:8 <br>
}</p>

<p style="margin-left:17%; margin-top: 1em"># ndctl list
&minus;&minus;human &minus;&minus;region=7 <br>
{ <br>
&quot;dev&quot;:&quot;region7&quot;, <br>
&quot;size&quot;:&quot;64.00 MiB (67.11 MB)&quot;, <br>
&quot;available_size&quot;:&quot;64.00 MiB (67.11 MB)&quot;,
<br>
&quot;type&quot;:&quot;pmem&quot;, <br>
&quot;iset_id&quot;:&quot;0xa76c6907811fae57&quot;, <br>
&quot;badblock_count&quot;:8 <br>
}</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>NDCTL_LIST_LINT</i></p>

<p style="margin-left:17%;">A bug in the &quot;ndctl
list&quot; output needs to be fixed with care for other
tooling that may have developed a dependency on the buggy
behavior. The NDCTL_LIST_LINT variable is an opt&minus;in to
apply fixes, and not regress previously shipped behavior by
default. This environment variable applies the following
fixups:</p>

<p style="margin-left:23%; margin-top: 1em">&bull; Fix
&quot;ndctl list &minus;Rv&quot; to only show region objects
and not include namespace objects. ::</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright
&copy; 2016 &minus; 2022, Intel Corporation. License GPLv2:
GNU GPL version 2 &lt;http://gnu.org/licenses/gpl.html&gt;.
This is free software: you are free to change and
redistribute it. There is NO WARRANTY, to the extent
permitted by law.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">ndctl&minus;create&minus;namespace(1)</p>
<hr>
</body>
</html>
