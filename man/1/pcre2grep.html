<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:53:57 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PCRE2GREP</title>

</head>
<body>
<h1>pcre2grep</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">pcre2grep - a
grep with Perl-compatible regular expressions.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>pcre2grep
[options] [long options] [pattern] [path1 path2 ...]</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pcre2grep</b>
searches files for character patterns, in the same way as
other grep commands do, but it uses the PCRE2 regular
expression library to support patterns that are compatible
with the regular expressions of Perl 5. See
<b>pcre2syntax</b>(3) for a quick-reference summary of
pattern syntax, or <b>pcre2pattern</b>(3) for a full
description of the syntax and semantics of the regular
expressions that PCRE2 supports.</p>

<p style="margin-left:11%; margin-top: 1em">Patterns,
whether supplied on the command line or in a separate file,
are given without delimiters. For example:</p>

<p style="margin-left:11%; margin-top: 1em">pcre2grep
Thursday /etc/motd</p>

<p style="margin-left:11%; margin-top: 1em">If you attempt
to use delimiters (for example, by surrounding a pattern
with slashes, as is common in Perl scripts), they are
interpreted as part of the pattern. Quotes can of course be
used to delimit patterns on the command line because they
are interpreted by the shell, and indeed quotes are required
if a pattern contains white space or shell
metacharacters.</p>

<p style="margin-left:11%; margin-top: 1em">The first
argument that follows any option settings is treated as the
single pattern to be matched when neither <b>-e</b> nor
<b>-f</b> is present. Conversely, when one or both of these
options are used to specify patterns, all arguments are
treated as path names. At least one of <b>-e</b>, <b>-f</b>,
or an argument pattern must be provided.</p>

<p style="margin-left:11%; margin-top: 1em">If no files are
specified, <b>pcre2grep</b> reads the standard input. The
standard input can also be referenced by a name consisting
of a single hyphen. For example:</p>

<p style="margin-left:11%; margin-top: 1em">pcre2grep
some-pattern file1 - file3</p>

<p style="margin-left:11%; margin-top: 1em">By default,
input files are searched line by line. Each line that
matches a pattern is copied to the standard output, and if
there is more than one file, the file name is output at the
start of each line, followed by a colon. However, there are
options that can change how <b>pcre2grep</b> behaves. For
example, the <b>-M</b> option makes it possible to search
for strings that span line boundaries. What defines a line
boundary is controlled by the <b>-N</b> (<b>--newline</b>)
option. The <b>-h</b> and <b>-H</b> options control whether
or not file names are shown, and the <b>-Z</b> option
changes the file name terminator to a zero byte.</p>

<p style="margin-left:11%; margin-top: 1em">The amount of
memory used for buffering files that are being scanned is
controlled by parameters that can be set by the
<b>--buffer-size</b> and <b>--max-buffer-size</b> options.
The first of these sets the size of buffer that is obtained
at the start of processing. If an input file contains very
long lines, a larger buffer may be needed; this is handled
by automatically extending the buffer, up to the limit
specified by <b>--max-buffer-size</b>. The default values
for these parameters can be set when <b>pcre2grep</b> is
built; if nothing is specified, the defaults are set to
20KiB and 1MiB respectively. An error occurs if a line is
too long and the buffer can no longer be expanded.</p>

<p style="margin-left:11%; margin-top: 1em">The block of
memory that is actually used is three times the &quot;buffer
size&quot;, to allow for buffering &quot;before&quot; and
&quot;after&quot; lines. If the buffer size is too small,
fewer than requested &quot;before&quot; and
&quot;after&quot; lines may be output.</p>

<p style="margin-left:11%; margin-top: 1em">Patterns can be
no longer than 8KiB or BUFSIZ bytes, whichever is the
greater. BUFSIZ is defined in <b>&lt;stdio.h&gt;</b>. When
there is more than one pattern (specified by the use of
<b>-e</b> and/or <b>-f</b>), each pattern is applied to each
line in the order in which they are defined, except that all
the <b>-e</b> patterns are tried before the <b>-f</b>
patterns.</p>

<p style="margin-left:11%; margin-top: 1em">By default, as
soon as one pattern matches a line, no further patterns are
considered. However, if <b>--colour</b> (or <b>--color</b>)
is used to colour the matching substrings, or if
<b>--only-matching</b>, <b>--file-offsets</b>,
<b>--line-offsets</b>, or <b>--output</b> is used to output
only the part of the line that matched (either shown
literally, or as an offset), the behaviour is different. In
this situation, all the patterns are applied to the line. If
there is more than one match, the one that begins nearest to
the start of the subject is processed; if there is more than
one match at that position, the one with the longest
matching substring is processed; if the matching substrings
are equal, the first match found is processed.</p>

<p style="margin-left:11%; margin-top: 1em">Scanning with
all the patterns resumes immediately following the match, so
that later matches on the same line can be found. Note,
however, that an overlapping match that starts in the middle
of another match will not be processed.</p>

<p style="margin-left:11%; margin-top: 1em">The above
behaviour was changed at release 10.41 to be more compatible
with GNU grep. In earlier releases, <b>pcre2grep</b> did not
recognize matches from later patterns that were earlier in
the subject.</p>

<p style="margin-left:11%; margin-top: 1em">Patterns that
can match an empty string are accepted, but empty string
matches are never recognized. An example is the pattern
&quot;(super)?(man)?&quot;, in which all components are
optional. This pattern finds all occurrences of both
&quot;super&quot; and &quot;man&quot;; the output differs
from matching with &quot;super|man&quot; when only the
matching substrings are being shown.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>LC_ALL</b> or <b>LC_CTYPE</b> environment variable is
set, <b>pcre2grep</b> uses the value to set a locale when
calling the PCRE2 library. The <b>--locale</b> option can be
used to override this.</p>

<h2>SUPPORT FOR COMPRESSED FILES
<a name="SUPPORT FOR COMPRESSED FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Compile-time
options for <b>pcre2grep</b> can set it up to use
<b>libz</b> or <b>libbz2</b> for reading compressed files
whose names end in <b>.gz</b> or <b>.bz2</b>, respectively.
You can find out whether your <b>pcre2grep</b> binary has
support for one or both of these file types by running it
with the <b>--help</b> option. If the appropriate support is
not present, all files are treated as plain text. The
standard input is always so treated. If a file with a
<b>.gz</b> or <b>.bz2</b> extension is not in fact
compressed, it is read as a plain text file. When input is
from a compressed .gz or .bz2 file, the
<b>--line-buffered</b> option is ignored.</p>

<h2>BINARY FILES
<a name="BINARY FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">By default, a
file that contains a binary zero byte within the first 1024
bytes is identified as a binary file, and is processed
specially. However, if the newline type is specified as NUL,
that is, the line terminator is a binary zero, the test for
a binary file is not applied. See the <b>--binary-files</b>
option for a means of changing the way binary files are
handled.</p>

<h2>BINARY ZEROS IN PATTERNS
<a name="BINARY ZEROS IN PATTERNS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Patterns passed
from the command line are strings that are terminated by a
binary zero, so cannot contain internal zeros. However,
patterns that are read from a file via the <b>-f</b> option
may contain binary zeros.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The order in
which some of the options appear can affect the output. For
example, both the <b>-H</b> and <b>-l</b> options affect the
printing of file names. Whichever comes later in the command
line will be the one that takes effect. Similarly, except
where noted below, if an option is given twice, the later
setting is used. Numerical values for options may be
followed by K or M, to signify multiplication by 1024 or
1024*1024 respectively.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>--</b></p></td>
<td width="12%"></td>
<td width="74%">


<p>This terminates the list of options. It is useful if the
next item on the command line starts with a hyphen but is
not an option. This allows for the processing of patterns
and file names that start with hyphens.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-A</b> <i>number</i>,
<b>--after-context=</b><i>number</i></p>

<p style="margin-left:26%;">Output up to <i>number</i>
lines of context after each matching line. Fewer lines are
output if the next match or the end of the file is reached,
or if the processing buffer size has been set too small. If
file names and/or line numbers are being output, a hyphen
separator is used instead of a colon for the context lines
(the <b>-Z</b> option can be used to change the file name
terminator to a zero byte). A line containing &quot;--&quot;
is output between each group of lines, unless they are in
fact contiguous in the input file. The value of
<i>number</i> is expected to be relatively small. When
<b>-c</b> is used, <b>-A</b> is ignored.</p>

<p style="margin-left:11%;"><b>-a</b>, <b>--text</b></p>

<p style="margin-left:26%;">Treat binary files as text.
This is equivalent to <b>--binary-files</b>=<i>text</i>.</p>


<p style="margin-left:11%;"><b>--allow-lookaround-bsk</b></p>

<p style="margin-left:26%;">PCRE2 now forbids the use of \K
in lookarounds by default, in line with Perl. This option
causes <b>pcre2grep</b> to set the
PCRE2_EXTRA_ALLOW_LOOKAROUND_BSK option, which enables this
somewhat dangerous usage.</p>

<p style="margin-left:11%;"><b>-B</b> <i>number</i>,
<b>--before-context=</b><i>number</i></p>

<p style="margin-left:26%;">Output up to <i>number</i>
lines of context before each matching line. Fewer lines are
output if the previous match or the start of the file is
within <i>number</i> lines, or if the processing buffer size
has been set too small. If file names and/or line numbers
are being output, a hyphen separator is used instead of a
colon for the context lines (the <b>-Z</b> option can be
used to change the file name terminator to a zero byte). A
line containing &quot;--&quot; is output between each group
of lines, unless they are in fact contiguous in the input
file. The value of <i>number</i> is expected to be
relatively small. When <b>-c</b> is used, <b>-B</b> is
ignored.</p>


<p style="margin-left:11%;"><b>--binary-files=</b><i>word</i></p>

<p style="margin-left:26%;">Specify how binary files are to
be processed. If the word is &quot;binary&quot; (the
default), pattern matching is performed on binary files, but
the only output is &quot;Binary file &lt;name&gt;
matches&quot; when a match succeeds. If the word is
&quot;text&quot;, which is equivalent to the <b>-a</b> or
<b>--text</b> option, binary files are processed in the same
way as any other file. In this case, when a match succeeds,
the output may be binary garbage, which can have nasty
effects if sent to a terminal. If the word is
&quot;without-match&quot;, which is equivalent to the
<b>-I</b> option, binary files are not processed at all;
they are assumed not to be of interest and are skipped
without causing any output or affecting the return code.</p>


<p style="margin-left:11%;"><b>--buffer-size=</b><i>number</i></p>

<p style="margin-left:26%;">Set the parameter that controls
how much memory is obtained at the start of processing for
buffering files that are being scanned. See also
<b>--max-buffer-size</b> below.</p>

<p style="margin-left:11%;"><b>-C</b> <i>number</i>,
<b>--context=</b><i>number</i></p>

<p style="margin-left:26%;">Output <i>number</i> lines of
context both before and after each matching line. This is
equivalent to setting both <b>-A</b> and <b>-B</b> to the
same value.</p>

<p style="margin-left:11%;"><b>-c</b>, <b>--count</b></p>

<p style="margin-left:26%;">Do not output lines from the
files that are being scanned; instead output the number of
lines that would have been shown, either because they
matched, or, if <b>-v</b> is set, because they failed to
match. By default, this count is exactly the same as the
number of lines that would have been output, but if the
<b>-M</b> (multiline) option is used (without <b>-v</b>),
there may be more suppressed lines than the count (that is,
the number of matches).</p>

<p style="margin-left:26%; margin-top: 1em">If no lines are
selected, the number zero is output. If several files are
are being scanned, a count is output for each of them and
the <b>-t</b> option can be used to cause a total to be
output at the end. However, if the
<b>--files-with-matches</b> option is also used, only those
files whose counts are greater than zero are listed. When
<b>-c</b> is used, the <b>-A</b>, <b>-B</b>, and <b>-C</b>
options are ignored.</p>

<p style="margin-left:11%;"><b>--colour</b>,
<b>--color</b></p>

<p style="margin-left:26%;">If this option is given without
any data, it is equivalent to &quot;--colour=auto&quot;. If
data is required, it must be given in the same shell item,
separated by an equals sign.</p>

<p style="margin-left:11%;"><b>--colour=</b><i>value</i>,
<b>--color=</b><i>value</i></p>

<p style="margin-left:26%;">This option specifies under
what circumstances the parts of a line that matched a
pattern should be coloured in the output. It is ignored if
<b>--file-offsets</b>, <b>--line-offsets</b>, or
<b>--output</b> is set. By default, output is not coloured.
The value for the <b>--colour</b> option (which is optional,
see above) may be &quot;never&quot;, &quot;always&quot;, or
&quot;auto&quot;. In the latter case, colouring happens only
if the standard output is connected to a terminal. More
resources are used when colouring is enabled, because
<b>pcre2grep</b> has to search for all possible matches in a
line, not just one, in order to colour them all.</p>

<p style="margin-left:26%; margin-top: 1em">The colour that
is used can be specified by setting one of the environment
variables PCRE2GREP_COLOUR, PCRE2GREP_COLOR,
PCREGREP_COLOUR, or PCREGREP_COLOR, which are checked in
that order. If none of these are set, <b>pcre2grep</b> looks
for GREP_COLORS or GREP_COLOR (in that order). The value of
the variable should be a string of two numbers, separated by
a semicolon, except in the case of GREP_COLORS, which must
start with &quot;ms=&quot; or &quot;mt=&quot; followed by
two semicolon-separated colours, terminated by the end of
the string or by a colon. If GREP_COLORS does not start with
&quot;ms=&quot; or &quot;mt=&quot; it is ignored, and
GREP_COLOR is checked.</p>

<p style="margin-left:26%; margin-top: 1em">If the string
obtained from one of the above variables contains any
characters other than semicolon or digits, the setting is
ignored and the default colour is used. The string is copied
directly into the control string for setting colour on a
terminal, so it is your responsibility to ensure that the
values make sense. If no relevant environment variable is
set, the default is &quot;1;31&quot;, which gives red.</p>

<p style="margin-left:11%;"><b>-D</b> <i>action</i>,
<b>--devices=</b><i>action</i></p>

<p style="margin-left:26%;">If an input path is not a
regular file or a directory, &quot;action&quot; specifies
how it is to be processed. Valid values are &quot;read&quot;
(the default) or &quot;skip&quot; (silently skip the
path).</p>

<p style="margin-left:11%;"><b>-d</b> <i>action</i>,
<b>--directories=</b><i>action</i></p>

<p style="margin-left:26%;">If an input path is a
directory, &quot;action&quot; specifies how it is to be
processed. Valid values are &quot;read&quot; (the default in
non-Windows environments, for compatibility with GNU grep),
&quot;recurse&quot; (equivalent to the <b>-r</b> option), or
&quot;skip&quot; (silently skip the path, the default in
Windows environments). In the &quot;read&quot; case,
directories are read as if they were ordinary files. In some
operating systems the effect of reading a directory like
this is an immediate end-of-file; in others it may provoke
an error.</p>


<p style="margin-left:11%;"><b>--depth-limit</b>=<i>number</i></p>

<p style="margin-left:26%;">See <b>--match-limit</b>
below.</p>

<p style="margin-left:11%;"><b>-e</b> <i>pattern</i>,
<b>--regex=</b><i>pattern</i>,
<b>--regexp=</b><i>pattern</i></p>

<p style="margin-left:26%;">Specify a pattern to be
matched. This option can be used multiple times in order to
specify several patterns. It can also be used as a way of
specifying a single pattern that starts with a hyphen. When
<b>-e</b> is used, no argument pattern is taken from the
command line; all arguments are treated as file names. There
is no limit to the number of patterns. They are applied to
each line in the order in which they are defined.</p>

<p style="margin-left:26%; margin-top: 1em">If <b>-f</b> is
used with <b>-e</b>, the command line patterns are matched
first, followed by the patterns from the file(s),
independent of the order in which these options are
specified.</p>


<p style="margin-left:11%;"><b>--exclude</b>=<i>pattern</i></p>

<p style="margin-left:26%;">Files (but not directories)
whose names match the pattern are skipped without being
processed. This applies to all files, whether listed on the
command line, obtained from <b>--file-list</b>, or by
scanning a directory. The pattern is a PCRE2 regular
expression, and is matched against the final component of
the file name, not the entire path. The <b>-F</b>,
<b>-w</b>, and <b>-x</b> options do not apply to this
pattern. The option may be given any number of times in
order to specify multiple patterns. If a file name matches
both an <b>--include</b> and an <b>--exclude</b> pattern, it
is excluded. There is no short form for this option.</p>


<p style="margin-left:11%;"><b>--exclude-from=</b><i>filename</i></p>

<p style="margin-left:26%;">Treat each non-empty line of
the file as the data for an <b>--exclude</b> option. What
constitutes a newline when reading the file is the operating
system&rsquo;s default. The <b>--newline</b> option has no
effect on this option. This option may be given more than
once in order to specify a number of files to read.</p>


<p style="margin-left:11%;"><b>--exclude-dir</b>=<i>pattern</i></p>

<p style="margin-left:26%;">Directories whose names match
the pattern are skipped without being processed, whatever
the setting of the <b>--recursive</b> option. This applies
to all directories, whether listed on the command line,
obtained from <b>--file-list</b>, or by scanning a parent
directory. The pattern is a PCRE2 regular expression, and is
matched against the final component of the directory name,
not the entire path. The <b>-F</b>, <b>-w</b>, and <b>-x</b>
options do not apply to this pattern. The option may be
given any number of times in order to specify more than one
pattern. If a directory matches both <b>--include-dir</b>
and <b>--exclude-dir</b>, it is excluded. There is no short
form for this option.</p>

<p style="margin-left:11%;"><b>-F</b>,
<b>--fixed-strings</b></p>

<p style="margin-left:26%;">Interpret each data-matching
pattern as a list of fixed strings, separated by newlines,
instead of as a regular expression. What constitutes a
newline for this purpose is controlled by the
<b>--newline</b> option. The <b>-w</b> (match as a word) and
<b>-x</b> (match whole line) options can be used with
<b>-F</b>. They apply to each of the fixed strings. A line
is selected if any of the fixed strings are found in it
(subject to <b>-w</b> or <b>-x</b>, if present). This option
applies only to the patterns that are matched against the
contents of files; it does not apply to patterns specified
by any of the <b>--include</b> or <b>--exclude</b>
options.</p>

<p style="margin-left:11%;"><b>-f</b> <i>filename</i>,
<b>--file=</b><i>filename</i></p>

<p style="margin-left:26%;">Read patterns from the file,
one per line. As is the case with patterns on the command
line, no delimiters should be used. What constitutes a
newline when reading the file is the operating
system&rsquo;s default interpretation of \n. The
<b>--newline</b> option has no effect on this option.
Trailing white space is removed from each line, and blank
lines are ignored. An empty file contains no patterns and
therefore matches nothing. Patterns read from a file in this
way may contain binary zeros, which are treated as ordinary
data characters.</p>

<p style="margin-left:26%; margin-top: 1em">If this option
is given more than once, all the specified files are read. A
data line is output if any of the patterns match it. A file
name can be given as &quot;-&quot; to refer to the standard
input. When <b>-f</b> is used, patterns specified on the
command line using <b>-e</b> may also be present; they are
matched before the file&rsquo;s patterns. However, no
pattern is taken from the command line; all arguments are
treated as the names of paths to be searched.</p>


<p style="margin-left:11%;"><b>--file-list</b>=<i>filename</i></p>

<p style="margin-left:26%;">Read a list of files and/or
directories that are to be scanned from the given file, one
per line. What constitutes a newline when reading the file
is the operating system&rsquo;s default. Trailing white
space is removed from each line, and blank lines are
ignored. These paths are processed before any that are
listed on the command line. The file name can be given as
&quot;-&quot; to refer to the standard input. If
<b>--file</b> and <b>--file-list</b> are both specified as
&quot;-&quot;, patterns are read first. This is useful only
when the standard input is a terminal, from which further
lines (the list of files) can be read after an end-of-file
indication. If this option is given more than once, all the
specified files are read.</p>

<p style="margin-left:11%;"><b>--file-offsets</b></p>

<p style="margin-left:26%;">Instead of showing lines or
parts of lines that match, show each match as an offset from
the start of the file and a length, separated by a comma. In
this mode, <b>--colour</b> has no effect, and no context is
shown. That is, the <b>-A</b>, <b>-B</b>, and <b>-C</b>
options are ignored. If there is more than one match in a
line, each of them is shown separately. This option is
mutually exclusive with <b>--output</b>,
<b>--line-offsets</b>, and <b>--only-matching</b>.</p>

<p style="margin-left:11%;"><b>-H</b>,
<b>--with-filename</b></p>

<p style="margin-left:26%;">Force the inclusion of the file
name at the start of output lines when searching a single
file. The file name is not normally shown in this case. By
default, for matching lines, the file name is followed by a
colon; for context lines, a hyphen separator is used. The
<b>-Z</b> option can be used to change the terminator to a
zero byte. If a line number is also being output, it follows
the file name. When the <b>-M</b> option causes a pattern to
match more than one line, only the first is preceded by the
file name. This option overrides any previous <b>-h</b>,
<b>-l</b>, or <b>-L</b> options.</p>

<p style="margin-left:11%;"><b>-h</b>,
<b>--no-filename</b></p>

<p style="margin-left:26%;">Suppress the output file names
when searching multiple files. File names are normally shown
when multiple files are searched. By default, for matching
lines, the file name is followed by a colon; for context
lines, a hyphen separator is used. The <b>-Z</b> option can
be used to change the terminator to a zero byte. If a line
number is also being output, it follows the file name. This
option overrides any previous <b>-H</b>, <b>-L</b>, or
<b>-l</b> options.</p>


<p style="margin-left:11%;"><b>--heap-limit</b>=<i>number</i></p>

<p style="margin-left:26%;">See <b>--match-limit</b>
below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>--help</b></p></td>
<td width="6%"></td>
<td width="74%">


<p>Output a help message, giving brief details of the
command options and file type support, and then exit.
Anything else on the command line is ignored.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>-I</b></p></td>
<td width="6%"></td>
<td width="74%">


<p>Ignore binary files. This is equivalent to
<b>--binary-files</b>=<i>without-match</i>.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>-i</b>,
<b>--ignore-case</b></p>

<p style="margin-left:26%;">Ignore upper/lower case
distinctions during comparisons.</p>


<p style="margin-left:11%;"><b>--include</b>=<i>pattern</i></p>

<p style="margin-left:26%;">If any <b>--include</b>
patterns are specified, the only files that are processed
are those whose names match one of the patterns and do not
match an <b>--exclude</b> pattern. This option does not
affect directories, but it applies to all files, whether
listed on the command line, obtained from
<b>--file-list</b>, or by scanning a directory. The pattern
is a PCRE2 regular expression, and is matched against the
final component of the file name, not the entire path. The
<b>-F</b>, <b>-w</b>, and <b>-x</b> options do not apply to
this pattern. The option may be given any number of times.
If a file name matches both an <b>--include</b> and an
<b>--exclude</b> pattern, it is excluded. There is no short
form for this option.</p>


<p style="margin-left:11%;"><b>--include-from=</b><i>filename</i></p>

<p style="margin-left:26%;">Treat each non-empty line of
the file as the data for an <b>--include</b> option. What
constitutes a newline for this purpose is the operating
system&rsquo;s default. The <b>--newline</b> option has no
effect on this option. This option may be given any number
of times; all the files are read.</p>


<p style="margin-left:11%;"><b>--include-dir</b>=<i>pattern</i></p>

<p style="margin-left:26%;">If any <b>--include-dir</b>
patterns are specified, the only directories that are
processed are those whose names match one of the patterns
and do not match an <b>--exclude-dir</b> pattern. This
applies to all directories, whether listed on the command
line, obtained from <b>--file-list</b>, or by scanning a
parent directory. The pattern is a PCRE2 regular expression,
and is matched against the final component of the directory
name, not the entire path. The <b>-F</b>, <b>-w</b>, and
<b>-x</b> options do not apply to this pattern. The option
may be given any number of times. If a directory matches
both <b>--include-dir</b> and <b>--exclude-dir</b>, it is
excluded. There is no short form for this option.</p>

<p style="margin-left:11%;"><b>-L</b>,
<b>--files-without-match</b></p>

<p style="margin-left:26%;">Instead of outputting lines
from the files, just output the names of the files that do
not contain any lines that would have been output. Each file
name is output once, on a separate line by default, but if
the <b>-Z</b> option is set, they are separated by zero
bytes instead of newlines. This option overrides any
previous <b>-H</b>, <b>-h</b>, or <b>-l</b> options.</p>

<p style="margin-left:11%;"><b>-l</b>,
<b>--files-with-matches</b></p>

<p style="margin-left:26%;">Instead of outputting lines
from the files, just output the names of the files
containing lines that would have been output. Each file name
is output once, on a separate line, but if the <b>-Z</b>
option is set, they are separated by zero bytes instead of
newlines. Searching normally stops as soon as a matching
line is found in a file. However, if the <b>-c</b> (count)
option is also used, matching continues in order to obtain
the correct count, and those files that have at least one
match are listed along with their counts. Using this option
with <b>-c</b> is a way of suppressing the listing of files
with no matches that occurs with <b>-c</b> on its own. This
option overrides any previous <b>-H</b>, <b>-h</b>, or
<b>-L</b> options.</p>

<p style="margin-left:11%;"><b>--label</b>=<i>name</i></p>

<p style="margin-left:26%;">This option supplies a name to
be used for the standard input when file names are being
output. If not supplied, &quot;(standard input)&quot; is
used. There is no short form for this option.</p>

<p style="margin-left:11%;"><b>--line-buffered</b></p>

<p style="margin-left:26%;">When this option is given,
non-compressed input is read and processed line by line, and
the output is flushed after each write. By default, input is
read in large chunks, unless <b>pcre2grep</b> can determine
that it is reading from a terminal, which is currently
possible only in Unix-like environments or Windows. Output
to terminal is normally automatically flushed by the
operating system. This option can be useful when the input
or output is attached to a pipe and you do not want
<b>pcre2grep</b> to buffer up large amounts of data.
However, its use will affect performance, and the <b>-M</b>
(multiline) option ceases to work. When input is from a
compressed .gz or .bz2 file, <b>--line-buffered</b> is
ignored.</p>

<p style="margin-left:11%;"><b>--line-offsets</b></p>

<p style="margin-left:26%;">Instead of showing lines or
parts of lines that match, show each match as a line number,
the offset from the start of the line, and a length. The
line number is terminated by a colon (as usual; see the
<b>-n</b> option), and the offset and length are separated
by a comma. In this mode, <b>--colour</b> has no effect, and
no context is shown. That is, the <b>-A</b>, <b>-B</b>, and
<b>-C</b> options are ignored. If there is more than one
match in a line, each of them is shown separately. This
option is mutually exclusive with <b>--output</b>,
<b>--file-offsets</b>, and <b>--only-matching</b>.</p>


<p style="margin-left:11%;"><b>--locale</b>=<i>locale-name</i></p>

<p style="margin-left:26%;">This option specifies a locale
to be used for pattern matching. It overrides the value in
the <b>LC_ALL</b> or <b>LC_CTYPE</b> environment variables.
If no locale is specified, the PCRE2 library&rsquo;s default
(usually the &quot;C&quot; locale) is used. There is no
short form for this option.</p>

<p style="margin-left:11%;"><b>-M</b>,
<b>--multiline</b></p>

<p style="margin-left:26%;">Allow patterns to match more
than one line. When this option is set, the PCRE2 library is
called in &quot;multiline&quot; mode. This allows a matched
string to extend past the end of a line and continue on one
or more subsequent lines. Patterns used with <b>-M</b> may
usefully contain literal newline characters and internal
occurrences of ^ and $ characters. The output for a
successful match may consist of more than one line. The
first line is the line in which the match started, and the
last line is the line in which the match ended. If the
matched string ends with a newline sequence, the output ends
at the end of that line. If <b>-v</b> is set, none of the
lines in a multi-line match are output. Once a match has
been handled, scanning restarts at the beginning of the line
after the one in which the match ended.</p>

<p style="margin-left:26%; margin-top: 1em">The newline
sequence that separates multiple lines must be matched as
part of the pattern. For example, to find the phrase
&quot;regular expression&quot; in a file where
&quot;regular&quot; might be at the end of a line and
&quot;expression&quot; at the start of the next line, you
could use this command:</p>

<p style="margin-left:26%; margin-top: 1em">pcre2grep -M
&rsquo;regular\s+expression&rsquo; &lt;file&gt;</p>

<p style="margin-left:26%; margin-top: 1em">The \s escape
sequence matches any white space character, including
newlines, and is followed by + so as to match trailing white
space on the first line as well as possibly handling a
two-character newline sequence.</p>

<p style="margin-left:26%; margin-top: 1em">There is a
limit to the number of lines that can be matched, imposed by
the way that <b>pcre2grep</b> buffers the input file as it
scans it. With a sufficiently large processing buffer, this
should not be a problem, but the <b>-M</b> option does not
work when input is read line by line (see
<b>--line-buffered</b>.)</p>

<p style="margin-left:11%;"><b>-m</b> <i>number</i>,
<b>--max-count</b>=<i>number</i></p>

<p style="margin-left:26%;">Stop processing after finding
<i>number</i> matching lines, or non-matching lines if
<b>-v</b> is also set. Any trailing context lines are output
after the final match. In multiline mode, each multiline
match counts as just one line for this purpose. If this
limit is reached when reading the standard input from a
regular file, the file is left positioned just after the
last matching line. If <b>-c</b> is also set, the count that
is output is never greater than <i>number</i>. This option
has no effect if used with <b>-L</b>, <b>-l</b>, or
<b>-q</b>, or when just checking for a match in a binary
file.</p>


<p style="margin-left:11%;"><b>--match-limit</b>=<i>number</i></p>

<p style="margin-left:26%;">Processing some regular
expression patterns may take a very long time to search for
all possible matching strings. Others may require a very
large amount of memory. There are three options that set
resource limits for matching.</p>

<p style="margin-left:26%; margin-top: 1em">The
<b>--match-limit</b> option provides a means of limiting
computing resource usage when processing patterns that are
not going to match, but which have a very large number of
possibilities in their search trees. The classic example is
a pattern that uses nested unlimited repeats. Internally,
PCRE2 has a counter that is incremented each time around its
main processing loop. If the value set by
<b>--match-limit</b> is reached, an error occurs.</p>

<p style="margin-left:26%; margin-top: 1em">The
<b>--heap-limit</b> option specifies, as a number of
kibibytes (units of 1024 bytes), the maximum amount of heap
memory that may be used for matching.</p>

<p style="margin-left:26%; margin-top: 1em">The
<b>--depth-limit</b> option limits the depth of nested
backtracking points, which indirectly limits the amount of
memory that is used. The amount of memory needed for each
backtracking point depends on the number of capturing
parentheses in the pattern, so the amount of memory that is
used before this limit acts varies from pattern to pattern.
This limit is of use only if it is set smaller than
<b>--match-limit</b>.</p>

<p style="margin-left:26%; margin-top: 1em">There are no
short forms for these options. The default limits can be set
when the PCRE2 library is compiled; if they are not
specified, the defaults are very large and so effectively
unlimited.</p>


<p style="margin-left:11%;"><b>--max-buffer-size</b>=<i>number</i></p>

<p style="margin-left:26%;">This limits the expansion of
the processing buffer, whose initial size can be set by
<b>--buffer-size</b>. The maximum buffer size is silently
forced to be no smaller than the starting buffer size.</p>

<p style="margin-left:11%;"><b>-N</b> <i>newline-type</i>,
<b>--newline</b>=<i>newline-type</i></p>

<p style="margin-left:26%;">Six different conventions for
indicating the ends of lines in scanned files are supported.
For example:</p>

<p style="margin-left:26%; margin-top: 1em">pcre2grep -N
CRLF &rsquo;some pattern&rsquo; &lt;file&gt;</p>

<p style="margin-left:26%; margin-top: 1em">The newline
type may be specified in upper, lower, or mixed case. If the
newline type is NUL, lines are separated by binary zero
characters. The other types are the single-character
sequences CR (carriage return) and LF (linefeed), the
two-character sequence CRLF, an &quot;anycrlf&quot; type,
which recognizes any of the preceding three types, and an
&quot;any&quot; type, for which any Unicode line ending
sequence is assumed to end a line. The Unicode sequences are
the three just mentioned, plus VT (vertical tab, U+000B), FF
(form feed, U+000C), NEL (next line, U+0085), LS (line
separator, U+2028), and PS (paragraph separator,
U+2029).</p>

<p style="margin-left:26%; margin-top: 1em">When the PCRE2
library is built, a default line-ending sequence is
specified. This is normally the standard sequence for the
operating system. Unless otherwise specified by this option,
<b>pcre2grep</b> uses the library&rsquo;s default.</p>

<p style="margin-left:26%; margin-top: 1em">This option
makes it possible to use <b>pcre2grep</b> to scan files that
have come from other environments without having to modify
their line endings. If the data that is being scanned does
not agree with the convention set by this option,
<b>pcre2grep</b> may behave in strange ways. Note that this
option does not apply to files specified by the <b>-f</b>,
<b>--exclude-from</b>, or <b>--include-from</b> options,
which are expected to use the operating system&rsquo;s
standard newline sequence.</p>

<p style="margin-left:11%;"><b>-n</b>,
<b>--line-number</b></p>

<p style="margin-left:26%;">Precede each output line by its
line number in the file, followed by a colon for matching
lines or a hyphen for context lines. If the file name is
also being output, it precedes the line number. When the
<b>-M</b> option causes a pattern to match more than one
line, only the first is preceded by its line number. This
option is forced if <b>--line-offsets</b> is used.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p><b>--no-jit</b></p></td>
<td width="3%"></td>
<td width="74%">


<p>If the PCRE2 library is built with support for
just-in-time compiling (which speeds up matching),
<b>pcre2grep</b> automatically makes use of this, unless it
was explicitly disabled at build time. This option can be
used to disable the use of JIT at run time. It is provided
for testing and working round problems. It should never be
needed in normal use.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-O</b> <i>text</i>,
<b>--output</b>=<i>text</i></p>

<p style="margin-left:26%;">When there is a match, instead
of outputting the line that matched, output just the text
specified in this option, followed by an operating-system
standard newline. In this mode, <b>--colour</b> has no
effect, and no context is shown. That is, the <b>-A</b>,
<b>-B</b>, and <b>-C</b> options are ignored. The
<b>--newline</b> option has no effect on this option, which
is mutually exclusive with <b>--only-matching</b>,
<b>--file-offsets</b>, and <b>--line-offsets</b>. However,
like <b>--only-matching</b>, if there is more than one match
in a line, each of them causes a line of output.</p>

<p style="margin-left:26%; margin-top: 1em">Escape
sequences starting with a dollar character may be used to
insert the contents of the matched part of the line and/or
captured substrings into the text.</p>


<p style="margin-left:26%; margin-top: 1em">$&lt;digits&gt;
or ${&lt;digits&gt;} is replaced by the captured substring
of the given decimal number; zero substitutes the whole
match. If the number is greater than the number of capturing
substrings, or if the capture is unset, the replacement is
empty.</p>

<p style="margin-left:26%; margin-top: 1em">$a is replaced
by bell; $b by backspace; $e by escape; $f by form feed; $n
by newline; $r by carriage return; $t by tab; $v by vertical
tab.</p>


<p style="margin-left:26%; margin-top: 1em">$o&lt;digits&gt;
or $o{&lt;digits&gt;} is replaced by the character whose
code point is the given octal number. In the first form, up
to three octal digits are processed. When more digits are
needed in Unicode mode to specify a wide character, the
second form must be used.</p>


<p style="margin-left:26%; margin-top: 1em">$x&lt;digits&gt;
or $x{&lt;digits&gt;} is replaced by the character
represented by the given hexadecimal number. In the first
form, up to two hexadecimal digits are processed. When more
digits are needed in Unicode mode to specify a wide
character, the second form must be used.</p>

<p style="margin-left:26%; margin-top: 1em">Any other
character is substituted by itself. In particular, $$ is
replaced by a single dollar.</p>

<p style="margin-left:11%;"><b>-o</b>,
<b>--only-matching</b></p>

<p style="margin-left:26%;">Show only the part of the line
that matched a pattern instead of the whole line. In this
mode, no context is shown. That is, the <b>-A</b>,
<b>-B</b>, and <b>-C</b> options are ignored. If there is
more than one match in a line, each of them is shown
separately, on a separate line of output. If <b>-o</b> is
combined with <b>-v</b> (invert the sense of the match to
find non-matching lines), no output is generated, but the
return code is set appropriately. If the matched portion of
the line is empty, nothing is output unless the file name or
line number are being printed, in which case they are shown
on an otherwise empty line. This option is mutually
exclusive with <b>--output</b>, <b>--file-offsets</b> and
<b>--line-offsets</b>.</p>

<p style="margin-left:11%;"><b>-o</b><i>number</i>,
<b>--only-matching</b>=<i>number</i></p>

<p style="margin-left:26%;">Show only the part of the line
that matched the capturing parentheses of the given number.
Up to 50 capturing parentheses are supported by default.
This limit can be changed via the <b>--om-capture</b>
option. A pattern may contain any number of capturing
parentheses, but only those whose number is within the limit
can be accessed by <b>-o</b>. An error occurs if the number
specified by <b>-o</b> is greater than the limit.</p>

<p style="margin-left:26%; margin-top: 1em">-o0 is the same
as <b>-o</b> without a number. Because these options can be
given without an argument (see above), if an argument is
present, it must be given in the same shell item, for
example, -o3 or --only-matching=2. The comments given for
the non-argument case above also apply to this option. If
the specified capturing parentheses do not exist in the
pattern, or were not set in the match, nothing is output
unless the file name or line number are being output.</p>

<p style="margin-left:26%; margin-top: 1em">If this option
is given multiple times, multiple substrings are output for
each match, in the order the options are given, and all on
one line. For example, -o3 -o1 -o3 causes the substrings
matched by capturing parentheses 3 and 1 and then 3 again to
be output. By default, there is no separator (but see the
next but one option).</p>


<p style="margin-left:11%;"><b>--om-capture</b>=<i>number</i></p>

<p style="margin-left:26%;">Set the number of capturing
parentheses that can be accessed by <b>-o</b>. The default
is 50.</p>


<p style="margin-left:11%;"><b>--om-separator</b>=<i>text</i></p>

<p style="margin-left:26%;">Specify a separating string for
multiple occurrences of <b>-o</b>. The default is an empty
string. Separating strings are never coloured.</p>

<p style="margin-left:11%;"><b>-q</b>, <b>--quiet</b></p>

<p style="margin-left:26%;">Work quietly, that is, display
nothing except error messages. The exit status indicates
whether or not any matches were found.</p>

<p style="margin-left:11%;"><b>-r</b>,
<b>--recursive</b></p>

<p style="margin-left:26%;">If any given path is a
directory, recursively scan the files it contains, taking
note of any <b>--include</b> and <b>--exclude</b> settings.
By default, a directory is read as a normal file; in some
operating systems this gives an immediate end-of-file. This
option is a shorthand for setting the <b>-d</b> option to
&quot;recurse&quot;.</p>


<p style="margin-left:11%;"><b>--recursion-limit</b>=<i>number</i></p>

<p style="margin-left:26%;">This is an obsolete synonym for
<b>--depth-limit</b>. See <b>--match-limit</b> above for
details.</p>

<p style="margin-left:11%;"><b>-s</b>,
<b>--no-messages</b></p>

<p style="margin-left:26%;">Suppress error messages about
non-existent or unreadable files. Such files are quietly
skipped. However, the return code is still 2, even if
matches were found in other files.</p>

<p style="margin-left:11%;"><b>-t</b>,
<b>--total-count</b></p>

<p style="margin-left:26%;">This option is useful when
scanning more than one file. If used on its own, <b>-t</b>
suppresses all output except for a grand total number of
matching lines (or non-matching lines if <b>-v</b> is used)
in all the files. If <b>-t</b> is used with <b>-c</b>, a
grand total is output except when the previous output is
just one line. In other words, it is not output when just
one file&rsquo;s count is listed. If file names are being
output, the grand total is preceded by &quot;TOTAL:&quot;.
Otherwise, it appears as just another number. The <b>-t</b>
option is ignored when used with <b>-L</b> (list files
without matches), because the grand total would always be
zero.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p><b>-u</b>, <b>--utf</b></p></td>
<td width="1%"></td>
<td width="74%">


<p>Operate in UTF-8 mode. This option is available only if
PCRE2 has been compiled with UTF-8 support. All patterns
(including those for any <b>--exclude</b> and
<b>--include</b> options) and all lines that are scanned
must be valid strings of UTF-8 characters. If an invalid
UTF-8 string is encountered, an error occurs.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>-U</b>,
<b>--utf-allow-invalid</b></p>

<p style="margin-left:26%;">As <b>--utf</b>, but in
addition subject lines may contain invalid UTF-8 code unit
sequences. These can never form part of any pattern match.
Patterns themselves, however, must still be valid UTF-8
strings. This facility allows valid UTF-8 strings to be
sought within arbitrary byte sequences in executable or
other binary files. For more details about matching in
non-valid UTF-8 strings, see the <b>pcre2unicode</b>(3)
documentation.</p>

<p style="margin-left:11%;"><b>-V</b>, <b>--version</b></p>

<p style="margin-left:26%;">Write the version numbers of
<b>pcre2grep</b> and the PCRE2 library to the standard
output and then exit. Anything else on the command line is
ignored.</p>

<p style="margin-left:11%;"><b>-v</b>,
<b>--invert-match</b></p>

<p style="margin-left:26%;">Invert the sense of the match,
so that lines which do <i>not</i> match any of the patterns
are the ones that are found. When this option is set,
options such as <b>--only-matching</b> and <b>--output</b>,
which specify parts of a match that are to be output, are
ignored.</p>

<p style="margin-left:11%;"><b>-w</b>, <b>--word-regex</b>,
<b>--word-regexp</b></p>

<p style="margin-left:26%;">Force the patterns only to
match &quot;words&quot;. That is, there must be a word
boundary at the start and end of each matched string. This
is equivalent to having &quot;\b(?:&quot; at the start of
each pattern, and &quot;)\b&quot; at the end. This option
applies only to the patterns that are matched against the
contents of files; it does not apply to patterns specified
by any of the <b>--include</b> or <b>--exclude</b>
options.</p>

<p style="margin-left:11%;"><b>-x</b>, <b>--line-regex</b>,
<b>--line-regexp</b></p>

<p style="margin-left:26%;">Force the patterns to start
matching only at the beginnings of lines, and in addition,
require them to match entire lines. In multiline mode the
match may be more than one line. This is equivalent to
having &quot;^(?:&quot; at the start of each pattern and
&quot;)$&quot; at the end. This option applies only to the
patterns that are matched against the contents of files; it
does not apply to patterns specified by any of the
<b>--include</b> or <b>--exclude</b> options.</p>

<p style="margin-left:11%;"><b>-Z</b>, <b>--null</b></p>

<p style="margin-left:26%;">Terminate files names in the
regular output with a zero byte (the NUL character) instead
of what would normally appear. This is useful when file
names contain unusual characters such as colons, hyphens, or
even newlines. The option does not apply to file names in
error messages.</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The environment
variables <b>LC_ALL</b> and <b>LC_CTYPE</b> are examined, in
that order, for a locale. The first one that is set is used.
This can be overridden by the <b>--locale</b> option. If no
locale is set, the PCRE2 library&rsquo;s default (usually
the &quot;C&quot; locale) is used.</p>

<h2>NEWLINES
<a name="NEWLINES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>-N</b>
(<b>--newline</b>) option allows <b>pcre2grep</b> to scan
files with newline conventions that differ from the default.
This option affects only the way scanned files are
processed. It does not affect the interpretation of files
specified by the <b>-f</b>, <b>--file-list</b>,
<b>--exclude-from</b>, or <b>--include-from</b> options.</p>

<p style="margin-left:11%; margin-top: 1em">Any parts of
the scanned input files that are written to the standard
output are copied with whatever newline sequences they have
in the input. However, if the final line of a file is
output, and it does not end with a newline sequence, a
newline sequence is added. If the newline setting is CR, LF,
CRLF or NUL, that line ending is output; for the other
settings (ANYCRLF or ANY) a single NL is used.</p>

<p style="margin-left:11%; margin-top: 1em">The newline
setting does not affect the way in which <b>pcre2grep</b>
writes newlines in informational messages to the standard
output and error streams. Under Windows, the standard output
is set to be binary, so that &quot;\r\n&quot; at the ends of
output lines that are copied from the input is not converted
to &quot;\r\r\n&quot; by the C I/O library. This means that
any messages written to the standard output must end with
&quot;\r\n&quot;. For all other operating systems, and for
all messages to the standard error stream, &quot;\n&quot; is
used.</p>

<h2>OPTIONS COMPATIBILITY
<a name="OPTIONS COMPATIBILITY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Many of the
short and long forms of <b>pcre2grep</b>&rsquo;s options are
the same as in the GNU <b>grep</b> program. Any long option
of the form <b>--xxx-regexp</b> (GNU terminology) is also
available as <b>--xxx-regex</b> (PCRE2 terminology).
However, the <b>--depth-limit</b>, <b>--file-list</b>,
<b>--file-offsets</b>, <b>--heap-limit</b>,
<b>--include-dir</b>, <b>--line-offsets</b>,
<b>--locale</b>, <b>--match-limit</b>, <b>-M</b>,
<b>--multiline</b>, <b>-N</b>, <b>--newline</b>,
<b>--om-separator</b>, <b>--output</b>, <b>-u</b>,
<b>--utf</b>, <b>-U</b>, and <b>--utf-allow-invalid</b>
options are specific to <b>pcre2grep</b>, as is the use of
the <b>--only-matching</b> option with a capturing
parentheses number.</p>

<p style="margin-left:11%; margin-top: 1em">Although most
of the common options work the same way, a few are different
in <b>pcre2grep</b>. For example, the <b>--include</b>
option&rsquo;s argument is a glob for GNU <b>grep</b>, but a
regular expression for <b>pcre2grep</b>. If both the
<b>-c</b> and <b>-l</b> options are given, GNU grep lists
only file names, without counts, but <b>pcre2grep</b> gives
the counts as well.</p>

<h2>OPTIONS WITH DATA
<a name="OPTIONS WITH DATA"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There are four
different ways in which an option with data can be
specified. If a short form option is used, the data may
follow immediately, or (with one exception) in the next
command line item. For example:</p>

<p style="margin-left:11%; margin-top: 1em">-f/some/file
<br>
-f /some/file</p>

<p style="margin-left:11%; margin-top: 1em">The exception
is the <b>-o</b> option, which may appear with or without
data. Because of this, if data is present, it must follow
immediately in the same item, for example -o3.</p>

<p style="margin-left:11%; margin-top: 1em">If a long form
option is used, the data may appear in the same command line
item, separated by an equals character, or (with two
exceptions) it may appear in the next command line item. For
example:</p>


<p style="margin-left:11%; margin-top: 1em">--file=/some/file
<br>
--file /some/file</p>

<p style="margin-left:11%; margin-top: 1em">Note, however,
that if you want to supply a file name beginning with ~ as
data in a shell command, and have the shell expand ~ to a
home directory, you must separate the file name from the
option, because the shell does not treat ~ specially unless
it is at the start of an item.</p>

<p style="margin-left:11%; margin-top: 1em">The exceptions
to the above are the <b>--colour</b> (or <b>--color</b>) and
<b>--only-matching</b> options, for which the data is
optional. If one of these options does have data, it must be
given in the first form, using an equals character.
Otherwise <b>pcre2grep</b> will assume that it has no
data.</p>

<h2>USING PCRE2&rsquo;S CALLOUT FACILITY
<a name="USING PCRE2&rsquo;S CALLOUT FACILITY"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pcre2grep</b>
has, by default, support for calling external programs or
scripts or echoing specific strings during matching by
making use of PCRE2&rsquo;s callout facility. However, this
support can be completely or partially disabled when
<b>pcre2grep</b> is built. You can find out whether your
binary has support for callouts by running it with the
<b>--help</b> option. If callout support is completely
disabled, all callouts in patterns are ignored by
<b>pcre2grep</b>. If the facility is partially disabled,
calling external programs is not supported, and callouts
that request it are ignored.</p>

<p style="margin-left:11%; margin-top: 1em">A callout in a
PCRE2 pattern is of the form (?C&lt;arg&gt;) where the
argument is either a number or a quoted string (see the
<b>pcre2callout</b> documentation for details). Numbered
callouts are ignored by <b>pcre2grep</b>; only callouts with
string arguments are useful.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Echoing a
specific string</b></p>

<p style="margin-left:11%; margin-top: 1em">Starting the
callout string with a pipe character invokes an echoing
facility that avoids calling an external program or script.
This facility is always available, provided that callouts
were not completely disabled when <b>pcre2grep</b> was
built. The rest of the callout string is processed as a
zero-terminated string, which means it should not contain
any internal binary zeros. It is written to the output,
having first been passed through the same escape processing
as text from the <b>--output</b> (<b>-O</b>) option (see
above). However, $0 cannot be used to insert a matched
substring because the match is still in progress. Instead,
the single character &rsquo;0&rsquo; is inserted. Any syntax
errors in the string (for example, a dollar not followed by
another character) causes the callout to be ignored. No
terminator is added to the output string, so if you want a
newline, you must include it explicitly using the escape $n.
For example:</p>

<p style="margin-left:11%; margin-top: 1em">pcre2grep
&rsquo;(.)(..(.))(?C&quot;|[$1] [$2] [$3]$n&quot;)&rsquo;
&lt;some file&gt;</p>

<p style="margin-left:11%; margin-top: 1em">Matching
continues normally after the string is output. If you want
to see only the callout output but not any output from an
actual match, you should end the pattern with (*FAIL).</p>

<p style="margin-left:11%; margin-top: 1em"><b>Calling
external programs or scripts</b></p>

<p style="margin-left:11%; margin-top: 1em">This facility
can be independently disabled when <b>pcre2grep</b> is
built. It is supported for Windows, where a call to
<b>_spawnvp()</b> is used, for VMS, where <b>lib$spawn()</b>
is used, and for any Unix-like environment where
<b>fork()</b> and <b>execv()</b> are available.</p>

<p style="margin-left:11%; margin-top: 1em">If the callout
string does not start with a pipe (vertical bar) character,
it is parsed into a list of substrings separated by pipe
characters. The first substring must be an executable name,
with the following substrings specifying arguments:</p>


<p style="margin-left:11%; margin-top: 1em">executable_name|arg1|arg2|...</p>

<p style="margin-left:11%; margin-top: 1em">Any substring
(including the executable name) may contain escape sequences
started by a dollar character. These are the same as for the
<b>--output</b> (<b>-O</b>) option documented above, except
that $0 cannot insert the matched string because the match
is still in progress. Instead, the character &rsquo;0&rsquo;
is inserted. If you need a literal dollar or pipe character
in any substring, use $$ or $| respectively. Here is an
example:</p>

<p style="margin-left:11%; margin-top: 1em">echo -e
&quot;abcde\n12345&quot; | pcre2grep \ <br>
&rsquo;(?x)(.)(..(.)) <br>
(?C&quot;/bin/echo|Arg1: [$1] [$2] [$3]|Arg2: $|${1}$|
($4)&quot;)()&rsquo; -</p>

<p style="margin-left:11%; margin-top: 1em">Output:</p>

<p style="margin-left:11%; margin-top: 1em">Arg1: [a] [bcd]
[d] Arg2: |a| () <br>
abcde <br>
Arg1: [1] [234] [4] Arg2: |1| () <br>
12345</p>

<p style="margin-left:11%; margin-top: 1em">The parameters
for the system call that is used to run the program or
script are zero-terminated strings. This means that binary
zero characters in the callout argument will cause premature
termination of their substrings, and therefore should not be
present. Any syntax errors in the string (for example, a
dollar not followed by another character) causes the callout
to be ignored. If running the program fails for any reason
(including the non-existence of the executable), a local
matching failure occurs and the matcher backtracks in the
normal way.</p>

<h2>MATCHING ERRORS
<a name="MATCHING ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">It is possible
to supply a regular expression that takes a very long time
to fail to match certain lines. Such patterns normally
involve nested indefinite repeats, for example: (a+)*\d when
matched against a line of a&rsquo;s with no final digit. The
PCRE2 matching function has a resource limit that causes it
to abort in these circumstances. If this happens,
<b>pcre2grep</b> outputs an error message and the line that
caused the problem to the standard error stream. If there
are more than 20 such errors, <b>pcre2grep</b> gives up.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>--match-limit</b> option of <b>pcre2grep</b> can be used
to set the overall resource limit. There are also other
limits that affect the amount of memory used during
matching; see the discussion of <b>--heap-limit</b> and
<b>--depth-limit</b> above.</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Exit status is
0 if any matches were found, 1 if no matches were found, and
2 for syntax errors, overlong lines, non-existent or
inaccessible files (even if matches were found in other
files) or too many matching errors. Using the <b>-s</b>
option to suppress error messages about inaccessible files
does not affect the return code.</p>

<p style="margin-left:11%; margin-top: 1em">When run under
VMS, the return code is placed in the symbol PCRE2GREP_RC
because VMS does not distinguish between exit(0) and
exit(1).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pcre2pattern</b>(3),
<b>pcre2syntax</b>(3), <b>pcre2callout</b>(3),
<b>pcre2unicode</b>(3).</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Philip Hazel
<br>
Retired from University Computing Service <br>
Cambridge, England.</p>

<h2>REVISION
<a name="REVISION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Last updated:
21 November 2022 <br>
Copyright (c) 1997-2022 University of Cambridge.</p>
<hr>
</body>
</html>
