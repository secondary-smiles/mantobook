<!-- Creator     : groff version 1.22.4 -->
<!-- CreationDate: Mon May 29 22:53:45 2023 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>tpmtool</title>

</head>
<body>
<h1>tpmtool</h1>



<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>tpmtool</b>
&minus; GnuTLS TPM tool</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>tpmtool</b>
[<b>&minus;flags</b>] [<b>&minus;flag</b> [<i>value</i>]]
[<b>&minus;&minus;option-name</b>[[=| ]<i>value</i>]]</p>

<p style="margin-left:11%; margin-top: 1em">All arguments
must be options.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Program that
allows handling cryptographic data from the TPM chip.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;d</b>
<i>num</i>, <b>&minus;&minus;debug</b>=<i>num</i></p>

<p style="margin-left:22%;">Enable debugging. This option
takes an integer number as its argument. The value of
<i>num</i> is constrained to being:</p>

<p style="margin-left:28%;">in the range 0 through 9999</p>

<p style="margin-left:22%; margin-top: 1em">Specifies the
debug level.</p>


<p style="margin-left:11%;"><b>&minus;&minus;infile</b>=<i>file</i></p>

<p style="margin-left:22%;">Input file.</p>


<p style="margin-left:11%;"><b>&minus;&minus;outfile</b>=<i>str</i></p>

<p style="margin-left:22%;">Output file.</p>


<p style="margin-left:11%;"><b>&minus;&minus;generate&minus;rsa</b></p>

<p style="margin-left:22%;">Generate an RSA private-public
key pair.</p>

<p style="margin-left:22%; margin-top: 1em">Generates an
RSA private&minus;public key pair in the TPM chip. The key
may be stored in file system and protected by a PIN, or
stored (registered) in the TPM chip flash.</p>


<p style="margin-left:11%;"><b>&minus;&minus;register</b></p>

<p style="margin-left:22%;">Any generated key will be
registered in the TPM. This option must appear in
combination with the following options: generate-rsa.</p>


<p style="margin-left:11%;"><b>&minus;&minus;signing</b></p>

<p style="margin-left:22%;">Any generated key will be a
signing key. This option must not appear in combination with
any of the following options: legacy. This option must
appear in combination with the following options:
generate-rsa.</p>


<p style="margin-left:11%;"><b>&minus;&minus;legacy</b></p>

<p style="margin-left:22%;">Any generated key will be a
legacy key. This option must not appear in combination with
any of the following options: signing. This option must
appear in combination with the following options:
generate-rsa.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;user</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Any registered key will be a user key. This option must
not appear in combination with any of the following options:
system. This option must appear in combination with the
following options: register.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The generated
key will be stored in a user specific persistent
storage.</p>


<p style="margin-left:11%;"><b>&minus;&minus;system</b></p>

<p style="margin-left:22%;">Any registered key will be a
system key. This option must not appear in combination with
any of the following options: user. This option must appear
in combination with the following options: register.</p>

<p style="margin-left:22%; margin-top: 1em">The generated
key will be stored in system persistent storage.</p>


<p style="margin-left:11%;"><b>&minus;&minus;pubkey</b>=<i>url</i></p>

<p style="margin-left:22%;">Prints the public key of the
provided key.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>&minus;&minus;list</b></p></td>
<td width="2%"></td>
<td width="50%">


<p>Lists all stored keys in the TPM.</p></td>
<td width="28%">
</td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;delete</b>=<i>url</i></p>

<p style="margin-left:22%;">Delete the key identified by
the given URL (UUID).</p>


<p style="margin-left:11%;"><b>&minus;&minus;test&minus;sign</b>=<i>url</i></p>

<p style="margin-left:22%;">Tests the signature operation
of the provided object.</p>

<p style="margin-left:22%; margin-top: 1em">It can be used
to test the correct operation of the signature operation.
This operation will sign and verify the signed data.</p>


<p style="margin-left:11%;"><b>&minus;&minus;sec&minus;param</b>=<i>security
parameter</i></p>

<p style="margin-left:22%;">Specify the security level
[low, legacy, medium, high, ultra].</p>

<p style="margin-left:22%; margin-top: 1em">This is
alternative to the bits option. Note however that the values
allowed by the TPM chip are quantized and given values may
be rounded up.</p>


<p style="margin-left:11%;"><b>&minus;&minus;bits</b>=<i>num</i></p>

<p style="margin-left:22%;">Specify the number of bits for
key generate. This option takes an integer number as its
argument.</p>

<p style="margin-left:11%;"><b>&minus;&minus;inder</b>,
<b>&minus;&minus;no&minus;inder</b></p>

<p style="margin-left:22%;">Use the DER format for keys.
The <i>no&minus;inder</i> form will disable the option.</p>

<p style="margin-left:22%; margin-top: 1em">The input files
will be assumed to be in the portable DER format of TPM. The
default format is a custom format used by various TPM
tools</p>

<p style="margin-left:11%;"><b>&minus;&minus;outder</b>,
<b>&minus;&minus;no&minus;outder</b></p>

<p style="margin-left:22%;">Use DER format for output keys.
The <i>no&minus;outder</i> form will disable the option.</p>

<p style="margin-left:22%; margin-top: 1em">The output will
be in the TPM portable DER format.</p>


<p style="margin-left:11%;"><b>&minus;&minus;srk&minus;well&minus;known</b></p>

<p style="margin-left:22%;">SRK has well known password (20
bytes of zeros).</p>

<p style="margin-left:11%;"><b>&minus;v</b> <i>arg</i>,
<b>&minus;&minus;version</b>=<i>arg</i></p>

<p style="margin-left:22%;">Output version of program and
exit. The default mode is &lsquo;v&rsquo;, a simple version.
The &lsquo;c&rsquo; mode will print copyright information
and &lsquo;n&rsquo; will print the full copyright
notice.</p>

<p style="margin-left:11%;"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:22%;">Display usage information and
exit.</p>

<p style="margin-left:11%;"><b>&minus;!</b>,
<b>&minus;&minus;more&minus;help</b></p>

<p style="margin-left:22%;">Pass the extended usage
information through a pager.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To generate a
key that is to be stored in file system use:</p>

<p style="margin-left:17%;">$ tpmtool
&minus;&minus;generate&minus;rsa &minus;&minus;bits 2048
&minus;&minus;outfile tpmkey.pem</p>

<p style="margin-left:11%; margin-top: 1em">To generate a
key that is to be stored in TPM&rsquo;s flash use:</p>

<p style="margin-left:17%;">$ tpmtool
&minus;&minus;generate&minus;rsa &minus;&minus;bits 2048
&minus;&minus;register &minus;&minus;user</p>

<p style="margin-left:11%; margin-top: 1em">To get the
public key of a TPM key use:</p>

<p style="margin-left:17%;">$ tpmtool &minus;&minus;pubkey
tpmkey:uuid=58ad734b&minus;bde6&minus;45c7&minus;89d8&minus;756a55ad1891;storage=user
&minus;&minus;outfile pubkey.pem</p>

<p style="margin-left:11%; margin-top: 1em">or if the key
is stored in the file system:</p>

<p style="margin-left:17%;">$ tpmtool &minus;&minus;pubkey
tpmkey:file=tmpkey.pem &minus;&minus;outfile pubkey.pem</p>

<p style="margin-left:11%; margin-top: 1em">To list all
keys stored in TPM use:</p>

<p style="margin-left:17%;">$ tpmtool
&minus;&minus;list</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">One of the
following exit values will be returned: <br>
0 (EXIT_SUCCESS)</p>

<p style="margin-left:22%;">Successful program
execution.</p>

<p style="margin-left:11%;">1 (EXIT_FAILURE)</p>

<p style="margin-left:22%;">The operation failed or the
command syntax was not valid.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">p11tool (1),
certtool (1)</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (C)
2020-2021 Free Software Foundation, and others all rights
reserved. This program is released under the terms of the
GNU General Public License, version 3 or later</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Please send bug
reports to: bugs@gnutls.org</p>
<hr>
</body>
</html>
